<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hunt Royal Gems System - Demo Modal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #FFD700;
            margin-bottom: 30px;
            text-shadow: 0 0 10px #FFD700;
        }

        .buttons-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .main-button {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .main-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        /* STYLES POUR LES MODALES */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            margin: 2% auto;
            padding: 0;
            border: 2px solid #FFD700;
            border-radius: 15px;
            width: 95%;
            max-width: 1400px;
            height: 90vh;
            overflow: hidden;
            position: relative;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
        }

        .modal-header {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            padding: 20px;
            border-radius: 13px 13px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            color: white;
            font-size: 28px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .close {
            color: white;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 5px 10px;
            border-radius: 50%;
        }

        .close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .modal-body {
            padding: 30px;
            height: calc(90vh - 100px);
            overflow-y: auto;
        }

        /* STYLES POUR LE SIMULATEUR */
        .simulator-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .simulator-header {
            color: #FFD700;
            font-size: 24px;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #FFD700;
        }

        .build-stats {
            background: rgba(255, 215, 0, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid #FFD700;
        }

        .build-stats h4 {
            color: #FFD700;
            margin-bottom: 15px;
            text-align: center;
            font-size: 20px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .stat-value {
            color: #4ECDC4;
            font-weight: bold;
        }

        .futuristic-sidebar {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 25px;
        }

        .gem-section, .equipment-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(76, 205, 196, 0.3);
        }

        .section-title {
            color: #4ECDC4;
            font-size: 20px;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 0 10px #4ECDC4;
        }

        .gems-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .gem-item {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .gem-item:hover {
            transform: translateY(-3px);
            border-color: #4ECDC4;
            box-shadow: 0 5px 15px rgba(76, 205, 196, 0.3);
        }

        .gem-item.selected {
            border-color: #FFD700;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            transform: scale(1.05);
        }

        .gem-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .gem-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .gem-power {
            color: #4ECDC4;
            font-size: 14px;
        }

        .equipment-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .equipment-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .equipment-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 10px;
            color: #FFD700;
            font-weight: bold;
        }

        .level-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .level-button {
            background: #4ECDC4;
            border: none;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .level-button:hover {
            background: #44A08D;
        }

        .level-display {
            background: rgba(255, 215, 0, 0.2);
            padding: 5px 10px;
            border-radius: 5px;
            border: 1px solid #FFD700;
            min-width: 80px;
            color: #FFD700;
            font-weight: bold;
        }

        .slots-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
        }

        .slot {
            width: 40px;
            height: 40px;
            border: 2px dashed rgba(255, 255, 255, 0.4);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
        }

        .slot:hover {
            border-color: #4ECDC4;
            background: rgba(76, 205, 196, 0.2);
        }

        .slot.filled {
            border-style: solid;
            border-color: #4ECDC4;
            background: linear-gradient(135deg, #4ECDC4, #44A08D);
        }

        .details-panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-top: 25px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .stat-category {
            margin-bottom: 25px;
        }

        .stat-category h4 {
            color: #FFD700;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            border-left: 3px solid #4ECDC4;
        }

        @media (max-width: 768px) {
            .futuristic-sidebar {
                grid-template-columns: 1fr;
            }
            
            .gems-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .equipment-grid {
                grid-template-columns: 1fr;
            }
        }

        /* STYLES ENCHANTEMENTS */
        .enchantment-section {
            margin: 20px 0;
        }

        .enchantments-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .enchantment-item {
            background: linear-gradient(145deg, #2a2a3e, #3a3a5e);
            border: 2px solid #4a4a6e;
            border-radius: 8px;
            padding: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .enchantment-item:hover {
            border-color: #FFD700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
            transform: translateY(-2px);
        }

        .enchantment-item.selected {
            border-color: #4ECDC4;
            background: linear-gradient(145deg, #3a4a5e, #4a5a7e);
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.5);
        }

        .enchantment-icon {
            font-size: 18px;
            margin-bottom: 4px;
        }

        .enchantment-name {
            font-size: 10px;
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 2px;
        }

        .enchantment-effect {
            font-size: 8px;
            color: #4ECDC4;
        }

        .enchantment-slot-container {
            margin: 10px 0;
        }

        .enchantment-label {
            font-size: 11px;
            color: #FFD700;
            margin-bottom: 5px;
            text-align: center;
        }

        .enchantment-slot {
            background: linear-gradient(145deg, #2a2a3e, #3a3a5e);
            border: 2px dashed #666;
            border-radius: 6px;
            padding: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .enchantment-slot:hover {
            border-color: #FFD700;
            background: linear-gradient(145deg, #3a3a5e, #4a4a7e);
        }

        .enchantment-slot.equipped {
            border: 2px solid #4ECDC4;
            background: linear-gradient(145deg, #3a4a5e, #4a5a7e);
            box-shadow: 0 0 10px rgba(78, 205, 196, 0.3);
        }

        .enchantment-placeholder {
            font-size: 10px;
            color: #888;
        }

        .enchantment-info {
            font-size: 9px;
            color: #4ECDC4;
            margin-top: 2px;
        }

        /* STYLES OPTIONS AVANC√âES */
        .advanced-options {
            background: linear-gradient(145deg, #1a1a2e, #2a2a3e);
            border: 1px solid #4a4a6e;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
        }

        .option-row {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .toggle-container {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .toggle-slider {
            position: relative;
            width: 50px;
            height: 24px;
            background: #333;
            border-radius: 24px;
            transition: background 0.3s ease;
        }

        .toggle-slider::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }

        .toggle-container input[type="checkbox"] {
            display: none;
        }

        .toggle-container input[type="checkbox"]:checked + .toggle-slider {
            background: #4ECDC4;
        }

        .toggle-container input[type="checkbox"]:checked + .toggle-slider::before {
            transform: translateX(26px);
        }

        .toggle-label {
            font-size: 12px;
            color: #FFD700;
            font-weight: bold;
        }

        .option-info {
            margin-left: auto;
        }

        .option-info small {
            color: #888;
            font-size: 10px;
        }

        /* MODE RANG 2 */
        .rank2-mode .enchantment-slot.equipped {
            border-color: #FF6B6B;
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.4);
        }

        .rank2-mode .enchantment-info {
            color: #FF6B6B;
        }

        /* STYLES STATISTIQUES D√âTAILL√âES */
        .stat-category {
            margin: 20px 0;
            background: linear-gradient(145deg, #1a1a2e, #2a2a3e);
            border: 1px solid #4a4a6e;
            border-radius: 10px;
            padding: 15px;
        }

        .stat-category h4 {
            color: #FFD700;
            margin-bottom: 15px;
            text-align: center;
            text-shadow: 0 0 5px #FFD700;
        }

        .build-summary {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            background: linear-gradient(145deg, #2a2a3e, #3a3a5e);
            border-radius: 6px;
        }

        .summary-label {
            font-weight: bold;
            color: #CCC;
        }

        .summary-value {
            text-align: right;
        }

        .loading-stats {
            padding: 40px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .stat-category {
                padding: 10px;
            }
            
            .summary-item {
                flex-direction: column;
                text-align: center;
                gap: 5px;
            }
        }

        /* STYLES AUTO-√âQUIPEMENT */
        .auto-equip-section {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #4a4a6e;
        }

        .auto-buttons-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .auto-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            padding: 12px 8px;
            background: linear-gradient(145deg, #2a2a3e, #3a3a5e);
            border: 2px solid #4a4a6e;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 10px;
            font-weight: bold;
        }

        .auto-button:hover {
            border-color: #4ECDC4;
            background: linear-gradient(145deg, #3a3a5e, #4a4a7e);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(78, 205, 196, 0.3);
        }

        .auto-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 8px rgba(78, 205, 196, 0.2);
        }

        .auto-button span:first-child {
            font-size: 16px;
        }

        .preset-builds {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #4a4a6e;
        }

        .preset-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        .preset-button {
            padding: 10px;
            background: linear-gradient(145deg, #1a1a2e, #2a2a3e);
            border: 2px solid #666;
            border-radius: 6px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 11px;
            font-weight: bold;
            text-align: center;
        }

        .preset-button:hover {
            border-color: #FFD700;
            background: linear-gradient(145deg, #2a2a3e, #3a3a5e);
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }

        .preset-button:active {
            transform: scale(0.95);
        }

        /* Styles sp√©cifiques par preset */
        .preset-button:nth-child(1):hover { border-color: #FF6B6B; box-shadow: 0 0 10px rgba(255, 107, 107, 0.3); }
        .preset-button:nth-child(2):hover { border-color: #4ECDC4; box-shadow: 0 0 10px rgba(78, 205, 196, 0.3); }
        .preset-button:nth-child(3):hover { border-color: #FFD700; box-shadow: 0 0 10px rgba(255, 215, 0, 0.3); }
        .preset-button:nth-child(4):hover { border-color: #9C27B0; box-shadow: 0 0 10px rgba(156, 39, 176, 0.3); }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèπ Hunt Royal - Syst√®me de Gemmes</h1>
        
        <div class="buttons-container">
            <button class="main-button" onclick="openModal('gemsModal')">üíé Guide des Gemmes</button>
            <button class="main-button" onclick="openModal('fusionModal')">üîÆ Guide de Fusion</button>
            <button class="main-button" onclick="openModal('simulatorModal')">‚öîÔ∏è Simulateur</button>
            <button class="main-button" onclick="openModal('equipmentModal')">üõ°Ô∏è Guide √âquipements</button>
            <button class="main-button" onclick="openModal('enchantmentsModal')">‚ú® Biblioth√®que Enchantements</button>
            <button class="main-button" onclick="openModal('dungeonsModal')">üè∞ Guide Donjons</button>
        </div>

        <!-- MODAL GUIDE DES GEMMES -->
        <div id="gemsModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üíé Guide des Gemmes Hunt Royal</h2>
                    <span class="close" onclick="closeModal('gemsModal')">&times;</span>
                </div>
                <div class="modal-body">
                    <div class="simulator-section">
                        <h3 class="simulator-header">üíé GEMMES HUNT ROYAL</h3>
                        <div class="gems-grid">
                            <div class="gem-item">
                                <div class="gem-icon">üî¥</div>
                                <div class="gem-name">Rouge</div>
                                <div class="gem-power">Power: 600</div>
                            </div>
                            <div class="gem-item">
                                <div class="gem-icon">üü¢</div>
                                <div class="gem-name">Verte</div>
                                <div class="gem-power">Power: 600</div>
                            </div>
                            <div class="gem-item">
                                <div class="gem-icon">üîµ</div>
                                <div class="gem-name">Bleue</div>
                                <div class="gem-power">Power: 600</div>
                            </div>
                            <div class="gem-item">
                                <div class="gem-icon">üü£</div>
                                <div class="gem-name">Violette</div>
                                <div class="gem-power">Power: 600</div>
                            </div>
                            <div class="gem-item">
                                <div class="gem-icon">‚ö™</div>
                                <div class="gem-name">Blanche</div>
                                <div class="gem-power">Power: 600</div>
                            </div>
                            <div class="gem-item">
                                <div class="gem-icon">üü°</div>
                                <div class="gem-name">Jaune</div>
                                <div class="gem-power">Power: 600</div>
                            </div>
                            <div class="gem-item">
                                <div class="gem-icon">ü©µ</div>
                                <div class="gem-name">Azur</div>
                                <div class="gem-power">Power: 600</div>
                            </div>
                            <div class="gem-item">
                                <div class="gem-icon">üßü</div>
                                <div class="gem-name">Zombie</div>
                                <div class="gem-power">Power: 600</div>
                            </div>
                            <div class="gem-item">
                                <div class="gem-icon">üü´</div>
                                <div class="gem-name">Terre</div>
                                <div class="gem-power">Power: 600</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MODAL SIMULATEUR -->
        <div id="simulatorModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>‚öîÔ∏è Simulateur de Build</h2>
                    <span class="close" onclick="closeModal('simulatorModal')">&times;</span>
                </div>
                <div class="modal-body">
                    <div class="simulator-section">
                        <h3 class="simulator-header">‚öîÔ∏è CONFIGURATION BUILD SIMULATEUR</h3>
                        <p style="text-align: center; margin-bottom: 20px; color: #FFD700;">
                            Cliquez sur une gemme puis sur un slot pour l'√©quiper
                        </p>
                        
                        <!-- Stats du build -->
                        <div class="build-stats">
                            <h4>üìä Statistiques du Build</h4>
                            <div class="stat-row">
                                <span>Puissance Totale:</span>
                                <span class="stat-value" id="totalPower">6 500</span>
                            </div>
                            <div class="stat-row">
                                <span>Gemmes Utilis√©es:</span>
                                <span class="stat-value" id="gemsUsed">0/20</span>
                            </div>
                            <div class="stat-row">
                                <span>Enchantements Actifs:</span>
                                <span class="stat-value" id="enchantmentsActive">0/5</span>
                            </div>
                        </div>

                        <!-- Options avanc√©es -->
                        <div class="advanced-options">
                            <h4>‚öôÔ∏è Options Avanc√©es</h4>
                            <div class="option-row">
                                <label class="toggle-container">
                                    <input type="checkbox" id="rank2Mode" onchange="toggleRank2Mode()">
                                    <span class="toggle-slider"></span>
                                    <span class="toggle-label">Mode Rang 2 (Items R2)</span>
                                </label>
                                <div class="option-info">
                                    <small>Rang 2 = 2 items R1 fusionn√©s pour double effet</small>
                                </div>
                            </div>
                            
                            <div class="auto-equip-section">
                                <h5 style="color: #FFD700; margin: 15px 0 10px 0;">ü§ñ Auto-√âquipement Intelligent</h5>
                                <div class="auto-buttons-grid">
                                    <button class="auto-button" onclick="autoEquipGems('best')" title="√âquipe les meilleures gemmes disponibles">
                                        <span>üíé</span>
                                        <span>Auto Gemmes Max</span>
                                    </button>
                                    <button class="auto-button" onclick="autoEquipGems('balanced')" title="√âquipe un mix √©quilibr√© de gemmes">
                                        <span>‚öñÔ∏è</span>
                                        <span>Auto Gemmes Mix</span>
                                    </button>
                                    <button class="auto-button" onclick="autoEquipEnchantments('dps')" title="√âquipe les meilleurs enchantements DPS">
                                        <span>‚öîÔ∏è</span>
                                        <span>Auto DPS Build</span>
                                    </button>
                                    <button class="auto-button" onclick="autoEquipEnchantments('utility')" title="√âquipe des enchantements utilitaires">
                                        <span>üõ†Ô∏è</span>
                                        <span>Auto Utility Build</span>
                                    </button>
                                    <button class="auto-button" onclick="clearAllEquipment()" title="Vide tous les √©quipements">
                                        <span>üóëÔ∏è</span>
                                        <span>Tout Vider</span>
                                    </button>
                                    <button class="auto-button" onclick="randomBuild()" title="G√©n√®re un build al√©atoire">
                                        <span>üé≤</span>
                                        <span>Build Al√©atoire</span>
                                    </button>
                                </div>
                                
                                <div class="preset-builds">
                                    <h5 style="color: #4ECDC4; margin: 15px 0 10px 0;">üìã Builds Pr√©-configur√©s</h5>
                                    <div class="preset-buttons">
                                        <button class="preset-button" onclick="loadPresetBuild('berserker')" title="Build ax√© d√©g√¢ts maximum">
                                            üî• Berserker
                                        </button>
                                        <button class="preset-button" onclick="loadPresetBuild('tank')" title="Build ax√© survie et r√©sistance">
                                            üõ°Ô∏è Tank
                                        </button>
                                        <button class="preset-button" onclick="loadPresetBuild('speedrun')" title="Build ax√© vitesse et efficacit√©">
                                            üí® Speedrun
                                        </button>
                                        <button class="preset-button" onclick="loadPresetBuild('boss')" title="Build sp√©cialis√© boss de donjon">
                                            üëë Boss Hunter
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SIDEBAR FUTURISTE -->
                        <div class="futuristic-sidebar">
                            <!-- Section Gemmes -->
                            <div class="gem-section">
                                <h4 class="section-title">üíé PIERRES DE POUVOIR</h4>
                                
                                <!-- Gemmes de Base -->
                                <h5 style="color: #4ECDC4; margin: 15px 0 10px 0;">üî∏ Gemmes de Base (600 Power)</h5>
                                <div class="gems-grid">
                                    <div class="gem-item" onclick="selectGem('rouge')">
                                        <div class="gem-icon">üî¥</div>
                                        <div class="gem-name">Rouge</div>
                                        <div class="gem-power">600 Power</div>
                                    </div>
                                    <div class="gem-item" onclick="selectGem('verte')">
                                        <div class="gem-icon">üü¢</div>
                                        <div class="gem-name">Verte</div>
                                        <div class="gem-power">600 Power</div>
                                    </div>
                                    <div class="gem-item" onclick="selectGem('bleue')">
                                        <div class="gem-icon">üîµ</div>
                                        <div class="gem-name">Bleue</div>
                                        <div class="gem-power">600 Power</div>
                                    </div>
                                    <div class="gem-item" onclick="selectGem('violette')">
                                        <div class="gem-icon">üü£</div>
                                        <div class="gem-name">Violette</div>
                                        <div class="gem-power">600 Power</div>
                                    </div>
                                    <div class="gem-item" onclick="selectGem('blanche')">
                                        <div class="gem-icon">‚ö™</div>
                                        <div class="gem-name">Blanche</div>
                                        <div class="gem-power">600 Power</div>
                                    </div>
                                    <div class="gem-item" onclick="selectGem('jaune')">
                                        <div class="gem-icon">üü°</div>
                                        <div class="gem-name">Jaune</div>
                                        <div class="gem-power">600 Power</div>
                                    </div>
                                    <div class="gem-item" onclick="selectGem('azur')">
                                        <div class="gem-icon">ü©µ</div>
                                        <div class="gem-name">Azur</div>
                                        <div class="gem-power">600 Power</div>
                                    </div>
                                    <div class="gem-item" onclick="selectGem('zombie')">
                                        <div class="gem-icon">üßü</div>
                                        <div class="gem-name">Zombie</div>
                                        <div class="gem-power">600 Power</div>
                                    </div>
                                    <div class="gem-item" onclick="selectGem('terre')">
                                        <div class="gem-icon">üü´</div>
                                        <div class="gem-name">Terre</div>
                                        <div class="gem-power">600 Power</div>
                                    </div>
                                </div>

                                <!-- Super Stones -->
                                <h5 style="color: #FF6B6B; margin: 15px 0 10px 0;">‚ú® Super Stones (900 Power)</h5>
                                <div class="gems-grid">
                                    <div class="gem-item" onclick="selectGem('superrouge')">
                                        <div class="gem-icon">üî¥‚ú®</div>
                                        <div class="gem-name">Super Rouge</div>
                                        <div class="gem-power">900 Power</div>
                                    </div>
                                    <div class="gem-item" onclick="selectGem('superverte')">
                                        <div class="gem-icon">üü¢‚ú®</div>
                                        <div class="gem-name">Super Verte</div>
                                        <div class="gem-power">900 Power</div>
                                    </div>
                                    <div class="gem-item" onclick="selectGem('superbleue')">
                                        <div class="gem-icon">üîµ‚ú®</div>
                                        <div class="gem-name">Super Bleue</div>
                                        <div class="gem-power">900 Power</div>
                                    </div>
                                    <div class="gem-item" onclick="selectGem('superviolette')">
                                        <div class="gem-icon">üü£‚ú®</div>
                                        <div class="gem-name">Super Violette</div>
                                        <div class="gem-power">900 Power</div>
                                    </div>
                                    <div class="gem-item" onclick="selectGem('superblanche')">
                                        <div class="gem-icon">‚ö™‚ú®</div>
                                        <div class="gem-name">Super Blanche</div>
                                        <div class="gem-power">900 Power</div>
                                    </div>
                                    <div class="gem-item" onclick="selectGem('superjaune')">
                                        <div class="gem-icon">üü°‚ú®</div>
                                        <div class="gem-name">Super Jaune</div>
                                        <div class="gem-power">900 Power</div>
                                    </div>
                                </div>

                                <!-- M√©ga Stones -->
                                <h5 style="color: #9C27B0; margin: 15px 0 10px 0;">üí´ M√©ga Stones (1350 Power)</h5>
                                <div class="gems-grid">
                                    <div class="gem-item" onclick="selectGem('megarouge')">
                                        <div class="gem-icon">üî¥üí´</div>
                                        <div class="gem-name">M√©ga Rouge</div>
                                        <div class="gem-power">1350 Power</div>
                                    </div>
                                    <div class="gem-item" onclick="selectGem('megaverte')">
                                        <div class="gem-icon">üü¢üí´</div>
                                        <div class="gem-name">M√©ga Verte</div>
                                        <div class="gem-power">1350 Power</div>
                                    </div>
                                    <div class="gem-item" onclick="selectGem('megableue')">
                                        <div class="gem-icon">üîµüí´</div>
                                        <div class="gem-name">M√©ga Bleue</div>
                                        <div class="gem-power">1350 Power</div>
                                    </div>
                                    <div class="gem-item" onclick="selectGem('megaviolette')">
                                        <div class="gem-icon">üü£üí´</div>
                                        <div class="gem-name">M√©ga Violette</div>
                                        <div class="gem-power">1350 Power</div>
                                    </div>
                                    <div class="gem-item" onclick="selectGem('megablanche')">
                                        <div class="gem-icon">‚ö™üí´</div>
                                        <div class="gem-name">M√©ga Blanche</div>
                                        <div class="gem-power">1350 Power</div>
                                    </div>
                                    <div class="gem-item" onclick="selectGem('megajaune')">
                                        <div class="gem-icon">üü°üí´</div>
                                        <div class="gem-name">M√©ga Jaune</div>
                                        <div class="gem-power">1350 Power</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Section Enchantements -->
                            <div class="enchantment-section">
                                <h4 class="section-title">‚ú® ENCHANTEMENTS TITAN</h4>
                                <div class="enchantments-grid">
                                    <div class="enchantment-item" onclick="selectEnchantment('tirmultiple')">
                                        <div class="enchantment-icon">üéØ</div>
                                        <div class="enchantment-name">Tir Multiple</div>
                                        <div class="enchantment-effect">+1/2 projectiles</div>
                                    </div>
                                    <div class="enchantment-item" onclick="selectEnchantment('ricochet')">
                                        <div class="enchantment-icon">üîÑ</div>
                                        <div class="enchantment-name">Ricochet</div>
                                        <div class="enchantment-effect">1/2/3 rebonds</div>
                                    </div>
                                    <div class="enchantment-item" onclick="selectEnchantment('faiblesse')">
                                        <div class="enchantment-icon">üíÄ</div>
                                        <div class="enchantment-name">Faiblesse</div>
                                        <div class="enchantment-effect">20-100% d√©buff</div>
                                    </div>
                                    <div class="enchantment-item" onclick="selectEnchantment('degatsreflechis')">
                                        <div class="enchantment-icon">üõ°Ô∏è</div>
                                        <div class="enchantment-name">D√©g√¢ts R√©fl√©chis</div>
                                        <div class="enchantment-effect">150-750% reflect</div>
                                    </div>
                                    <div class="enchantment-item" onclick="selectEnchantment('ignorerresistance')">
                                        <div class="enchantment-icon">üîì</div>
                                        <div class="enchantment-name">Ignorer R√©sistance</div>
                                        <div class="enchantment-effect">2-12% r√©duction</div>
                                    </div>
                                    <div class="enchantment-item" onclick="selectEnchantment('maladie')">
                                        <div class="enchantment-icon">ü¶†</div>
                                        <div class="enchantment-name">Maladie</div>
                                        <div class="enchantment-effect">1-5% charges</div>
                                    </div>
                                    <div class="enchantment-item" onclick="selectEnchantment('feteamort')">
                                        <div class="enchantment-icon">üíÄ</div>
                                        <div class="enchantment-name">F√™te √† la Mort</div>
                                        <div class="enchantment-effect">+5-25 d√©g√¢ts/kill</div>
                                    </div>
                                    <div class="enchantment-item" onclick="selectEnchantment('fetealavie')">
                                        <div class="enchantment-icon">‚ù§Ô∏è</div>
                                        <div class="enchantment-name">F√™te √† la Vie</div>
                                        <div class="enchantment-effect">+30-150 PV/kill</div>
                                    </div>
                                    <div class="enchantment-item" onclick="selectEnchantment('hpadmg')">
                                        <div class="enchantment-icon">üí™</div>
                                        <div class="enchantment-name">HP √† DMG</div>
                                        <div class="enchantment-effect">5-25% PV actuels</div>
                                    </div>
                                    <div class="enchantment-item" onclick="selectEnchantment('attaquemortel')">
                                        <div class="enchantment-icon">‚ö°</div>
                                        <div class="enchantment-name">Attaque Mortel</div>
                                        <div class="enchantment-effect">10-50% one-shot</div>
                                    </div>
                                    <div class="enchantment-item" onclick="selectEnchantment('distance')">
                                        <div class="enchantment-icon">üèπ</div>
                                        <div class="enchantment-name">Distance</div>
                                        <div class="enchantment-effect">+2-6 port√©e</div>
                                    </div>
                                    <div class="enchantment-item" onclick="selectEnchantment('niveaumax')">
                                        <div class="enchantment-icon">üìà</div>
                                        <div class="enchantment-name">Niveau Max</div>
                                        <div class="enchantment-effect">25-50 niveau max</div>
                                    </div>
                                    <div class="enchantment-item" onclick="selectEnchantment('rage')">
                                        <div class="enchantment-icon">üî•</div>
                                        <div class="enchantment-name">Rage</div>
                                        <div class="enchantment-effect">7.5-37.5% d√©g√¢ts</div>
                                    </div>
                                    <div class="enchantment-item" onclick="selectEnchantment('degatdonjon')">
                                        <div class="enchantment-icon">üè∞</div>
                                        <div class="enchantment-name">D√©g√¢ts Donjon</div>
                                        <div class="enchantment-effect">50-200% boss</div>
                                    </div>
                                    <div class="enchantment-item" onclick="selectEnchantment('serviteur')">
                                        <div class="enchantment-icon">üëª</div>
                                        <div class="enchantment-name">Serviteur</div>
                                        <div class="enchantment-effect">1-3 types minions</div>
                                    </div>
                                    <div class="enchantment-item" onclick="selectEnchantment('avantageunique')">
                                        <div class="enchantment-icon">üé≤</div>
                                        <div class="enchantment-name">Avantages Uniques</div>
                                        <div class="enchantment-effect">15-60% luck</div>
                                    </div>
                                    <div class="enchantment-item" onclick="selectEnchantment('foudre')">
                                        <div class="enchantment-icon">‚ö°</div>
                                        <div class="enchantment-name">Foudre</div>
                                        <div class="enchantment-effect">5-20 coups AoE</div>
                                    </div>
                                    <div class="enchantment-item" onclick="selectEnchantment('hexadecimal')">
                                        <div class="enchantment-icon">üß™</div>
                                        <div class="enchantment-name">Hexad√©cimal</div>
                                        <div class="enchantment-effect">50-250% DoT</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Section √âquipements -->
                            <div class="equipment-section">
                                <h4 class="section-title">üõ°Ô∏è ARMURE TITAN</h4>
                                <div class="equipment-grid">
                                    <div class="equipment-item">
                                        <div class="equipment-header">
                                            <span>ü™ñ</span>
                                            <span>Casque Titan</span>
                                        </div>
                                        <div class="level-controls">
                                            <button class="level-button" onclick="changeLevel('casque', -1)">-</button>
                                            <div class="level-display" id="casque-level">Niveau 10</div>
                                            <button class="level-button" onclick="changeLevel('casque', 1)">+</button>
                                        </div>
                                        <div class="enchantment-slot-container">
                                            <div class="enchantment-label">‚ú® Enchantement:</div>
                                            <div class="enchantment-slot" id="casque-enchantment" onclick="equipEnchantment('casque')">
                                                <span class="enchantment-placeholder">Cliquez pour √©quiper</span>
                                            </div>
                                        </div>
                                        <div class="slots-container" id="casque-slots">
                                            <div class="slot" onclick="equipGem('casque', 0)"></div>
                                            <div class="slot" onclick="equipGem('casque', 1)"></div>
                                            <div class="slot" onclick="equipGem('casque', 2)"></div>
                                            <div class="slot" onclick="equipGem('casque', 3)"></div>
                                        </div>
                                    </div>
                                    <div class="equipment-item">
                                        <div class="equipment-header">
                                            <span>üõ°Ô∏è</span>
                                            <span>Plastron Titan</span>
                                        </div>
                                        <div class="level-controls">
                                            <button class="level-button" onclick="changeLevel('plastron', -1)">-</button>
                                            <div class="level-display" id="plastron-level">Niveau 10</div>
                                            <button class="level-button" onclick="changeLevel('plastron', 1)">+</button>
                                        </div>
                                        <div class="enchantment-slot-container">
                                            <div class="enchantment-label">‚ú® Enchantement:</div>
                                            <div class="enchantment-slot" id="plastron-enchantment" onclick="equipEnchantment('plastron')">
                                                <span class="enchantment-placeholder">Cliquez pour √©quiper</span>
                                            </div>
                                        </div>
                                        <div class="slots-container" id="plastron-slots">
                                            <div class="slot" onclick="equipGem('plastron', 0)"></div>
                                            <div class="slot" onclick="equipGem('plastron', 1)"></div>
                                            <div class="slot" onclick="equipGem('plastron', 2)"></div>
                                            <div class="slot" onclick="equipGem('plastron', 3)"></div>
                                        </div>
                                    </div>
                                    <div class="equipment-item">
                                        <div class="equipment-header">
                                            <span>‚öîÔ∏è</span>
                                            <span>√âp√©e Titan</span>
                                        </div>
                                        <div class="level-controls">
                                            <button class="level-button" onclick="changeLevel('epee', -1)">-</button>
                                            <div class="level-display" id="epee-level">Niveau 10</div>
                                            <button class="level-button" onclick="changeLevel('epee', 1)">+</button>
                                        </div>
                                        <div class="enchantment-slot-container">
                                            <div class="enchantment-label">‚ú® Enchantement:</div>
                                            <div class="enchantment-slot" id="epee-enchantment" onclick="equipEnchantment('epee')">
                                                <span class="enchantment-placeholder">Cliquez pour √©quiper</span>
                                            </div>
                                        </div>
                                        <div class="slots-container" id="epee-slots">
                                            <div class="slot" onclick="equipGem('epee', 0)"></div>
                                            <div class="slot" onclick="equipGem('epee', 1)"></div>
                                            <div class="slot" onclick="equipGem('epee', 2)"></div>
                                            <div class="slot" onclick="equipGem('epee', 3)"></div>
                                        </div>
                                    </div>
                                    <div class="equipment-item">
                                        <div class="equipment-header">
                                            <span>üëü</span>
                                            <span>Bottes Titan</span>
                                        </div>
                                        <div class="level-controls">
                                            <button class="level-button" onclick="changeLevel('bottes', -1)">-</button>
                                            <div class="level-display" id="bottes-level">Niveau 10</div>
                                            <button class="level-button" onclick="changeLevel('bottes', 1)">+</button>
                                        </div>
                                        <div class="enchantment-slot-container">
                                            <div class="enchantment-label">‚ú® Enchantement:</div>
                                            <div class="enchantment-slot" id="bottes-enchantment" onclick="equipEnchantment('bottes')">
                                                <span class="enchantment-placeholder">Cliquez pour √©quiper</span>
                                            </div>
                                        </div>
                                        <div class="slots-container" id="bottes-slots">
                                            <div class="slot" onclick="equipGem('bottes', 0)"></div>
                                            <div class="slot" onclick="equipGem('bottes', 1)"></div>
                                            <div class="slot" onclick="equipGem('bottes', 2)"></div>
                                            <div class="slot" onclick="equipGem('bottes', 3)"></div>
                                        </div>
                                    </div>
                                    <div class="equipment-item">
                                        <div class="equipment-header">
                                            <span>üíç</span>
                                            <span>Anneau Titan</span>
                                        </div>
                                        <div class="level-controls">
                                            <button class="level-button" onclick="changeLevel('anneau', -1)">-</button>
                                            <div class="level-display" id="anneau-level">Niveau 10</div>
                                            <button class="level-button" onclick="changeLevel('anneau', 1)">+</button>
                                        </div>
                                        <div class="enchantment-slot-container">
                                            <div class="enchantment-label">‚ú® Enchantement:</div>
                                            <div class="enchantment-slot" id="anneau-enchantment" onclick="equipEnchantment('anneau')">
                                                <span class="enchantment-placeholder">Cliquez pour √©quiper</span>
                                            </div>
                                        </div>
                                        <div class="slots-container" id="anneau-slots">
                                            <div class="slot" onclick="equipGem('anneau', 0)"></div>
                                            <div class="slot" onclick="equipGem('anneau', 1)"></div>
                                            <div class="slot" onclick="equipGem('anneau', 2)"></div>
                                            <div class="slot" onclick="equipGem('anneau', 3)"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Panel de d√©tails -->
                        <div class="details-panel">
                            <div id="buildDetails">
                                <!-- Les statistiques seront g√©n√©r√©es dynamiquement par JavaScript -->
                                <div class="loading-stats">
                                    <p style="text-align: center; color: #FFD700;">ÔøΩ Calcul des statistiques...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MODAL GUIDE √âQUIPEMENTS -->
        <div id="equipmentModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üõ°Ô∏è Guide des √âquipements</h2>
                    <span class="close" onclick="closeModal('equipmentModal')">&times;</span>
                </div>
                <div class="modal-body">
                    <div class="simulator-section">
                        <h3 class="simulator-header">üõ°Ô∏è √âQUIPEMENTS TITAN</h3>
                        <div class="equipment-grid">
                            <div class="equipment-item">
                                <div class="equipment-header">
                                    <span>ü™ñ</span>
                                    <span>Casque Titan</span>
                                </div>
                                <p>Power: 1300 (+Bonus Titan) - 4 slots</p>
                            </div>
                            <div class="equipment-item">
                                <div class="equipment-header">
                                    <span>üõ°Ô∏è</span>
                                    <span>Plastron Titan</span>
                                </div>
                                <p>Power: 1300 (+Bonus Titan) - 4 slots</p>
                            </div>
                            <div class="equipment-item">
                                <div class="equipment-header">
                                    <span>‚öîÔ∏è</span>
                                    <span>√âp√©e Titan</span>
                                </div>
                                <p>Power: 1300 (+Bonus Titan) - 4 slots</p>
                            </div>
                            <div class="equipment-item">
                                <div class="equipment-header">
                                    <span>üëü</span>
                                    <span>Bottes Titan</span>
                                </div>
                                <p>Power: 1300 (+Bonus Titan) - 4 slots</p>
                            </div>
                            <div class="equipment-item">
                                <div class="equipment-header">
                                    <span>üíç</span>
                                    <span>Anneau Titan</span>
                                </div>
                                <p>Power: 1300 (+Bonus Titan) - 4 slots</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MODAL BIBLIOTH√àQUE ENCHANTEMENTS -->
        <div id="enchantmentsModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>‚ú® Biblioth√®que des Enchantements Titan</h2>
                    <span class="close" onclick="closeModal('enchantmentsModal')">&times;</span>
                </div>
                <div class="modal-body">
                    <div class="simulator-section">
                        <h3 class="simulator-header">‚ú® ENCHANTEMENTS TITAN DISPONIBLES</h3>
                        <p style="text-align: center; margin-bottom: 20px; color: #FFD700;">
                            Tous les items Titan ont obligatoirement 1 enchantement - Tous les enchantements fonctionnent sur tous les √©quipements
                        </p>
                        
                        <!-- Enchantement Ricochet -->
                        <div class="simulator-section">
                            <div class="equipment-header">
                                <span>üîÑ</span>
                                <span>Ricochet</span>
                            </div>
                            <p style="margin-bottom: 15px; color: #CCC;">Les projectiles rebondissent sur des ennemis suppl√©mentaires</p>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span>Rang 1:</span>
                                    <span style="color: #4ECDC4;">1 rebond</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 2:</span>
                                    <span style="color: #FF6B6B;">2 rebonds</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 3-4-5:</span>
                                    <span style="color: #FFD700;">3 rebonds</span>
                                </div>
                            </div>
                        </div>

                        <!-- Enchantement Faiblesse -->
                        <div class="simulator-section">
                            <div class="equipment-header">
                                <span>üíÄ</span>
                                <span>Faiblesse</span>
                            </div>
                            <p style="margin-bottom: 15px; color: #CCC;">Applique faiblesse: +20% d√©g√¢ts inflig√©s & -20% d√©g√¢ts re√ßus</p>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span>Rang 1:</span>
                                    <span style="color: #4ECDC4;">20% pendant 1s</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 2:</span>
                                    <span style="color: #FF6B6B;">40% pendant 2s</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 3:</span>
                                    <span style="color: #FFD700;">60% pendant 3s</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 4:</span>
                                    <span style="color: #9C27B0;">80% pendant 4s</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 5:</span>
                                    <span style="color: #FF4081;">100% pendant 5s</span>
                                </div>
                            </div>
                        </div>

                        <!-- Enchantement D√©g√¢ts R√©fl√©chis -->
                        <div class="simulator-section">
                            <div class="equipment-header">
                                <span>üõ°Ô∏è</span>
                                <span>D√©g√¢ts R√©fl√©chis</span>
                            </div>
                            <p style="margin-bottom: 15px; color: #CCC;">√ätre touch√© refl√®te des d√©g√¢ts sur l'ennemi</p>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span>Rang 1:</span>
                                    <span style="color: #4ECDC4;">150% des d√©g√¢ts</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 2:</span>
                                    <span style="color: #FF6B6B;">300% des d√©g√¢ts</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 3:</span>
                                    <span style="color: #FFD700;">450% des d√©g√¢ts</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 4:</span>
                                    <span style="color: #9C27B0;">600% des d√©g√¢ts</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 5:</span>
                                    <span style="color: #FF4081;">750% des d√©g√¢ts</span>
                                </div>
                            </div>
                        </div>

                        <!-- Enchantement Ignorer R√©sistance -->
                        <div class="simulator-section">
                            <div class="equipment-header">
                                <span>üîì</span>
                                <span>Ignorer R√©sistance</span>
                            </div>
                            <p style="margin-bottom: 15px; color: #CCC;">Cr√©e une aura qui r√©duit les r√©sistances des ennemis √† port√©e</p>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span>Rang 1:</span>
                                    <span style="color: #4ECDC4;">2% de r√©duction</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 2:</span>
                                    <span style="color: #FF6B6B;">4% de r√©duction</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 3:</span>
                                    <span style="color: #FFD700;">6% de r√©duction</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 4:</span>
                                    <span style="color: #9C27B0;">8% de r√©duction</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 5:</span>
                                    <span style="color: #FF4081;">12% de r√©duction</span>
                                </div>
                            </div>
                        </div>

                        <!-- Enchantement Maladie -->
                        <div class="simulator-section">
                            <div class="equipment-header">
                                <span>ü¶†</span>
                                <span>Maladie</span>
                            </div>
                            <p style="margin-bottom: 15px; color: #CCC;">Applique des charges maladie en cas de coup, augmente les d√©g√¢ts √† la cible</p>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span>Rang 1:</span>
                                    <span style="color: #4ECDC4;">1% charges, +1% d√©g√¢ts</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 2:</span>
                                    <span style="color: #FF6B6B;">2% charges, +2% d√©g√¢ts</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 3:</span>
                                    <span style="color: #FFD700;">3% charges, +3% d√©g√¢ts</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 4:</span>
                                    <span style="color: #9C27B0;">4% charges, +4% d√©g√¢ts</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 5:</span>
                                    <span style="color: #FF4081;">5% charges, +5% d√©g√¢ts</span>
                                </div>
                            </div>
                        </div>

                        <!-- Enchantement F√™te √† la Mort -->
                        <div class="simulator-section">
                            <div class="equipment-header">
                                <span>üíÄ</span>
                                <span>F√™te √† la Mort</span>
                            </div>
                            <p style="margin-bottom: 15px; color: #CCC;">Chaque ennemi tu√© augmente les d√©g√¢ts de base</p>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span>Rang 1:</span>
                                    <span style="color: #4ECDC4;">+5 d√©g√¢ts par kill</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 2:</span>
                                    <span style="color: #FF6B6B;">+10 d√©g√¢ts par kill</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 3:</span>
                                    <span style="color: #FFD700;">+15 d√©g√¢ts par kill</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 4:</span>
                                    <span style="color: #9C27B0;">+20 d√©g√¢ts par kill</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 5:</span>
                                    <span style="color: #FF4081;">+25 d√©g√¢ts par kill</span>
                                </div>
                            </div>
                        </div>

                        <!-- Enchantement F√™te √† la Vie -->
                        <div class="simulator-section">
                            <div class="equipment-header">
                                <span>‚ù§Ô∏è</span>
                                <span>F√™te √† la Vie</span>
                            </div>
                            <p style="margin-bottom: 15px; color: #CCC;">Chaque ennemi tu√© augmente les PV de base</p>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span>Rang 1:</span>
                                    <span style="color: #4ECDC4;">+30 PV par kill</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 2:</span>
                                    <span style="color: #FF6B6B;">+60 PV par kill</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 3:</span>
                                    <span style="color: #FFD700;">+90 PV par kill</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 4:</span>
                                    <span style="color: #9C27B0;">+120 PV par kill</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 5:</span>
                                    <span style="color: #FF4081;">+150 PV par kill</span>
                                </div>
                            </div>
                        </div>

                        <!-- Enchantement HP √† DMG -->
                        <div class="simulator-section">
                            <div class="equipment-header">
                                <span>üí™</span>
                                <span>HP √† DMG</span>
                            </div>
                            <p style="margin-bottom: 15px; color: #CCC;">Augmente les d√©g√¢ts selon un % des PV actuels</p>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span>Rang 1:</span>
                                    <span style="color: #4ECDC4;">5% des PV actuels</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 2:</span>
                                    <span style="color: #FF6B6B;">10% des PV actuels</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 3:</span>
                                    <span style="color: #FFD700;">15% des PV actuels</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 4:</span>
                                    <span style="color: #9C27B0;">20% des PV actuels</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 5:</span>
                                    <span style="color: #FF4081;">25% des PV actuels</span>
                                </div>
                            </div>
                        </div>

                        <!-- Enchantement Attaque Mortel -->
                        <div class="simulator-section">
                            <div class="equipment-header">
                                <span>‚ö°</span>
                                <span>Attaque Mortel</span>
                            </div>
                            <p style="margin-bottom: 15px; color: #CCC;">Donne une chance de tuer l'ennemi en un coup</p>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span>Rang 1:</span>
                                    <span style="color: #4ECDC4;">10% chance</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 2:</span>
                                    <span style="color: #FF6B6B;">20% chance</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 3:</span>
                                    <span style="color: #FFD700;">30% chance</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 4:</span>
                                    <span style="color: #9C27B0;">40% chance</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 5:</span>
                                    <span style="color: #FF4081;">50% chance</span>
                                </div>
                            </div>
                        </div>

                        <!-- Enchantement Distance -->
                        <div class="simulator-section">
                            <div class="equipment-header">
                                <span>üèπ</span>
                                <span>Distance</span>
                            </div>
                            <p style="margin-bottom: 15px; color: #CCC;">Augmente la port√©e d'attaque du chasseur</p>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span>Rang 1:</span>
                                    <span style="color: #4ECDC4;">+2 port√©e</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 2:</span>
                                    <span style="color: #FF6B6B;">+4 port√©e</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 3-4-5:</span>
                                    <span style="color: #FFD700;">+6 port√©e</span>
                                </div>
                            </div>
                        </div>

                        <!-- Enchantement Niveau Max -->
                        <div class="simulator-section">
                            <div class="equipment-header">
                                <span>üìà</span>
                                <span>Niveau Max</span>
                            </div>
                            <p style="margin-bottom: 15px; color: #CCC;">Permet de d√©passer le niveau 20 et augmente l'exp par rang</p>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span>Rang 1:</span>
                                    <span style="color: #4ECDC4;">Niveau 25, +25% exp</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 2:</span>
                                    <span style="color: #FF6B6B;">Niveau 30, +50% exp</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 3:</span>
                                    <span style="color: #FFD700;">Niveau 35, +75% exp</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 4:</span>
                                    <span style="color: #9C27B0;">Niveau 40, +100% exp</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 5:</span>
                                    <span style="color: #FF4081;">Niveau 50, +100% exp</span>
                                </div>
                            </div>
                        </div>

                        <!-- Enchantement Rage -->
                        <div class="simulator-section">
                            <div class="equipment-header">
                                <span>üî•</span>
                                <span>Rage</span>
                            </div>
                            <p style="margin-bottom: 15px; color: #CCC;">Augmente les d√©g√¢ts pour chaque 10% de hp manquant, r√©duit les PV par seconde</p>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span>Rang 1:</span>
                                    <span style="color: #4ECDC4;">+7.5% d√©g√¢ts, -4% PV/s, plafond 80%</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 2:</span>
                                    <span style="color: #FF6B6B;">+15% d√©g√¢ts, -8% PV/s, plafond 60%</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 3:</span>
                                    <span style="color: #FFD700;">+22.5% d√©g√¢ts, -12% PV/s, plafond 40%</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 4:</span>
                                    <span style="color: #9C27B0;">+30% d√©g√¢ts, -12% PV/s, plafond 20%</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 5:</span>
                                    <span style="color: #FF4081;">+37.5% d√©g√¢ts, -12% PV/s, plafond 9%</span>
                                </div>
                            </div>
                        </div>

                        <!-- Enchantement D√©g√¢ts au Donjon -->
                        <div class="simulator-section">
                            <div class="equipment-header">
                                <span>üè∞</span>
                                <span>D√©g√¢ts au Donjon</span>
                            </div>
                            <p style="margin-bottom: 15px; color: #CCC;">Augmente les d√©g√¢ts contre les ennemis de donjon (Dragon/Kraken/Yeti/Maze/Abyssal/Chaos)</p>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span>Rang 1:</span>
                                    <span style="color: #4ECDC4;">+50% d√©g√¢ts donjon</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 2:</span>
                                    <span style="color: #FF6B6B;">+100% d√©g√¢ts donjon</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 3:</span>
                                    <span style="color: #FFD700;">+150% d√©g√¢ts donjon</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 4-5:</span>
                                    <span style="color: #9C27B0;">+200% d√©g√¢ts donjon</span>
                                </div>
                            </div>
                        </div>

                        <!-- Enchantement Serviteur -->
                        <div class="simulator-section">
                            <div class="equipment-header">
                                <span>üëª</span>
                                <span>Serviteur</span>
                            </div>
                            <p style="margin-bottom: 15px; color: #CCC;">Invoque un serviteur √† chaque kill avec d√©g√¢ts et dur√©e variables</p>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span>Rang 1:</span>
                                    <span style="color: #4ECDC4;">1 type, 80% d√©g√¢ts, 10s, max 4</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 2:</span>
                                    <span style="color: #FF6B6B;">2 types, 125% d√©g√¢ts, 14s, max 8</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 3-4-5:</span>
                                    <span style="color: #FFD700;">3 types, 175% d√©g√¢ts, 18s, max 12</span>
                                </div>
                            </div>
                        </div>

                        <!-- Enchantement Avantages Uniques -->
                        <div class="simulator-section">
                            <div class="equipment-header">
                                <span>üé≤</span>
                                <span>Avantages Uniques</span>
                            </div>
                            <p style="margin-bottom: 15px; color: #CCC;">Augmente les chances de recevoir les avantages uniques d'un chasseur</p>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span>Rang 1:</span>
                                    <span style="color: #4ECDC4;">+15% chance</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 2:</span>
                                    <span style="color: #FF6B6B;">+30% chance</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 3:</span>
                                    <span style="color: #FFD700;">+45% chance</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 4-5:</span>
                                    <span style="color: #9C27B0;">+60% chance</span>
                                </div>
                            </div>
                        </div>

                        <!-- Enchantement Foudre -->
                        <div class="simulator-section">
                            <div class="equipment-header">
                                <span>‚ö°</span>
                                <span>Foudre</span>
                            </div>
                            <p style="margin-bottom: 15px; color: #CCC;">Tous les X coups infligent des d√©g√¢ts de zone</p>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span>Rang 1:</span>
                                    <span style="color: #4ECDC4;">Tous les 20 coups, 100% d√©g√¢ts AoE</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 2:</span>
                                    <span style="color: #FF6B6B;">Tous les 15 coups, 200% d√©g√¢ts AoE</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 3:</span>
                                    <span style="color: #FFD700;">Tous les 10 coups, 300% d√©g√¢ts AoE</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 4-5:</span>
                                    <span style="color: #9C27B0;">Tous les 5 coups, 400% d√©g√¢ts AoE</span>
                                </div>
                            </div>
                        </div>

                        <!-- Enchantement Hexad√©cimal -->
                        <div class="simulator-section">
                            <div class="equipment-header">
                                <span>üß™</span>
                                <span>Hexad√©cimal</span>
                            </div>
                            <p style="margin-bottom: 15px; color: #CCC;">Augmente les d√©g√¢ts de poison/br√ªlure/terre/explosion nova subis par l'ennemi</p>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span>Rang 1:</span>
                                    <span style="color: #4ECDC4;">+50% DoT pendant 4s</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 2:</span>
                                    <span style="color: #FF6B6B;">+100% DoT pendant 5s</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 3:</span>
                                    <span style="color: #FFD700;">+150% DoT pendant 6s</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 4:</span>
                                    <span style="color: #9C27B0;">+200% DoT pendant 7s</span>
                                </div>
                                <div class="stat-item">
                                    <span>Rang 5:</span>
                                    <span style="color: #FF4081;">+250% DoT pendant 8s</span>
                                </div>
                            </div>
                        </div>

                        <!-- Syst√®me de Rangs -->
                        <div class="simulator-section">
                            <h4 style="color: #FFD700; margin-bottom: 15px;">üìä SYST√àME DE RANGS</h4>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span>Cumul d'√©quipements:</span>
                                    <span style="color: #4ECDC4;">M√™me enchantement = rang +</span>
                                </div>
                                <div class="stat-item">
                                    <span>Bonus Titan lvl 10:</span>
                                    <span style="color: #FFD700;">Boost automatique du rang</span>
                                </div>
                                <div class="stat-item">
                                    <span>Polyvalence:</span>
                                    <span style="color: #FF6B6B;">Tous enchantements sur tous √©quipements</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== FONCTIONS PRINCIPALES =====
        
        function openModal(modalId) {
            console.log("üöÄ openModal appel√©e avec ID:", modalId);
            
            const modal = document.getElementById(modalId);
            if (!modal) {
                console.error("‚ùå ERREUR: Modal introuvable pour ID:", modalId);
                return;
            }
            
            modal.style.display = 'block';
            console.log("‚úÖ Modal ouverte:", modalId);
        }

        function closeModal(modalId) {
            console.log("üîí closeModal appel√©e avec ID:", modalId);
            
            const modal = document.getElementById(modalId);
            if (!modal) {
                console.error("‚ùå ERREUR: Modal introuvable pour ID:", modalId);
                return;
            }
            
            modal.style.display = 'none';
            console.log("‚úÖ Modal ferm√©e:", modalId);
        }

        // Variables globales
        let selectedGem = null;
        let selectedEnchantment = null;
        let rank2Mode = false;
        let lastClickTime = 0;
        let lastClickedGem = null;
        let lastClickedEnchantment = null;
        let buildSlots = {
            casque: [null, null, null, null],
            plastron: [null, null, null, null],
            epee: [null, null, null, null],
            bottes: [null, null, null, null],
            anneau: [null, null, null, null]
        };

        // Niveaux d'√©quipement (1-10, niveau 10 = Titan)
        let itemLevels = {
            casque: 10,
            plastron: 10,
            epee: 10,
            bottes: 10,
            anneau: 10
        };

        // Donn√©es compl√®tes des gemmes Hunt Royal
        const gemsData = {
            // Gemmes de base (600 power chacune) - 9 gemmes au total
            rouge: { 
                icon: 'üî¥', 
                name: 'Rouge', 
                power: 600, 
                type: 'base',
                effects: {
                    armor: { name: 'Esquive', value: 12, unit: '%' },
                    weapon: { name: 'Br√ªlure', value: 250, unit: '%' }
                }
            },
            verte: { 
                icon: 'üü¢', 
                name: 'Verte', 
                power: 600, 
                type: 'base',
                effects: {
                    armor: { name: 'PV+', value: 150, unit: '' },
                    weapon: { name: 'Poison', value: 100, unit: '%' }
                }
            },
            bleue: { 
                icon: 'üîµ', 
                name: 'Bleue', 
                power: 600, 
                type: 'base',
                effects: {
                    armor: { name: 'D√©g√¢t R√©duit', value: 11, unit: '%' },
                    weapon: { name: 'Chance Tentacules', value: 90, unit: '%' }
                }
            },
            violette: { 
                icon: 'üü£', 
                name: 'Violette', 
                power: 600, 
                type: 'base',
                effects: {
                    armor: { name: 'Vitesse Mouvement', value: 25, unit: '%' },
                    weapon: { name: 'Charge Explosive', value: 200, unit: '%' }
                }
            },
            blanche: { 
                icon: '‚ö™', 
                name: 'Blanche', 
                power: 600, 
                type: 'base',
                effects: {
                    armor: { name: 'R√©sistance', value: 15, unit: '%' },
                    weapon: { name: 'D√©g√¢t Critique', value: 180, unit: '%' }
                }
            },
            jaune: { 
                icon: 'üü°', 
                name: 'Jaune', 
                power: 600, 
                type: 'base',
                effects: {
                    armor: { name: 'Vitesse Attaque', value: 20, unit: '%' },
                    weapon: { name: 'Chance Double Hit', value: 35, unit: '%' }
                }
            },
            azur: { 
                icon: 'ü©µ', 
                name: 'Azur', 
                power: 600, 
                type: 'base',
                effects: {
                    armor: { name: 'Regen Mana', value: 8, unit: '/s' },
                    weapon: { name: 'Drain Mana', value: 15, unit: '%' }
                }
            },
            zombie: { 
                icon: 'üßü', 
                name: 'Zombie', 
                power: 600, 
                type: 'base',
                effects: {
                    armor: { name: 'Drain PV', value: 10, unit: '%' },
                    weapon: { name: 'N√©crose', value: 120, unit: '%' }
                }
            },
            terre: { 
                icon: 'üü´', 
                name: 'Terre', 
                power: 600, 
                type: 'base',
                effects: {
                    armor: { name: 'Armure Naturelle', value: 18, unit: '%' },
                    weapon: { name: 'Tremblement', value: 160, unit: '%' }
                }
            },
            
            // Super Stones (800 power) - Fusion de 2 gemmes niveau 7
            superrouge: { icon: 'üî¥‚ú®', name: 'Super Rouge', power: 800, type: 'super' },
            superverte: { icon: 'üü¢‚ú®', name: 'Super Verte', power: 800, type: 'super' },
            superbleue: { icon: 'üîµ‚ú®', name: 'Super Bleue', power: 800, type: 'super' },
            superviolette: { icon: 'üü£‚ú®', name: 'Super Violette', power: 800, type: 'super' },
            superblanche: { icon: '‚ö™‚ú®', name: 'Super Blanche', power: 800, type: 'super' },
            superjaune: { icon: 'üü°‚ú®', name: 'Super Jaune', power: 800, type: 'super' },
            
            // M√©ga Stones (1000 power) - Super + 1 gemme niveau 7
            megarouge: { icon: 'üî¥üí´', name: 'M√©ga Rouge', power: 1000, type: 'mega' },
            megaverte: { icon: 'üü¢üí´', name: 'M√©ga Verte', power: 1000, type: 'mega' },
            megableue: { icon: 'üîµüí´', name: 'M√©ga Bleue', power: 1000, type: 'mega' },
            megaviolette: { icon: 'üü£üí´', name: 'M√©ga Violette', power: 1000, type: 'mega' },
            megablanche: { icon: '‚ö™üí´', name: 'M√©ga Blanche', power: 1000, type: 'mega' },
            megajaune: { icon: 'üü°üí´', name: 'M√©ga Jaune', power: 1000, type: 'mega' }
        };

        // Donn√©es de fusion des gemmes
        const fusionData = {
            // Super Stones - Combinations de 2 gemmes (principale 100% + secondaire 50%)
            super: {
                'rouge_bleue': {
                    result: 'superrouge',
                    armor: { name: 'Esquive + D√©g√¢t R√©duit', value: '12% + 5.5%' },
                    weapon: { name: 'Br√ªlure + Tentacules', value: '250% + 45%' }
                },
                'rouge_verte': {
                    result: 'superrouge', 
                    armor: { name: 'Esquive + PV', value: '12% + 75' },
                    weapon: { name: 'Br√ªlure + Poison', value: '250% + 50%' }
                },
                'rouge_violette': {
                    result: 'superrouge',
                    armor: { name: 'Esquive + Vitesse', value: '12% + 12.5%' },
                    weapon: { name: 'Br√ªlure + Explosif', value: '250% + 100%' }
                },
                'rouge_blanche': {
                    result: 'superrouge',
                    armor: { name: 'Esquive + R√©sistance', value: '12% + 7.5%' },
                    weapon: { name: 'Br√ªlure + Critique', value: '250% + 90%' }
                },
                'rouge_jaune': {
                    result: 'superrouge',
                    armor: { name: 'Esquive + Vitesse Attaque', value: '12% + 10%' },
                    weapon: { name: 'Br√ªlure + Double Hit', value: '250% + 17.5%' }
                },
                'bleue_verte': {
                    result: 'superbleue',
                    armor: { name: 'D√©g√¢t R√©duit + PV', value: '11% + 75' },
                    weapon: { name: 'Tentacules + Poison', value: '90% + 50%' }
                },
                'bleue_violette': {
                    result: 'superbleue',
                    armor: { name: 'D√©g√¢t R√©duit + Vitesse', value: '11% + 12.5%' },
                    weapon: { name: 'Tentacules + Explosif', value: '90% + 100%' }
                },
                'verte_violette': {
                    result: 'superverte',
                    armor: { name: 'PV + Vitesse', value: '150 + 12.5%' },
                    weapon: { name: 'Poison + Explosif', value: '100% + 100%' }
                },
                'verte_blanche': {
                    result: 'superverte',
                    armor: { name: 'PV + R√©sistance', value: '150 + 7.5%' },
                    weapon: { name: 'Poison + Critique', value: '100% + 90%' }
                }
            },
            
            // M√©ga Stones - Super + gemme tertiaire
            mega: {
                'superrouge_verte': {
                    result: 'megarouge',
                    armor: { name: 'Esquive + D√©g√¢t R√©duit + PV', value: '12% + 5.5% + 150' },
                    weapon: { name: 'Br√ªlure + Tentacules + Poison', value: '250% + 45% + 100%' }
                },
                'superrouge_violette': {
                    result: 'megarouge',
                    armor: { name: 'Esquive + PV + Vitesse', value: '12% + 75 + 25%' },
                    weapon: { name: 'Br√ªlure + Poison + Explosif', value: '250% + 50% + 200%' }
                },
                'superbleue_rouge': {
                    result: 'megableue',
                    armor: { name: 'D√©g√¢t R√©duit + PV + Esquive', value: '11% + 75 + 12%' },
                    weapon: { name: 'Tentacules + Poison + Br√ªlure', value: '90% + 50% + 250%' }
                },
                'superbleue_verte': {
                    result: 'megableue',
                    armor: { name: 'D√©g√¢t R√©duit + Vitesse + PV', value: '11% + 12.5% + 150' },
                    weapon: { name: 'Tentacules + Explosif + Poison', value: '90% + 100% + 100%' }
                },
                'superverte_rouge': {
                    result: 'megaverte',
                    armor: { name: 'PV + Vitesse + Esquive', value: '150 + 12.5% + 12%' },
                    weapon: { name: 'Poison + Explosif + Br√ªlure', value: '100% + 100% + 250%' }
                }
            }
        };

        // Donn√©es des enchantements Titan
        const enchantmentsData = {
            tirmultiple: {
                icon: 'üéØ',
                name: 'Tir Multiple',
                description: 'Augmente le nombre de projectiles',
                effects: {
                    1: { projectiles: 1, desc: '+1 projectile' },
                    2: { projectiles: 1, desc: '+1 projectile' },
                    3: { projectiles: 2, desc: '+2 projectiles' },
                    4: { projectiles: 2, desc: '+2 projectiles' },
                    5: { projectiles: 2, desc: '+2 projectiles' }
                }
            },
            ricochet: {
                icon: 'üîÑ',
                name: 'Ricochet',
                description: 'Les projectiles rebondissent sur des ennemis suppl√©mentaires',
                effects: {
                    1: { rebounds: 1, desc: '1 rebond' },
                    2: { rebounds: 2, desc: '2 rebonds' },
                    3: { rebounds: 3, desc: '3 rebonds' },
                    4: { rebounds: 3, desc: '3 rebonds' },
                    5: { rebounds: 3, desc: '3 rebonds' }
                }
            },
            faiblesse: {
                icon: 'üíÄ',
                name: 'Faiblesse',
                description: 'Applique faiblesse: +20% d√©g√¢ts inflig√©s & -20% d√©g√¢ts re√ßus',
                effects: {
                    1: { bonus: 20, duration: 1, desc: '20% pendant 1s' },
                    2: { bonus: 40, duration: 2, desc: '40% pendant 2s' },
                    3: { bonus: 60, duration: 3, desc: '60% pendant 3s' },
                    4: { bonus: 80, duration: 4, desc: '80% pendant 4s' },
                    5: { bonus: 100, duration: 5, desc: '100% pendant 5s' }
                }
            },
            degatsreflechis: {
                icon: 'üõ°Ô∏è',
                name: 'D√©g√¢ts R√©fl√©chis',
                description: '√ätre touch√© refl√®te des d√©g√¢ts sur l\'ennemi',
                effects: {
                    1: { reflect: 150, desc: '150% des d√©g√¢ts' },
                    2: { reflect: 300, desc: '300% des d√©g√¢ts' },
                    3: { reflect: 450, desc: '450% des d√©g√¢ts' },
                    4: { reflect: 600, desc: '600% des d√©g√¢ts' },
                    5: { reflect: 750, desc: '750% des d√©g√¢ts' }
                }
            },
            ignorerresistance: {
                icon: 'üîì',
                name: 'Ignorer R√©sistance',
                description: 'Cr√©e une aura qui r√©duit les r√©sistances des ennemis √† port√©e',
                effects: {
                    1: { reduction: 2, desc: '2% de r√©duction' },
                    2: { reduction: 4, desc: '4% de r√©duction' },
                    3: { reduction: 6, desc: '6% de r√©duction' },
                    4: { reduction: 8, desc: '8% de r√©duction' },
                    5: { reduction: 12, desc: '12% de r√©duction' }
                }
            },
            maladie: {
                icon: 'ü¶†',
                name: 'Maladie',
                description: 'Applique des charges maladie en cas de coup, augmente les d√©g√¢ts √† la cible',
                effects: {
                    1: { charges: 1, damage: 1, desc: '1% charges, +1% d√©g√¢ts' },
                    2: { charges: 2, damage: 2, desc: '2% charges, +2% d√©g√¢ts' },
                    3: { charges: 3, damage: 3, desc: '3% charges, +3% d√©g√¢ts' },
                    4: { charges: 4, damage: 4, desc: '4% charges, +4% d√©g√¢ts' },
                    5: { charges: 5, damage: 5, desc: '5% charges, +5% d√©g√¢ts' }
                }
            },
            feteamort: {
                icon: 'üíÄ',
                name: 'F√™te √† la Mort',
                description: 'Chaque ennemi tu√© augmente les d√©g√¢ts de base',
                effects: {
                    1: { damage: 5, desc: '+5 d√©g√¢ts par kill' },
                    2: { damage: 10, desc: '+10 d√©g√¢ts par kill' },
                    3: { damage: 15, desc: '+15 d√©g√¢ts par kill' },
                    4: { damage: 20, desc: '+20 d√©g√¢ts par kill' },
                    5: { damage: 25, desc: '+25 d√©g√¢ts par kill' }
                }
            },
            fetealavie: {
                icon: '‚ù§Ô∏è',
                name: 'F√™te √† la Vie',
                description: 'Chaque ennemi tu√© augmente les PV de base',
                effects: {
                    1: { health: 30, desc: '+30 PV par kill' },
                    2: { health: 60, desc: '+60 PV par kill' },
                    3: { health: 90, desc: '+90 PV par kill' },
                    4: { health: 120, desc: '+120 PV par kill' },
                    5: { health: 150, desc: '+150 PV par kill' }
                }
            },
            hpadmg: {
                icon: 'üí™',
                name: 'HP √† DMG',
                description: 'Augmente les d√©g√¢ts selon un % des PV actuels',
                effects: {
                    1: { percent: 5, desc: '5% des PV actuels en d√©g√¢ts' },
                    2: { percent: 10, desc: '10% des PV actuels en d√©g√¢ts' },
                    3: { percent: 15, desc: '15% des PV actuels en d√©g√¢ts' },
                    4: { percent: 20, desc: '20% des PV actuels en d√©g√¢ts' },
                    5: { percent: 25, desc: '25% des PV actuels en d√©g√¢ts' }
                }
            },
            attaquemortel: {
                icon: '‚ö°',
                name: 'Attaque Mortel',
                description: 'Donne une chance de tuer l\'ennemi en un coup',
                effects: {
                    1: { chance: 10, desc: '10% chance' },
                    2: { chance: 20, desc: '20% chance' },
                    3: { chance: 30, desc: '30% chance' },
                    4: { chance: 40, desc: '40% chance' },
                    5: { chance: 50, desc: '50% chance' }
                }
            },
            distance: {
                icon: 'üèπ',
                name: 'Distance',
                description: 'Augmente la port√©e d\'attaque du chasseur',
                effects: {
                    1: { range: 2, desc: '+2 port√©e' },
                    2: { range: 4, desc: '+4 port√©e' },
                    3: { range: 6, desc: '+6 port√©e' },
                    4: { range: 6, desc: '+6 port√©e' },
                    5: { range: 6, desc: '+6 port√©e' }
                }
            },
            niveaumax: {
                icon: 'üìà',
                name: 'Niveau Max',
                description: 'Permet de d√©passer le niveau 20 et augmente l\'exp par rang',
                effects: {
                    1: { level: 25, exp: 25, desc: 'Niveau 25, +25% exp' },
                    2: { level: 30, exp: 50, desc: 'Niveau 30, +50% exp' },
                    3: { level: 35, exp: 75, desc: 'Niveau 35, +75% exp' },
                    4: { level: 40, exp: 100, desc: 'Niveau 40, +100% exp' },
                    5: { level: 50, exp: 100, desc: 'Niveau 50, +100% exp' }
                }
            },
            rage: {
                icon: 'üî•',
                name: 'Rage',
                description: 'Augmente les d√©g√¢ts pour chaque 10% de hp manquant, r√©duit les PV par seconde',
                effects: {
                    1: { damage: 7.5, hp_loss: 4, hp_cap: 80, desc: '+7.5% d√©g√¢ts, -4% PV/s, plafond 80%' },
                    2: { damage: 15, hp_loss: 8, hp_cap: 60, desc: '+15% d√©g√¢ts, -8% PV/s, plafond 60%' },
                    3: { damage: 22.5, hp_loss: 12, hp_cap: 40, desc: '+22.5% d√©g√¢ts, -12% PV/s, plafond 40%' },
                    4: { damage: 30, hp_loss: 12, hp_cap: 20, desc: '+30% d√©g√¢ts, -12% PV/s, plafond 20%' },
                    5: { damage: 37.5, hp_loss: 12, hp_cap: 9, desc: '+37.5% d√©g√¢ts, -12% PV/s, plafond 9%' }
                }
            },
            degatdonjon: {
                icon: 'üè∞',
                name: 'D√©g√¢ts au Donjon',
                description: 'Augmente les d√©g√¢ts contre les ennemis de donjon (Dragon/Kraken/Yeti/Maze/Abyssal/Chaos)',
                effects: {
                    1: { damage: 50, desc: '+50% d√©g√¢ts donjon' },
                    2: { damage: 100, desc: '+100% d√©g√¢ts donjon' },
                    3: { damage: 150, desc: '+150% d√©g√¢ts donjon' },
                    4: { damage: 200, desc: '+200% d√©g√¢ts donjon' },
                    5: { damage: 200, desc: '+200% d√©g√¢ts donjon' }
                }
            },
            serviteur: {
                icon: 'üëª',
                name: 'Serviteur',
                description: 'Invoque un serviteur √† chaque kill avec d√©g√¢ts et dur√©e variables',
                effects: {
                    1: { types: 1, damage: 80, duration: 10, max: 4, desc: '1 type, 80% d√©g√¢ts, 10s, max 4' },
                    2: { types: 2, damage: 125, duration: 14, max: 8, desc: '2 types, 125% d√©g√¢ts, 14s, max 8' },
                    3: { types: 3, damage: 175, duration: 18, max: 12, desc: '3 types, 175% d√©g√¢ts, 18s, max 12' },
                    4: { types: 3, damage: 175, duration: 18, max: 12, desc: '3 types, 175% d√©g√¢ts, 18s, max 12' },
                    5: { types: 3, damage: 175, duration: 18, max: 12, desc: '3 types, 175% d√©g√¢ts, 18s, max 12' }
                }
            },
            avantageunique: {
                icon: 'üé≤',
                name: 'Avantages Uniques',
                description: 'Augmente les chances de recevoir les avantages uniques d\'un chasseur',
                effects: {
                    1: { chance: 15, desc: '+15% chance' },
                    2: { chance: 30, desc: '+30% chance' },
                    3: { chance: 45, desc: '+45% chance' },
                    4: { chance: 60, desc: '+60% chance' },
                    5: { chance: 60, desc: '+60% chance' }
                }
            },
            foudre: {
                icon: '‚ö°',
                name: 'Foudre',
                description: 'Tous les X coups infligent des d√©g√¢ts de zone',
                effects: {
                    1: { hits: 20, damage: 100, desc: 'Tous les 20 coups, 100% d√©g√¢ts AoE' },
                    2: { hits: 15, damage: 200, desc: 'Tous les 15 coups, 200% d√©g√¢ts AoE' },
                    3: { hits: 10, damage: 300, desc: 'Tous les 10 coups, 300% d√©g√¢ts AoE' },
                    4: { hits: 5, damage: 400, desc: 'Tous les 5 coups, 400% d√©g√¢ts AoE' },
                    5: { hits: 5, damage: 400, desc: 'Tous les 5 coups, 400% d√©g√¢ts AoE' }
                }
            },
            hexadecimal: {
                icon: 'üß™',
                name: 'Hexad√©cimal',
                description: 'Augmente les d√©g√¢ts de poison/br√ªlure/terre/explosion nova subis par l\'ennemi',
                effects: {
                    1: { damage: 50, duration: 4, desc: '+50% DoT pendant 4s' },
                    2: { damage: 100, duration: 5, desc: '+100% DoT pendant 5s' },
                    3: { damage: 150, duration: 6, desc: '+150% DoT pendant 6s' },
                    4: { damage: 200, duration: 7, desc: '+200% DoT pendant 7s' },
                    5: { damage: 250, duration: 8, desc: '+250% DoT pendant 8s' }
                }
            }
        };

        // Enchantements √©quip√©s sur chaque item
        let itemEnchantments = {
            casque: null,
            plastron: null,
            epee: null,
            bottes: null,
            anneau: null
        };

        function selectGem(gemType) {
            const currentTime = Date.now();
            const isDoubleClick = (currentTime - lastClickTime < 500) && (lastClickedGem === gemType);
            const isAlreadySelected = (selectedGem === gemType);
            
            if (isAlreadySelected && !isDoubleClick) {
                // Clic sur une gemme d√©j√† s√©lectionn√©e = d√©selection
                console.log("üíé D√©selection de la gemme:", gemType);
                selectedGem = null;
                document.querySelectorAll('.gem-item').forEach(item => {
                    item.classList.remove('selected');
                });
                showNotification(`üíé ${gemsData[gemType].name} d√©s√©lectionn√©e`, 'info');
                return;
            }
            
            console.log("üíé Gemme s√©lectionn√©e:", gemType, isDoubleClick ? "(double-clic - mode persistant)" : "(simple clic)");
            
            if (isDoubleClick) {
                // Double-clic : activer le mode persistant (la gemme reste s√©lectionn√©e)
                console.log("üîí Mode persistant activ√© - La gemme reste s√©lectionn√©e pour placements multiples");
                showNotification(`üíé ${gemsData[gemType].name} - Mode persistant activ√©`, 'info');
                // Ne pas d√©selectionner la gemme, elle reste active
            } else {
                // Simple clic : s√©lectionner normalement
                document.querySelectorAll('.gem-item').forEach(item => {
                    item.classList.remove('selected');
                });
                
                event.target.closest('.gem-item').classList.add('selected');
                selectedGem = gemType;
            }
            
            lastClickTime = currentTime;
            lastClickedGem = gemType;
        }

        function equipGem(equipmentType, slotIndex) {
            if (!selectedGem) {
                alert("Veuillez d'abord s√©lectionner une gemme !");
                return;
            }

            console.log(`‚ö° √âquipement gemme ${selectedGem} sur ${equipmentType} slot ${slotIndex}`);
            
            // √âquiper la gemme
            buildSlots[equipmentType][slotIndex] = selectedGem;
            
            // Mettre √† jour l'affichage du slot
            const slot = event.target;
            slot.classList.add('filled');
            slot.innerHTML = gemsData[selectedGem].icon;
            
            // Mettre √† jour les stats
            updateStats();
            
            // NE PAS d√©selectionner automatiquement - l'utilisateur peut continuer √† placer
            // La gemme reste s√©lectionn√©e pour permettre des placements multiples
            console.log(`üíé Gemme ${selectedGem} √©quip√©e - reste s√©lectionn√©e pour placement multiple`);
        }

        // Fonction pour changer le niveau d'un √©quipement
        function changeLevel(equipmentType, delta) {
            const currentLevel = itemLevels[equipmentType];
            const newLevel = Math.max(1, Math.min(10, currentLevel + delta));
            
            if (newLevel !== currentLevel) {
                itemLevels[equipmentType] = newLevel;
                updateEquipmentDisplay(equipmentType);
                updateStats();
            }
        }

        // Fonction pour calculer le nombre de slots selon le niveau
        function getSlotsForLevel(level) {
            if (level <= 1) return 1;
            if (level <= 3) return 2;
            if (level <= 6) return 3;
            return 4; // Niveau 7-10
        }

        // Fonction pour calculer la puissance d'un √©quipement selon son niveau
        function getPowerForLevel(level) {
            if (level === 10) {
                // Niveau 10 (Titan) : 1300 en R1, 1450 en R2
                return rank2Mode ? 1450 : 1300;
            }
            // Pour les autres niveaux, scaling progressif vers le niveau Titan
            const baseValue = rank2Mode ? 1450 : 1300;
            return Math.floor(baseValue * (level / 10));
        }

        // Fonction pour mettre √† jour l'affichage d'un √©quipement
        function updateEquipmentDisplay(equipmentType) {
            const level = itemLevels[equipmentType];
            const maxSlots = getSlotsForLevel(level);
            
            // Mettre √† jour l'affichage du niveau
            document.getElementById(`${equipmentType}-level`).textContent = 
                level === 10 ? `Niveau ${level} (Titan)` : `Niveau ${level}`;
            
            // Mettre √† jour les slots
            const slotsContainer = document.getElementById(`${equipmentType}-slots`);
            slotsContainer.innerHTML = '';
            
            // Cr√©er les slots disponibles
            for (let i = 0; i < maxSlots; i++) {
                const slot = document.createElement('div');
                slot.className = 'slot';
                slot.onclick = () => equipGem(equipmentType, i);
                
                // Si une gemme est √©quip√©e dans ce slot
                if (buildSlots[equipmentType][i]) {
                    slot.classList.add('filled');
                    slot.innerHTML = gemsData[buildSlots[equipmentType][i]].icon;
                }
                
                slotsContainer.appendChild(slot);
            }
            
            // Retirer les gemmes des slots qui n'existent plus
            for (let i = maxSlots; i < 4; i++) {
                buildSlots[equipmentType][i] = null;
            }
        }

        function updateStats() {
            let totalGems = 0;
            let totalPower = 0;
            let maxSlots = 0;
            
            // Calculer la puissance de base des √©quipements selon leurs niveaux
            Object.entries(itemLevels).forEach(([equipmentType, level]) => {
                totalPower += getPowerForLevel(level);
                maxSlots += getSlotsForLevel(level);
            });
            
            // Compter les gemmes √©quip√©es et leur puissance
            Object.entries(buildSlots).forEach(([equipmentType, equipment]) => {
                const maxSlotsForEquipment = getSlotsForLevel(itemLevels[equipmentType]);
                for (let i = 0; i < maxSlotsForEquipment; i++) {
                    const gem = equipment[i];
                    if (gem) {
                        totalGems++;
                        totalPower += gemsData[gem].power;
                    }
                }
            });
            
            // Mettre √† jour l'affichage
            document.getElementById('totalPower').textContent = totalPower.toLocaleString();
            document.getElementById('gemsUsed').textContent = `${totalGems}/${maxSlots}`;
            
            // Compter les enchantements actifs
            let activeEnchantments = 0;
            Object.values(itemEnchantments).forEach(enchantment => {
                if (enchantment) activeEnchantments++;
            });
            document.getElementById('enchantmentsActive').textContent = `${activeEnchantments}/5`;
            
            // Mettre √† jour les statistiques d√©taill√©es
            updateDetailedStats();
        }

        // Fonction pour calculer les statistiques d√©taill√©es
        function updateDetailedStats() {
            const stats = calculateBuildStats();
            const detailsPanel = document.getElementById('buildDetails');
            
            detailsPanel.innerHTML = `
                <div class="stat-category">
                    <h4>üèÜ STATISTIQUES DE BASE</h4>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <span>‚ö° Puissance Totale:</span>
                            <span style="color: #4ECDC4;">${stats.totalPower.toLocaleString()}</span>
                        </div>
                        <div class="stat-item">
                            <span>üí• D√©g√¢ts de Base:</span>
                            <span style="color: #FF6B6B;">${stats.baseDamage}</span>
                        </div>
                        <div class="stat-item">
                            <span>‚ù§Ô∏è Points de Vie:</span>
                            <span style="color: #FF6B6B;">${stats.baseHealth}</span>
                        </div>
                        <div class="stat-item">
                            <span>‚ö° Vitesse Attaque:</span>
                            <span style="color: #4ECDC4;">+${stats.attackSpeed}%</span>
                        </div>
                        <div class="stat-item">
                            <span>üèÉ Vitesse Mouvement:</span>
                            <span style="color: #4ECDC4;">+${stats.moveSpeed}%</span>
                        </div>
                        <div class="stat-item">
                            <span>üèπ Port√©e Attaque:</span>
                            <span style="color: #FFD700;">+${stats.attackRange}</span>
                        </div>
                    </div>
                </div>

                <div class="stat-category">
                    <h4>‚ú® EFFETS D'ENCHANTEMENTS</h4>
                    <div class="stat-grid">
                        ${stats.enchantmentEffects.map(effect => `
                            <div class="stat-item">
                                <span>${effect.icon} ${effect.name}:</span>
                                <span style="color: ${effect.color};">${effect.description}</span>
                            </div>
                        `).join('')}
                        ${stats.enchantmentEffects.length === 0 ? 
                            '<div class="stat-item"><span style="color: #888;">Aucun enchantement √©quip√©</span></div>' : ''}
                    </div>
                </div>

                <div class="stat-category">
                    <h4>üìà ANALYSE DPS D√âTAILL√âE</h4>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <span>üë• Ennemis Normaux:</span>
                            <span style="color: #4ECDC4; font-weight: bold;">${stats.dps.normal.toLocaleString()} DPS</span>
                        </div>
                        <div class="stat-item">
                            <span>üè∞ Boss de Donjon:</span>
                            <span style="color: #8A2BE2; font-weight: bold;">${stats.dps.dungeonBoss.toLocaleString()} DPS</span>
                        </div>
                        <div class="stat-item">
                            <span>‚ö° DPS avec Foudre:</span>
                            <span style="color: #FFD700; font-weight: bold;">${stats.dps.withLightning.toLocaleString()} DPS</span>
                        </div>
                        <div class="stat-item">
                            <span>üéØ Projectiles Total:</span>
                            <span style="color: #4ECDC4;">${stats.totalProjectiles}</span>
                        </div>
                        <div class="stat-item">
                            <span>üîÑ Rebonds Max:</span>
                            <span style="color: #FF6B6B;">${stats.maxRicochets}</span>
                        </div>
                        <div class="stat-item">
                            <span>‚ö° Chance One-Shot:</span>
                            <span style="color: #FF4081;">${stats.oneShot}%</span>
                        </div>
                    </div>
                </div>

                <div class="stat-category">
                    <h4>üîÆ CAPACIT√âS SP√âCIALES</h4>
                    <div class="stat-grid">
                        ${stats.specialAbilities.map(ability => `
                            <div class="stat-item">
                                <span>${ability.icon} ${ability.name}:</span>
                                <span style="color: ${ability.color};">${ability.effect}</span>
                            </div>
                        `).join('')}
                        ${stats.specialAbilities.length === 0 ? 
                            '<div class="stat-item"><span style="color: #888;">Aucune capacit√© sp√©ciale active</span></div>' : ''}
                    </div>
                </div>

                <div class="stat-category">
                    <h4>üéÆ R√âSUM√â DU BUILD</h4>
                    <div class="build-summary">
                        <div class="summary-item">
                            <span class="summary-label">üèÜ Score Total:</span>
                            <span class="summary-value" style="color: #FFD700; font-size: 18px; font-weight: bold;">${stats.buildScore.toLocaleString()}</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">‚≠ê √âvaluation:</span>
                            <span class="summary-value" style="color: ${stats.buildRating.color}; font-weight: bold;">${stats.buildRating.text}</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">üí° Recommandation:</span>
                            <span class="summary-value" style="color: #4ECDC4; font-size: 12px;">${stats.recommendation}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // Fonction pour calculer toutes les statistiques du build
        function calculateBuildStats() {
            let totalPower = 0;
            let totalGems = 0;
            let maxSlots = 0;
            
            // Calcul de la puissance de base
            Object.entries(itemLevels).forEach(([equipmentType, level]) => {
                totalPower += getPowerForLevel(level);
                maxSlots += getSlotsForLevel(level);
            });
            
            // Calcul de la puissance des gemmes
            Object.entries(buildSlots).forEach(([equipmentType, equipment]) => {
                const maxSlotsForEquipment = getSlotsForLevel(itemLevels[equipmentType]);
                for (let i = 0; i < maxSlotsForEquipment; i++) {
                    const gem = equipment[i];
                    if (gem) {
                        totalGems++;
                        totalPower += gemsData[gem].power;
                    }
                }
            });

            // Calcul des statistiques de base
            const baseDamage = Math.floor(totalPower * 0.05); // 5% de la puissance = d√©g√¢ts de base
            const baseHealth = Math.floor(totalPower * 0.25); // 25% de la puissance = PV de base
            const attackSpeed = Math.floor(totalPower / 100); // Vitesse d'attaque bas√©e sur la puissance
            const moveSpeed = Math.floor(totalPower / 100); // Vitesse de mouvement bas√©e sur la puissance

            // Analyse des enchantements
            const enchantmentEffects = [];
            const specialAbilities = [];
            let totalProjectiles = 1;
            let maxRicochets = 0;
            let attackRange = 0;
            let oneShot = 0;
            let dungeonDamageBonus = 0;
            let lightningDamageBonus = 0;

            Object.entries(itemEnchantments).forEach(([equipmentType, enchantmentKey]) => {
                if (enchantmentKey) {
                    const enchantment = enchantmentsData[enchantmentKey];
                    const rank = calculateEnchantmentRank(enchantmentKey);
                    const effect = enchantment.effects[rank];

                    // Calculer les effets sp√©cifiques
                    switch (enchantmentKey) {
                        case 'tirmultiple':
                            totalProjectiles += effect.projectiles;
                            enchantmentEffects.push({
                                icon: enchantment.icon,
                                name: enchantment.name,
                                description: `Rang ${rank}: +${effect.projectiles} projectiles`,
                                color: '#4ECDC4'
                            });
                            break;

                        case 'ricochet':
                            maxRicochets = Math.max(maxRicochets, effect.rebounds);
                            enchantmentEffects.push({
                                icon: enchantment.icon,
                                name: enchantment.name,
                                description: `Rang ${rank}: ${effect.rebounds} rebonds`,
                                color: '#FF6B6B'
                            });
                            break;

                        case 'distance':
                            attackRange += effect.range;
                            enchantmentEffects.push({
                                icon: enchantment.icon,
                                name: enchantment.name,
                                description: `Rang ${rank}: +${effect.range} port√©e`,
                                color: '#FFD700'
                            });
                            break;

                        case 'attaquemortel':
                            oneShot = Math.max(oneShot, effect.chance);
                            specialAbilities.push({
                                icon: enchantment.icon,
                                name: enchantment.name,
                                effect: `${effect.chance}% chance de one-shot`,
                                color: '#FF4081'
                            });
                            break;

                        case 'degatdonjon':
                            dungeonDamageBonus = Math.max(dungeonDamageBonus, effect.damage);
                            specialAbilities.push({
                                icon: enchantment.icon,
                                name: enchantment.name,
                                effect: `+${effect.damage}% d√©g√¢ts boss`,
                                color: '#8A2BE2'
                            });
                            break;

                        case 'foudre':
                            lightningDamageBonus = effect.damage;
                            specialAbilities.push({
                                icon: enchantment.icon,
                                name: enchantment.name,
                                effect: `Tous les ${effect.hits} coups: ${effect.damage}% AoE`,
                                color: '#FFD700'
                            });
                            break;

                        case 'hpadmg':
                            specialAbilities.push({
                                icon: enchantment.icon,
                                name: enchantment.name,
                                effect: `${effect.percent}% des PV actuels en d√©g√¢ts`,
                                color: '#FF6B6B'
                            });
                            break;

                        case 'niveaumax':
                            specialAbilities.push({
                                icon: enchantment.icon,
                                name: enchantment.name,
                                effect: `Niveau max ${effect.level}, +${effect.exp}% exp`,
                                color: '#FFD700'
                            });
                            break;

                        default:
                            enchantmentEffects.push({
                                icon: enchantment.icon,
                                name: enchantment.name,
                                description: `Rang ${rank}: ${effect.desc}`,
                                color: '#4ECDC4'
                            });
                    }
                }
            });

            // Calcul des DPS
            const baseDPS = baseDamage * (1 + attackSpeed / 100) * totalProjectiles;
            const normalDPS = Math.floor(baseDPS);
            const dungeonBossDPS = Math.floor(baseDPS * (1 + dungeonDamageBonus / 100));
            const withLightningDPS = Math.floor(baseDPS * (1 + lightningDamageBonus / 100));

            // Score du build
            const buildScore = totalPower + (normalDPS * 10) + (specialAbilities.length * 1000);
            
            // √âvaluation du build
            let buildRating;
            if (buildScore < 50000) {
                buildRating = { text: 'D√©butant', color: '#888' };
            } else if (buildScore < 100000) {
                buildRating = { text: 'Interm√©diaire', color: '#4ECDC4' };
            } else if (buildScore < 200000) {
                buildRating = { text: 'Avanc√©', color: '#FFD700' };
            } else if (buildScore < 300000) {
                buildRating = { text: 'Expert', color: '#FF6B6B' };
            } else {
                buildRating = { text: 'L√©gendaire', color: '#FF4081' };
            }

            // Recommandation
            let recommendation = "Build √©quilibr√©.";
            if (totalGems < maxSlots * 0.5) {
                recommendation = "Ajoutez plus de gemmes pour augmenter la puissance.";
            } else if (specialAbilities.length < 3) {
                recommendation = "√âquipez plus d'enchantements pour des capacit√©s sp√©ciales.";
            } else if (totalProjectiles >= 3 && maxRicochets >= 2) {
                recommendation = "Excellent build multi-cibles !";
            } else if (oneShot >= 30) {
                recommendation = "Build one-shot tr√®s efficace !";
            }

            return {
                totalPower,
                baseDamage,
                baseHealth,
                attackSpeed,
                moveSpeed,
                attackRange,
                totalProjectiles,
                maxRicochets,
                oneShot,
                enchantmentEffects,
                specialAbilities,
                dps: {
                    normal: normalDPS,
                    dungeonBoss: dungeonBossDPS,
                    withLightning: withLightningDPS
                },
                buildScore,
                buildRating,
                recommendation
            };
        }

        // Fonction pour s√©lectionner un enchantement
        function selectEnchantment(enchantmentType) {
            console.log("‚ú® Enchantement s√©lectionn√©:", enchantmentType);
            
            const currentTime = Date.now();
            
            // V√©rifier si c'est un double-clic (m√™me enchantement dans les 500ms)
            if (lastClickedEnchantment === enchantmentType && 
                currentTime - lastClickTime < 500) {
                console.log("ÔøΩ Mode persistant activ√© - L'enchantement reste s√©lectionn√© pour placements multiples");
                showNotification(`‚ú® ${enchantmentsData[enchantmentType].name} - Mode persistant activ√©`, 'info');
                // Ne pas d√©selectionner l'enchantement, il reste actif
                return;
            }
            
            // Mettre √† jour les variables de suivi des clics
            lastClickTime = currentTime;
            lastClickedEnchantment = enchantmentType;
            
            // V√©rifier si l'enchantement est d√©j√† s√©lectionn√© (pour d√©selection)
            if (selectedEnchantment === enchantmentType) {
                console.log("‚ú® D√©selection de l'enchantement:", enchantmentType);
                selectedEnchantment = null;
                document.querySelectorAll('.enchantment-item').forEach(item => {
                    item.classList.remove('selected');
                });
                showNotification(`‚ú® ${enchantmentsData[enchantmentType].name} d√©s√©lectionn√©`, 'info');
                return;
            }
            
            // Retirer la s√©lection pr√©c√©dente
            document.querySelectorAll('.enchantment-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            // S√©lectionner le nouvel enchantement
            event.target.closest('.enchantment-item').classList.add('selected');
            selectedEnchantment = enchantmentType;
        }

        // Fonction pour √©quiper un enchantement
        function equipEnchantment(equipmentType) {
            if (!selectedEnchantment) {
                alert("Veuillez d'abord s√©lectionner un enchantement !");
                return;
            }

            console.log(`‚ö° √âquipement enchantement ${selectedEnchantment} sur ${equipmentType}`);
            
            // √âquiper l'enchantement
            itemEnchantments[equipmentType] = selectedEnchantment;
            
            // Mettre √† jour l'affichage du slot
            updateEnchantmentSlot(equipmentType);
            
            // Mettre √† jour les stats
            updateStats();
            
            // NE PAS d√©selectionner automatiquement - l'utilisateur peut continuer √† placer
            // L'enchantement reste s√©lectionn√© pour permettre des placements multiples
            console.log(`‚ú® Enchantement ${selectedEnchantment} √©quip√© - reste s√©lectionn√© pour placement multiple`);
        }

        // Fonction pour mettre √† jour l'affichage d'un slot d'enchantement
        function updateEnchantmentSlot(equipmentType) {
            const slot = document.getElementById(`${equipmentType}-enchantment`);
            const enchantmentKey = itemEnchantments[equipmentType];
            
            if (enchantmentKey) {
                const enchantment = enchantmentsData[enchantmentKey];
                const rank = calculateEnchantmentRank(enchantmentKey);
                const effect = enchantment.effects[rank];
                
                slot.classList.add('equipped');
                slot.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 5px;">
                        <span style="font-size: 16px;">${enchantment.icon}</span>
                        <div style="text-align: left;">
                            <div style="font-size: 10px; color: #FFD700; font-weight: bold;">${enchantment.name}</div>
                            <div class="enchantment-info">Rang ${rank}: ${effect.desc}</div>
                        </div>
                    </div>
                `;
            } else {
                slot.classList.remove('equipped');
                slot.innerHTML = '<span class="enchantment-placeholder">Cliquez pour √©quiper</span>';
            }
        }

        // Fonction pour calculer le rang d'un enchantement
        function calculateEnchantmentRank(enchantmentKey) {
            let count = 0;
            Object.values(itemEnchantments).forEach(equippedEnchantment => {
                if (equippedEnchantment === enchantmentKey) {
                    count++;
                }
            });
            
            if (rank2Mode) {
                // En mode Rang 2, chaque item R2 compte double
                return Math.min(5, count * 2);
            } else {
                // Mode normal, chaque item compte 1
                return Math.min(5, count);
            }
        }

        // Fonction pour activer/d√©sactiver le mode Rang 2
        function toggleRank2Mode() {
            rank2Mode = document.getElementById('rank2Mode').checked;
            
            if (rank2Mode) {
                document.body.classList.add('rank2-mode');
                console.log("üî• Mode Rang 2 activ√© - Items R2 donnent double effet");
            } else {
                document.body.classList.remove('rank2-mode');
                console.log("‚ö° Mode Rang 1 activ√© - Items normaux");
            }
            
            // Mettre √† jour l'affichage de la puissance des √©quipements
            updateEquipmentPowerDisplay();
            
            // Mettre √† jour l'affichage de tous les slots d'enchantements
            Object.keys(itemEnchantments).forEach(equipmentType => {
                updateEnchantmentSlot(equipmentType);
            });
            
            updateStats();
        }

        // Fonction pour mettre √† jour l'affichage de la puissance des √©quipements
        function updateEquipmentPowerDisplay() {
            const titanPower = rank2Mode ? 1450 : 1300;
            const rankText = rank2Mode ? "(Rang 2)" : "(Rang 1)";
            
            // Mettre √† jour tous les affichages d'√©quipements Titan dans le guide
            document.querySelectorAll('.equipment-item p').forEach(element => {
                if (element.textContent.includes('Power:') && element.textContent.includes('Titan')) {
                    element.textContent = `Power: ${titanPower} (+Bonus Titan ${rankText}) - 4 slots`;
                }
            });
        }

        // Fonction pour retirer un enchantement (clic droit)
        function removeEnchantment(equipmentType) {
            itemEnchantments[equipmentType] = null;
            updateEnchantmentSlot(equipmentType);
            updateStats();
        }

        // Ajouter les √©v√©nements de clic droit pour retirer les enchantements
        document.addEventListener('DOMContentLoaded', function() {
            Object.keys(itemEnchantments).forEach(equipmentType => {
                const slot = document.getElementById(`${equipmentType}-enchantment`);
                if (slot) {
                    slot.addEventListener('contextmenu', function(e) {
                        e.preventDefault();
                        if (itemEnchantments[equipmentType]) {
                            removeEnchantment(equipmentType);
                        }
                    });
                }
            });
        });

        // Fermer les modales en cliquant √† l'ext√©rieur
        window.addEventListener('click', function(event) {
            if (event.target.classList.contains('modal')) {
                const modalId = event.target.id;
                closeModal(modalId);
            }
        });

        // Fonction d'initialisation
        function initializeSimulator() {
            // Initialiser l'affichage de tous les √©quipements
            Object.keys(itemLevels).forEach(equipmentType => {
                updateEquipmentDisplay(equipmentType);
                updateEnchantmentSlot(equipmentType);
            });
            
            // Mettre √† jour l'affichage de la puissance des √©quipements
            updateEquipmentPowerDisplay();
            
            // Mettre √† jour les stats initiales
            updateStats();
            
            // Afficher le panneau de fusion
            setTimeout(showFusionPanel, 1000);
        }

        // Test de d√©marrage
        console.log("üéÆ Syst√®me Hunt Royal Gems charg√© et pr√™t !");

        // ===== FONCTIONS AUTO-√âQUIPEMENT =====

        // Auto-√©quiper des gemmes selon la strat√©gie
        function autoEquipGems(strategy) {
            console.log(`ü§ñ Auto-√©quipement gemmes: ${strategy}`);
            
            // Vider d'abord tous les slots de gemmes
            Object.keys(buildSlots).forEach(equipmentType => {
                buildSlots[equipmentType] = [null, null, null, null];
            });

            let gemPriority = [];
            
            if (strategy === 'best') {
                // Prioriser les meilleures gemmes (M√©ga > Super > Base)
                gemPriority = [
                    'megarouge', 'megaverte', 'megableue', 'megaviolette', 'megablanche', 'megajaune',
                    'superrouge', 'superverte', 'superbleue', 'superviolette', 'superblanche', 'superjaune',
                    'rouge', 'verte', 'bleue', 'violette', 'blanche', 'jaune', 'azur', 'zombie', 'terre'
                ];
            } else if (strategy === 'balanced') {
                // Mix √©quilibr√© de tous types
                gemPriority = [
                    'megarouge', 'superrouge', 'rouge',
                    'megaverte', 'superverte', 'verte',
                    'megableue', 'superbleue', 'bleue',
                    'megaviolette', 'superviolette', 'violette',
                    'azur', 'zombie', 'terre', 'blanche', 'jaune'
                ];
            }

            // √âquiper les gemmes dans l'ordre de priorit√©
            let gemIndex = 0;
            Object.entries(itemLevels).forEach(([equipmentType, level]) => {
                const maxSlots = getSlotsForLevel(level);
                for (let slotIndex = 0; slotIndex < maxSlots && gemIndex < gemPriority.length; slotIndex++) {
                    buildSlots[equipmentType][slotIndex] = gemPriority[gemIndex];
                    gemIndex++;
                }
            });

            // Mettre √† jour l'affichage
            Object.keys(itemLevels).forEach(equipmentType => {
                updateEquipmentDisplay(equipmentType);
            });
            updateStats();

            showNotification(`üíé Gemmes auto-√©quip√©es (${strategy})`, 'success');
        }

        // Auto-√©quiper des enchantements selon la strat√©gie
        function autoEquipEnchantments(strategy) {
            console.log(`‚ú® Auto-√©quipement enchantements: ${strategy}`);
            
            // Vider d'abord tous les enchantements
            Object.keys(itemEnchantments).forEach(equipmentType => {
                itemEnchantments[equipmentType] = null;
            });

            let enchantmentPriority = [];
            
            if (strategy === 'dps') {
                // Build DPS maximum
                enchantmentPriority = ['tirmultiple', 'ricochet', 'attaquemortel', 'feteamort', 'degatdonjon'];
            } else if (strategy === 'utility') {
                // Build utilitaire
                enchantmentPriority = ['niveaumax', 'avantageunique', 'distance', 'hpadmg', 'serviteur'];
            }

            // √âquiper les enchantements
            const equipmentTypes = Object.keys(itemEnchantments);
            enchantmentPriority.forEach((enchantment, index) => {
                if (index < equipmentTypes.length) {
                    itemEnchantments[equipmentTypes[index]] = enchantment;
                }
            });

            // Mettre √† jour l'affichage
            Object.keys(itemEnchantments).forEach(equipmentType => {
                updateEnchantmentSlot(equipmentType);
            });
            updateStats();

            showNotification(`‚ú® Enchantements auto-√©quip√©s (${strategy})`, 'success');
        }

        // Vider tout l'√©quipement
        function clearAllEquipment() {
            console.log("üóëÔ∏è Nettoyage complet de l'√©quipement");
            
            // Vider toutes les gemmes
            Object.keys(buildSlots).forEach(equipmentType => {
                buildSlots[equipmentType] = [null, null, null, null];
            });
            
            // Vider tous les enchantements
            Object.keys(itemEnchantments).forEach(equipmentType => {
                itemEnchantments[equipmentType] = null;
            });

            // Mettre √† jour l'affichage
            Object.keys(itemLevels).forEach(equipmentType => {
                updateEquipmentDisplay(equipmentType);
                updateEnchantmentSlot(equipmentType);
            });
            updateStats();

            showNotification("üóëÔ∏è √âquipement vid√©", 'info');
        }

        // G√©n√©ration de build al√©atoire
        function randomBuild() {
            console.log("üé≤ G√©n√©ration d'un build al√©atoire");
            
            // Vider d'abord
            clearAllEquipment();
            
            // Gemmes al√©atoires
            const allGems = Object.keys(gemsData);
            Object.entries(itemLevels).forEach(([equipmentType, level]) => {
                const maxSlots = getSlotsForLevel(level);
                for (let slotIndex = 0; slotIndex < maxSlots; slotIndex++) {
                    if (Math.random() > 0.3) { // 70% chance d'avoir une gemme
                        const randomGem = allGems[Math.floor(Math.random() * allGems.length)];
                        buildSlots[equipmentType][slotIndex] = randomGem;
                    }
                }
            });

            // Enchantements al√©atoires
            const allEnchantments = Object.keys(enchantmentsData);
            Object.keys(itemEnchantments).forEach(equipmentType => {
                if (Math.random() > 0.4) { // 60% chance d'avoir un enchantement
                    const randomEnchantment = allEnchantments[Math.floor(Math.random() * allEnchantments.length)];
                    itemEnchantments[equipmentType] = randomEnchantment;
                }
            });

            // Mettre √† jour l'affichage
            Object.keys(itemLevels).forEach(equipmentType => {
                updateEquipmentDisplay(equipmentType);
                updateEnchantmentSlot(equipmentType);
            });
            updateStats();

            showNotification("üé≤ Build al√©atoire g√©n√©r√©", 'success');
        }

        // Charger un build pr√©-configur√©
        function loadPresetBuild(preset) {
            console.log(`üìã Chargement du preset: ${preset}`);
            
            clearAllEquipment();

            const presets = {
                berserker: {
                    gems: {
                        casque: ['megarouge', 'superrouge', 'rouge', 'rouge'],
                        plastron: ['megarouge', 'superrouge', 'rouge', 'rouge'],
                        epee: ['megarouge', 'superrouge', 'rouge', 'rouge'],
                        bottes: ['megarouge', 'superrouge', 'rouge', 'rouge'],
                        anneau: ['megarouge', 'superrouge', 'rouge', 'rouge']
                    },
                    enchantments: {
                        casque: 'tirmultiple',
                        plastron: 'attaquemortel',
                        epee: 'feteamort',
                        bottes: 'rage',
                        anneau: 'degatdonjon'
                    }
                },
                tank: {
                    gems: {
                        casque: ['megaverte', 'superverte', 'verte', 'verte'],
                        plastron: ['megaverte', 'superverte', 'verte', 'verte'],
                        epee: ['megablanche', 'superblanche', 'blanche', 'blanche'],
                        bottes: ['megaverte', 'superverte', 'verte', 'verte'],
                        anneau: ['megablanche', 'superblanche', 'blanche', 'blanche']
                    },
                    enchantments: {
                        casque: 'degatsreflechis',
                        plastron: 'fetealavie',
                        epee: 'hpadmg',
                        bottes: 'serviteur',
                        anneau: 'faiblesse'
                    }
                },
                speedrun: {
                    gems: {
                        casque: ['megajaune', 'superjaune', 'jaune', 'azur'],
                        plastron: ['megajaune', 'superjaune', 'jaune', 'azur'],
                        epee: ['megaviolette', 'superviolette', 'violette', 'zombie'],
                        bottes: ['megajaune', 'superjaune', 'jaune', 'azur'],
                        anneau: ['megaviolette', 'superviolette', 'violette', 'zombie']
                    },
                    enchantments: {
                        casque: 'niveaumax',
                        plastron: 'avantageunique',
                        epee: 'distance',
                        bottes: 'tirmultiple',
                        anneau: 'ricochet'
                    }
                },
                boss: {
                    gems: {
                        casque: ['megarouge', 'megaverte', 'megableue', 'terre'],
                        plastron: ['megarouge', 'megaverte', 'megableue', 'terre'],
                        epee: ['megarouge', 'megaverte', 'megableue', 'terre'],
                        bottes: ['megarouge', 'megaverte', 'megableue', 'terre'],
                        anneau: ['megarouge', 'megaverte', 'megableue', 'terre']
                    },
                    enchantments: {
                        casque: 'degatdonjon',
                        plastron: 'attaquemortel',
                        epee: 'foudre',
                        bottes: 'ignorerresistance',
                        anneau: 'hexadecimal'
                    }
                }
            };

            const presetConfig = presets[preset];
            if (!presetConfig) return;

            // Appliquer les gemmes
            Object.entries(presetConfig.gems).forEach(([equipmentType, gems]) => {
                gems.forEach((gem, index) => {
                    if (index < getSlotsForLevel(itemLevels[equipmentType])) {
                        buildSlots[equipmentType][index] = gem;
                    }
                });
            });

            // Appliquer les enchantements
            Object.entries(presetConfig.enchantments).forEach(([equipmentType, enchantment]) => {
                itemEnchantments[equipmentType] = enchantment;
            });

            // Mettre √† jour l'affichage
            Object.keys(itemLevels).forEach(equipmentType => {
                updateEquipmentDisplay(equipmentType);
                updateEnchantmentSlot(equipmentType);
            });
            updateStats();

            const presetNames = {
                berserker: 'üî• Berserker',
                tank: 'üõ°Ô∏è Tank',
                speedrun: 'üí® Speedrun',
                boss: 'üëë Boss Hunter'
            };

            showNotification(`üìã Build ${presetNames[preset]} charg√©`, 'success');
        }

        // Fonction pour auto-√©quiper une gemme sur tous les slots disponibles
        function autoFillGem(gemType) {
            console.log("üöÄ Auto-√©quipement gemme:", gemType);
            
            let equippedCount = 0;
            const equipmentTypes = ['casque', 'plastron', 'epee', 'bottes', 'anneau'];
            
            equipmentTypes.forEach(equipmentType => {
                const maxSlots = getSlotsForLevel(itemLevels[equipmentType]);
                for (let slotIndex = 0; slotIndex < maxSlots; slotIndex++) {
                    if (!buildSlots[equipmentType][slotIndex]) {
                        buildSlots[equipmentType][slotIndex] = gemType;
                        equippedCount++;
                    }
                }
                updateEquipmentDisplay(equipmentType);
            });
            
            updateStats();
            
            if (equippedCount > 0) {
                showNotification(`üíé ${equippedCount} gemme(s) ${gemType} √©quip√©e(s) automatiquement`, 'success');
            } else {
                showNotification(`‚ö†Ô∏è Aucun slot libre trouv√© pour la gemme ${gemType}`, 'warning');
            }
            
            // D√©selectionner la gemme
            selectedGem = null;
            document.querySelectorAll('.gem-item').forEach(item => {
                item.classList.remove('selected');
            });
        }

        // Fonction pour auto-√©quiper un enchantement sur tous les slots disponibles
        function autoFillEnchantment(enchantmentType) {
            console.log("üöÄ Auto-√©quipement enchantement:", enchantmentType);
            
            let equippedCount = 0;
            const equipmentTypes = ['casque', 'plastron', 'epee', 'bottes', 'anneau'];
            
            equipmentTypes.forEach(equipmentType => {
                if (!itemEnchantments[equipmentType]) {
                    itemEnchantments[equipmentType] = enchantmentType;
                    equippedCount++;
                    updateEnchantmentSlot(equipmentType);
                }
            });
            
            updateStats();
            
            if (equippedCount > 0) {
                showNotification(`‚ö° ${equippedCount} enchantement(s) ${enchantmentType} √©quip√©(s) automatiquement`, 'success');
            } else {
                showNotification(`‚ö†Ô∏è Aucun slot libre trouv√© pour l'enchantement ${enchantmentType}`, 'warning');
            }
            
            // D√©selectionner l'enchantement
            selectedEnchantment = null;
            document.querySelectorAll('.enchantment-item').forEach(item => {
                item.classList.remove('selected');
            });
        }

        // Syst√®me de notifications
        function showNotification(message, type = 'info') {
            // Cr√©er l'√©l√©ment notification s'il n'existe pas
            let notificationContainer = document.getElementById('notification-container');
            if (!notificationContainer) {
                notificationContainer = document.createElement('div');
                notificationContainer.id = 'notification-container';
                notificationContainer.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    z-index: 10000;
                    pointer-events: none;
                `;
                document.body.appendChild(notificationContainer);
            }

            // Cr√©er la notification
            const notification = document.createElement('div');
            const colors = {
                success: '#4ECDC4',
                info: '#FFD700',
                warning: '#FF6B6B',
                error: '#FF4081'
            };

            notification.style.cssText = `
                background: linear-gradient(145deg, #2a2a3e, #3a3a5e);
                border: 2px solid ${colors[type] || colors.info};
                border-radius: 8px;
                padding: 12px 16px;
                margin-bottom: 10px;
                color: white;
                font-size: 12px;
                font-weight: bold;
                box-shadow: 0 4px 15px rgba(0,0,0,0.3);
                transform: translateX(300px);
                transition: transform 0.3s ease;
                pointer-events: auto;
                cursor: pointer;
            `;
            notification.textContent = message;

            // Ajouter et animer
            notificationContainer.appendChild(notification);
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 10);

            // Auto-supprimer apr√®s 3 secondes
            setTimeout(() => {
                notification.style.transform = 'translateX(300px)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);

            // Supprimer au clic
            notification.addEventListener('click', () => {
                notification.style.transform = 'translateX(300px)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            });
        }
        
        // Initialiser le simulateur au chargement
        document.addEventListener('DOMContentLoaded', initializeSimulator);

        // ===== SYST√àME DE FUSION DES GEMMES =====

        // Fonction pour cr√©er une Super Stone
        function createSuperStone(primaryGem, secondaryGem) {
            // V√©rifier que ce ne sont pas les m√™mes gemmes
            if (primaryGem === secondaryGem) {
                showNotification("‚ùå Impossible de fusionner deux gemmes identiques", 'error');
                return null;
            }

            // V√©rifier que ce sont des gemmes de base
            if (gemsData[primaryGem].type !== 'base' || gemsData[secondaryGem].type !== 'base') {
                showNotification("‚ùå Les Super Stones ne se cr√©ent qu'avec des gemmes de base niveau 7", 'error');
                return null;
            }

            const fusionKey = `${primaryGem}_${secondaryGem}`;
            const reverseFusionKey = `${secondaryGem}_${primaryGem}`;
            
            // Chercher la recette de fusion
            const recipe = fusionData.super[fusionKey] || fusionData.super[reverseFusionKey];
            
            if (recipe) {
                console.log(`üîÆ Fusion r√©ussie: ${primaryGem} + ${secondaryGem} = ${recipe.result}`);
                showNotification(`üîÆ Super Stone cr√©√©e: ${gemsData[recipe.result].name}`, 'success');
                return {
                    gem: recipe.result,
                    effects: recipe
                };
            } else {
                showNotification("‚ùå Recette de fusion inconnue", 'error');
                return null;
            }
        }

        // Fonction pour cr√©er une M√©ga Stone
        function createMegaStone(superStone, additionalGem) {
            // V√©rifier que le premier est bien une Super Stone
            if (gemsData[superStone].type !== 'super') {
                showNotification("‚ùå Une M√©ga Stone n√©cessite une Super Stone + une gemme niveau 7", 'error');
                return null;
            }

            // V√©rifier que la gemme additionnelle est de base
            if (gemsData[additionalGem].type !== 'base') {
                showNotification("‚ùå La gemme additionnelle doit √™tre une gemme de base niveau 7", 'error');
                return null;
            }

            const fusionKey = `${superStone}_${additionalGem}`;
            
            // Chercher la recette de fusion
            const recipe = fusionData.mega[fusionKey];
            
            if (recipe) {
                console.log(`üí´ Fusion M√©ga r√©ussie: ${superStone} + ${additionalGem} = ${recipe.result}`);
                showNotification(`üí´ M√©ga Stone cr√©√©e: ${gemsData[recipe.result].name}`, 'success');
                return {
                    gem: recipe.result,
                    effects: recipe
                };
            } else {
                showNotification("‚ùå Recette de M√©ga fusion inconnue", 'error');
                return null;
            }
        }

        // Fonction pour calculer les effets d'une gemme fusionn√©e
        function getGemEffects(gemKey, equipmentType) {
            const gem = gemsData[gemKey];
            
            if (gem.type === 'base') {
                // Gemme de base : effets normaux
                const effect = gem.effects[equipmentType];
                return `${effect.name}: ${effect.value}${effect.unit}`;
            } else if (gem.type === 'super' || gem.type === 'mega') {
                // Gemme fusionn√©e : chercher dans les donn√©es de fusion
                for (const category in fusionData) {
                    for (const recipe in fusionData[category]) {
                        if (fusionData[category][recipe].result === gemKey) {
                            const effect = fusionData[category][recipe][equipmentType];
                            return `${effect.name}: ${effect.value}`;
                        }
                    }
                }
                return "Effets de fusion non d√©finis";
            }
            
            return "Aucun effet";
        }

        // Fonction pour afficher le panneau de fusion
        function showFusionPanel() {
            const fusionHtml = `
                <div class="fusion-panel" style="
                    background: linear-gradient(135deg, #1a1a2e, #16213e);
                    border: 2px solid #4ECDC4;
                    border-radius: 15px;
                    padding: 20px;
                    margin: 20px;
                    box-shadow: 0 8px 32px rgba(0,0,0,0.3);
                ">
                    <h3 style="color: #4ECDC4; text-align: center; margin-bottom: 20px;">
                        üîÆ ATELIER DE FUSION DES GEMMES
                    </h3>
                    
                    <div class="fusion-rules" style="background: rgba(78, 205, 196, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                        <h4 style="color: #FFD700;">üìã R√®gles de Fusion :</h4>
                        <ul style="color: #CCC; margin: 10px 0;">
                            <li><strong>Super Stone:</strong> 2 gemmes niveau 7 diff√©rentes (800 power)</li>
                            <li><strong>M√©ga Stone:</strong> 1 Super Stone + 1 gemme niveau 7 (1000 power)</li>
                            <li><strong>Effets:</strong> Pierre principale 100% + secondaire 50%</li>
                            <li><strong>Restriction:</strong> Pas de fusion avec m√™me couleur</li>
                        </ul>
                    </div>

                    <div class="fusion-example" style="background: rgba(255, 215, 0, 0.1); padding: 15px; border-radius: 10px;">
                        <h4 style="color: #FFD700;">üí° Exemple de Fusion :</h4>
                        <div style="display: flex; align-items: center; gap: 10px; margin: 10px 0; color: #CCC;">
                            <span>üî¥ Rouge (Esquive 12%)</span>
                            <span style="color: #4ECDC4;">+</span>
                            <span>üîµ Bleue (D√©g√¢t R√©duit 11%)</span>
                            <span style="color: #FFD700;">=</span>
                            <span style="color: #FF6B6B;">üî¥‚ú® Super Rouge (Esquive 12% + D√©g√¢t R√©duit 5.5%)</span>
                        </div>
                    </div>
                </div>
            `;
            
            // Ajouter le panneau apr√®s les statistiques
            const buildDetails = document.getElementById('buildDetails');
            buildDetails.innerHTML += fusionHtml;
        }
        
        // Fonction pour changer les onglets de chemins
        function showPath(pathType) {
            // Masquer tous les contenus de chemins
            document.querySelectorAll('.path-content').forEach(content => {
                content.style.display = 'none';
            });
            
            // Retirer la classe active de tous les onglets
            document.querySelectorAll('.path-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Afficher le contenu s√©lectionn√©
            const selectedContent = document.getElementById(pathType + '-path');
            if (selectedContent) {
                selectedContent.style.display = 'block';
            }
            
            // Ajouter la classe active √† l'onglet s√©lectionn√©
            event.target.closest('.path-tab').classList.add('active');
        }
        
        // Fonction pour changer les onglets de r√©compenses
        function showRewards(rewardType) {
            // Masquer toutes les tables de r√©compenses
            document.querySelectorAll('#base-rewards, #vip-rewards, #clan-rewards, #clan-vip-rewards').forEach(table => {
                table.style.display = 'none';
            });
            
            // Retirer la classe active de tous les onglets
            document.querySelectorAll('.reward-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Afficher la table s√©lectionn√©e
            const selectedTable = document.getElementById(rewardType + '-rewards');
            if (selectedTable) {
                selectedTable.style.display = 'block';
            }
            
            // Ajouter la classe active √† l'onglet s√©lectionn√©
            event.target.closest('.reward-tab').classList.add('active');
        }
        
        // Fonction pour plier/d√©plier les sections de donjon
        function toggleDungeonSection(sectionId) {
            const content = document.getElementById(sectionId + '-content');
            const toggle = document.getElementById(sectionId + '-toggle');
            
            if (content && toggle) {
                if (content.classList.contains('collapsed')) {
                    // D√©plier
                    content.classList.remove('collapsed');
                    toggle.classList.remove('collapsed');
                    toggle.textContent = 'üîΩ';
                } else {
                    // Plier
                    content.classList.add('collapsed');
                    toggle.classList.add('collapsed');
                    toggle.textContent = '‚ñ∂Ô∏è';
                }
            }
        }
    </script>

    <!-- Styles additionnels pour les nouveaux modaux -->
    <style>
        .fusion-guide-section {
            padding: 20px;
        }
        
        .fusion-recipe-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .fusion-recipe {
            background: rgba(76, 205, 196, 0.1);
            border: 2px solid #4ECDC4;
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
        }
        
        .fusion-recipe.mega {
            background: rgba(255, 215, 0, 0.1);
            border-color: #FFD700;
        }
        
        .fusion-recipe:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(76, 205, 196, 0.3);
        }
        
        .recipe-header {
            font-size: 18px;
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .recipe-content {
            text-align: center;
            line-height: 1.6;
        }
        
        .profitability {
            margin-top: 10px;
            color: #4ECDC4;
            font-weight: bold;
        }
        
        .fusion-tips {
            background: rgba(255, 107, 107, 0.1);
            border: 2px solid #FF6B6B;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .fusion-tips ul {
            list-style: none;
            padding-left: 0;
        }
        
        .fusion-tips li {
            margin: 10px 0;
            padding-left: 20px;
            position: relative;
        }
        
        .fusion-tips li::before {
            content: "üíé";
            position: absolute;
            left: 0;
        }
        
        .dungeons-guide-section {
            padding: 20px;
        }
        
        .dungeon-tier {
            margin-bottom: 30px;
        }
        
        .dungeon-tier h4 {
            color: #FFD700;
            margin-bottom: 15px;
            text-align: center;
            font-size: 20px;
        }
        
        .dungeon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .dungeon-card {
            background: rgba(76, 205, 196, 0.1);
            border: 2px solid #4ECDC4;
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
        }
        
        .dungeon-card.legendary {
            background: rgba(255, 215, 0, 0.1);
            border-color: #FFD700;
        }
        
        .dungeon-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(76, 205, 196, 0.3);
        }
        
        .dungeon-name {
            font-size: 18px;
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .dungeon-rewards, .dungeon-strategy {
            text-align: center;
            margin: 8px 0;
            color: #CCC;
        }
        
        .dungeon-optimization {
            margin-top: 30px;
        }
        
        .optimization-tips {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }
        
        .tip-card {
            background: rgba(255, 107, 107, 0.1);
            border: 2px solid #FF6B6B;
            border-radius: 15px;
            padding: 20px;
        }
        
        .tip-card h4 {
            color: #FFD700;
            margin-bottom: 10px;
        }
        
        .recommended-build {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 14px;
            color: #4ECDC4;
        }
        
        /* Styles pour le donjon Dragon */
        .dragon-dungeon-info {
            margin-bottom: 30px;
        }
        
        .dungeon-overview {
            background: rgba(255, 215, 0, 0.1);
            border: 2px solid #FFD700;
            border-radius: 15px;
            padding: 20px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 8px;
        }
        
        .info-label {
            color: #CCC;
            font-weight: bold;
        }
        
        .info-value {
            color: #4ECDC4;
        }
        
        .dragon-floors {
            margin-bottom: 30px;
        }
        
        .floors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .floor-card {
            background: rgba(76, 205, 196, 0.1);
            border: 2px solid #4ECDC4;
            border-radius: 12px;
            padding: 15px;
            transition: all 0.3s ease;
        }
        
        .floor-card.boss {
            background: rgba(255, 107, 107, 0.1);
            border-color: #FF6B6B;
        }
        
        .floor-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(76, 205, 196, 0.3);
        }
        
        .floor-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .floor-number {
            background: #FFD700;
            color: #000;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }
        
        .floor-name {
            color: #FFD700;
            font-weight: bold;
            font-size: 16px;
        }
        
        .floor-modifiers {
            color: #CCC;
            font-size: 14px;
        }
        
        .modifier-placeholder {
            font-style: italic;
            color: #999;
        }
        
        .dragon-resistances {
            margin-bottom: 30px;
        }
        
        .dragon-parts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .dragon-part {
            background: rgba(255, 107, 107, 0.1);
            border: 2px solid #FF6B6B;
            border-radius: 12px;
            padding: 15px;
        }
        
        .dragon-part h5 {
            color: #FFD700;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .resistance-grid {
            text-align: center;
        }
        
        .resistance-placeholder {
            color: #999;
            font-style: italic;
        }
        
        .dragon-strategies {
            background: rgba(76, 205, 196, 0.1);
            border: 2px solid #4ECDC4;
            border-radius: 15px;
            padding: 20px;
        }
        
        .strategy-placeholder {
            text-align: center;
        }
        
        .help-needed ul {
            text-align: left;
        }
        
        /* Styles pour les nouvelles sections du donjon Dragon */
        .requirements-section, .rewards-section, .dragon-description {
            background: rgba(76, 205, 196, 0.1);
            border: 2px solid #4ECDC4;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .requirements-grid, .rewards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .requirement-item, .reward-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border-radius: 8px;
        }
        
        .requirement-icon, .reward-icon {
            font-size: 18px;
        }
        
        .requirement-label, .reward-label {
            color: #CCC;
            font-weight: bold;
            flex: 1;
        }
        
        .requirement-value, .reward-value {
            color: #FFD700;
            font-weight: bold;
        }
        
        .dragon-description {
            background: rgba(255, 215, 0, 0.1);
            border-color: #FFD700;
        }
        
        .description-content {
            margin-top: 15px;
        }
        
        /* Styles pour les monstres */
        .monsters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .monster-card {
            background: rgba(255, 107, 107, 0.1);
            border: 2px solid #FF6B6B;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .monster-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(255, 107, 107, 0.3);
        }
        
        .monster-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        .monster-name {
            color: #FFD700;
            font-weight: bold;
            font-size: 14px;
        }
        
        .spawn-info {
            text-align: center;
            margin-top: 20px;
        }
        
        /* Styles pour les informations du boss */
        .boss-info {
            background: rgba(255, 107, 107, 0.1);
            border: 2px solid #FF6B6B;
            border-radius: 15px;
            padding: 20px;
            margin: 30px 0;
        }
        
        .boss-content {
            margin-top: 15px;
        }
        
        .boss-warning {
            background: rgba(255, 215, 0, 0.2);
            border: 1px solid #FFD700;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            color: #FFD700;
        }
        
        .boss-action {
            text-align: center;
            margin-top: 15px;
        }
        
        /* Styles pour les conseils de jeu */
        .gameplay-tips {
            background: rgba(76, 205, 196, 0.1);
            border: 2px solid #4ECDC4;
            border-radius: 15px;
            padding: 20px;
            margin: 30px 0;
        }
        
        .tips-content {
            margin-top: 15px;
        }
        
        .tip-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin: 15px 0;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }
        
        .tip-icon {
            font-size: 18px;
            min-width: 20px;
        }
        
        .tip-label {
            color: #FFD700;
            font-weight: bold;
            min-width: 120px;
        }
        
        .tip-text {
            color: #CCC;
            line-height: 1.5;
        }
        
        .farming-zone {
            margin-top: 20px;
        }
        
        /* Styles pour les chemins de navigation */
        .navigation-paths {
            background: rgba(255, 215, 0, 0.1);
            border: 2px solid #FFD700;
            border-radius: 15px;
            padding: 20px;
            margin: 30px 0;
        }
        
        .path-tabs {
            display: flex;
            gap: 10px;
            margin: 15px 0 20px 0;
        }
        
        .path-tab {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #4ECDC4;
            border-radius: 8px;
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .path-tab.active {
            background: rgba(76, 205, 196, 0.2);
            border-color: #FFD700;
        }
        
        .path-tab:hover {
            transform: translateY(-2px);
        }
        
        .path-icon {
            font-size: 16px;
        }
        
        .path-content {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
        }
        
        .path-steps {
            margin-top: 15px;
        }
        
        .step {
            background: rgba(76, 205, 196, 0.1);
            border-left: 4px solid #4ECDC4;
            padding: 10px 15px;
            margin: 10px 0;
            color: #CCC;
        }
        
        /* Styles pour les tables de donn√©es Dragon */
        .dragon-data-tables {
            margin: 30px 0;
        }
        
        .data-table-section {
            margin-bottom: 30px;
        }
        
        .dragon-table, .modifiers-table {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid #4ECDC4;
        }
        
        .table-header {
            display: grid;
            grid-template-columns: 60px 1fr 1fr 1fr;
            background: rgba(76, 205, 196, 0.2);
            border-bottom: 2px solid #4ECDC4;
        }
        
        .header-cell {
            padding: 12px 8px;
            text-align: center;
            font-weight: bold;
            color: #FFD700;
            border-right: 1px solid #4ECDC4;
        }
        
        .header-cell:last-child {
            border-right: none;
        }
        
        .table-row {
            display: grid;
            grid-template-columns: 60px 1fr 1fr 1fr;
            border-bottom: 1px solid rgba(76, 205, 196, 0.3);
        }
        
        .table-row:last-child {
            border-bottom: none;
        }
        
        .table-row.boss-row {
            background: rgba(255, 107, 107, 0.1);
            border: 1px solid #FF6B6B;
        }
        
        .cell {
            padding: 10px 8px;
            text-align: center;
            border-right: 1px solid rgba(76, 205, 196, 0.2);
            color: #CCC;
        }
        
        .cell:last-child {
            border-right: none;
        }
        
        .floor-cell {
            background: rgba(255, 215, 0, 0.2);
            color: #FFD700;
            font-weight: bold;
        }
        
        .time-cell, .hp-cell {
            font-size: 14px;
        }
        
        .reward-cell {
            font-size: 14px;
            color: #4ECDC4;
        }
        
        .modifier-cell, .stat-cell {
            font-size: 12px;
            line-height: 1.4;
        }
        
        .small-text {
            font-size: 10px;
            color: #999;
            display: block;
        }
        
        /* Styles pour les drops */
        .drops-section {
            margin-top: 20px;
        }
        
        .drop-category {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .power-stones {
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .stone-item {
            font-size: 20px;
            padding: 5px;
        }
        
        .dragon-gear {
            text-align: center;
        }
        
        .gear-row {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin: 8px 0;
        }
        
        .gear-item {
            font-size: 20px;
            padding: 5px;
            border-radius: 5px;
        }
        
        .gear-item.green {
            background: rgba(0, 255, 0, 0.2);
        }
        
        .gear-item.purple {
            background: rgba(128, 0, 128, 0.2);
        }
        
        .gear-item.orange {
            background: rgba(255, 165, 0, 0.2);
        }
        
        .gear-item.blue {
            background: rgba(0, 100, 255, 0.2);
        }
        
        /* Styles pour les onglets de r√©compenses */
        .rewards-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .reward-tab {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #4ECDC4;
            border-radius: 8px;
            padding: 10px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .reward-tab.active {
            background: rgba(76, 205, 196, 0.2);
            border-color: #FFD700;
            color: #FFD700;
        }
        
        .reward-tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(76, 205, 196, 0.3);
        }
        
        /* Styles pour les sections de donjon pliables */
        .dungeon-section {
            margin-bottom: 20px;
            border: 2px solid #4ECDC4;
            border-radius: 15px;
            overflow: hidden;
        }
        
        .dungeon-header {
            background: rgba(76, 205, 196, 0.1);
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(76, 205, 196, 0.3);
        }
        
        .dungeon-header:hover {
            background: rgba(76, 205, 196, 0.2);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-content h3 {
            margin: 0;
            color: #FFD700;
            font-size: 20px;
        }
        
        .toggle-icon {
            font-size: 18px;
            transition: transform 0.3s ease;
            color: #4ECDC4;
        }
        
        .toggle-icon.collapsed {
            transform: rotate(-90deg);
        }
        
        .dungeon-content {
            padding: 20px;
            transition: all 0.3s ease;
            overflow: hidden;
        }
        
        .dungeon-content.collapsed {
            max-height: 0;
            padding: 0 20px;
            opacity: 0;
        }
        
        .future-dungeons {
            margin-top: 20px;
        }
    </style>

    <!-- Modal Guide de Fusion -->
    <div id="fusionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üîÆ Guide de Fusion</h2>
                <span class="close" onclick="closeModal('fusionModal')">&times;</span>
            </div>
            
            <div class="modal-body">
                <div class="fusion-guide-section">
                    <h3>Fusions Super (800 de puissance)</h3>
                    <div class="fusion-recipe-grid">
                        <div class="fusion-recipe">
                            <div class="recipe-header">üî¥‚≠ê Super Rouge</div>
                            <div class="recipe-content">
                                <div>üî¥ Rouge + üü† Orange = ‚ö° Esquive 12% + DMG R√©duit 5.5%</div>
                                <div class="profitability">üìà Rentabilit√©: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                            </div>
                        </div>
                        
                        <div class="fusion-recipe">
                            <div class="recipe-header">üîµ‚≠ê Super Bleue</div>
                            <div class="recipe-content">
                                <div>üîµ Bleue + üü£ Violette = üõ°Ô∏è DMG R√©duit 16.5% + Vitesse +5.5%</div>
                                <div class="profitability">üìà Rentabilit√©: ‚≠ê‚≠ê‚≠ê‚≠ê</div>
                            </div>
                        </div>
                        
                        <div class="fusion-recipe">
                            <div class="recipe-header">üü¢‚≠ê Super Verte</div>
                            <div class="recipe-content">
                                <div>üü¢ Verte + üü° Jaune = üíö R√©g√©n√©ration 11% + DMG Critique +5.5%</div>
                                <div class="profitability">üìà Rentabilit√©: ‚≠ê‚≠ê‚≠ê</div>
                            </div>
                        </div>
                    </div>
                    
                    <h3>Fusions Mega (1000 de puissance)</h3>
                    <div class="fusion-recipe-grid">
                        <div class="fusion-recipe mega">
                            <div class="recipe-header">üî¥üíé Mega Rouge</div>
                            <div class="recipe-content">
                                <div>üî¥‚≠ê Super Rouge + üü¢‚≠ê Super Verte = ‚ö° Esquive 15% + Critique 8% + DMG R√©duit 7%</div>
                                <div class="profitability">üìà Rentabilit√©: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                            </div>
                        </div>
                        
                        <div class="fusion-recipe mega">
                            <div class="recipe-header">üîµüíé Mega Bleue</div>
                            <div class="recipe-content">
                                <div>üîµ‚≠ê Super Bleue + üî¥‚≠ê Super Rouge = üõ°Ô∏è DMG R√©duit 20% + Esquive 8% + Vitesse 7%</div>
                                <div class="profitability">üìà Rentabilit√©: ‚≠ê‚≠ê‚≠ê‚≠ê</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="fusion-tips">
                        <h3>üí° Conseils de Fusion</h3>
                        <ul>
                            <li>Les fusions Super offrent 800 de puissance vs 600 pour les gemmes normales (+33%)</li>
                            <li>Les fusions Mega offrent 1000 de puissance vs 600 pour les gemmes normales (+66%)</li>
                            <li>La Super Rouge est la plus rentable pour l'esquive et la survie</li>
                            <li>La Mega Rouge combine le meilleur de tous les mondes</li>
                            <li>Priorit√© recommand√©e: Super Rouge ‚Üí Mega Rouge ‚Üí Super Bleue</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Guide Donjons -->
    <div id="dungeonsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üè∞ Guide des Donjons</h2>
                <span class="close" onclick="closeModal('dungeonsModal')">&times;</span>
            </div>
            
            <div class="modal-body">
                <div class="dungeons-guide-section">
                    <h2>üè∞ Guide des Donjons</h2>
                    
                    <!-- Section Dragon (Pliable) -->
                    <div class="dungeon-section">
                        <div class="dungeon-header" onclick="toggleDungeonSection('dragon')">
                            <div class="header-content">
                                <h3>üêâ Donjon Dragon - Guide Complet</h3>
                                <span class="toggle-icon" id="dragon-toggle">üîΩ</span>
                            </div>
                        </div>
                        
                        <div class="dungeon-content" id="dragon-content">
                            <!-- Structure du donjon -->
                            <div class="dragon-dungeon-info">
                        <div class="dungeon-overview">
                            <h4>üìã Informations G√©n√©rales</h4>
                            <div class="info-grid">
                                <div class="info-item">
                                    <span class="info-label">ÔøΩÔ∏è Structure:</span>
                                    <span class="info-value">Donjon</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">üéÆ Gameplay:</span>
                                    <span class="info-value">PvE</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">üë• Modes:</span>
                                    <span class="info-value">Solo/Duo</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">üè¢ Planchers:</span>
                                    <span class="info-value">10 √âtages</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Exigences -->
                        <div class="requirements-section">
                            <h4>‚ö° Exigences</h4>
                            <div class="requirements-grid">
                                <div class="requirement-item">
                                    <span class="requirement-icon">üèÜ</span>
                                    <span class="requirement-label">Troph√©es:</span>
                                    <span class="requirement-value">500</span>
                                </div>
                                <div class="requirement-item">
                                    <span class="requirement-icon">üõ°Ô∏è</span>
                                    <span class="requirement-label">Score d'engrenages:</span>
                                    <span class="requirement-value">0</span>
                                </div>
                                <div class="requirement-item">
                                    <span class="requirement-icon">üìä</span>
                                    <span class="requirement-label">Autre:</span>
                                    <span class="requirement-value">-</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- R√©compenses -->
                        <div class="rewards-section">
                            <h4>üéÅ R√©compenses</h4>
                            <div class="rewards-grid">
                                <div class="reward-item">
                                    <span class="reward-icon">üèÜ</span>
                                    <span class="reward-label">Troph√©es:</span>
                                    <span class="reward-value">400</span>
                                </div>
                                <div class="reward-item">
                                    <span class="reward-icon">üíé</span>
                                    <span class="reward-label">Gemmes:</span>
                                    <span class="reward-value">50 üî¥ 50</span>
                                </div>
                                <div class="reward-item">
                                    <span class="reward-icon">ü™ô</span>
                                    <span class="reward-label">Jetons:</span>
                                    <span class="reward-value">150</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Description du donjon -->
                        <div class="dragon-description">
                            <h4>üìú Description</h4>
                            <div class="description-content">
                                <p style="color: #FFD700; font-style: italic; text-align: center; line-height: 1.6;">
                                    "Entrez dans le donjon du dragon et combattez les monstres jusqu'√† ce que vous ayez suffisamment de force pour affronter le puissant dragon. Une fois le dragon vaincu, obtenez un nouveau chasseur et avancez vous plus profond√©ment dans le donjon."
                                </p>
                                <p style="color: #4ECDC4; text-align: center; margin-top: 15px;">
                                    Si vous portez du mat√©riel Epic, vous pouvez vous procurer des pierres pr√©cieuses Epic.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- √âtages du donjon -->
                    <div class="dragon-floors">
                        <h4>üëπ Monstres du Donjon Dragon</h4>
                        <p style="text-align: center; color: #FFD700; margin-bottom: 20px;">Les foules suivantes apparaissent dans le Donjon du Dragon</p>
                        
                        <div class="monsters-grid">
                            <div class="monster-card">
                                <div class="monster-icon">ü¶Ö</div>
                                <div class="monster-name">Griffon</div>
                            </div>
                            <div class="monster-card">
                                <div class="monster-icon">ü¶Ç</div>
                                <div class="monster-name">Scorpion</div>
                            </div>
                            <div class="monster-card">
                                <div class="monster-icon">üëª</div>
                                <div class="monster-name">Grand cadavre</div>
                            </div>
                            <div class="monster-card">
                                <div class="monster-icon">ü¶é</div>
                                <div class="monster-name">L√©zard</div>
                            </div>
                            <div class="monster-card">
                                <div class="monster-icon">üè∞</div>
                                <div class="monster-name">Rock Golem</div>
                            </div>
                            <div class="monster-card">
                                <div class="monster-icon">üêâ</div>
                                <div class="monster-name">Gorgon</div>
                            </div>
                            <div class="monster-card">
                                <div class="monster-icon">üèπ</div>
                                <div class="monster-name">Archer squelette</div>
                            </div>
                            <div class="monster-card">
                                <div class="monster-icon">‚öîÔ∏è</div>
                                <div class="monster-name">Chevalier squelette</div>
                            </div>
                            <div class="monster-card">
                                <div class="monster-icon">üßô</div>
                                <div class="monster-name">Mage squelette</div>
                            </div>
                        </div>
                        
                        <div class="spawn-info">
                            <label style="color: #4ECDC4; font-size: 14px;">
                                <input type="checkbox" style="margin-right: 8px;"> Afficher les apparitions de la foule
                            </label>
                        </div>
                    </div>

                    <!-- Informations du Boss -->
                    <div class="boss-info">
                        <h4>üêâ Informations du Boss Dragon</h4>
                        <div class="boss-content">
                            <p style="color: #FFD700; line-height: 1.6;">
                                Le boss a un mod√®le d'attaque simple : toutes les 10 secondes, il 
                                ex√©cutera un c√¥ne large et de longue port√©e, un souffle de feu balayant d'un 
                                c√¥t√© √† l'autre pendant 7 √† 8 secondes. Parall√®lement √† sa crise 
                                respiratoire, le boss engendre plusieurs piliers de feu AoE √† courte port√©e.
                            </p>
                            
                            <div class="boss-warning">
                                <strong>‚ö†Ô∏è Remarque !</strong> - Lorsque Dragon commence son attaque, tout ce qui est invoqu√© par votre 
                                attaque (comme les tentacules ou les fant√¥mes du Fant√¥me) dispara√Ætra.
                            </div>
                            
                            <div class="boss-action">
                                <button style="background: #4ECDC4; color: white; padding: 8px 16px; border: none; border-radius: 5px; cursor: pointer;">
                                    üëÅÔ∏è Voir l'attaque du boss
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Conseils de jeu -->
                    <div class="gameplay-tips">
                        <h4>üí° Conseils de jeu</h4>
                        <div class="tips-content">
                            <div class="tip-item">
                                <span class="tip-icon">üíú</span>
                                <span class="tip-label">Vol de vie</span>
                                <span class="tip-text">- Placez 1x pierre violette dans votre √©quipement offensif pour gu√©rir tout en endommageant le boss.</span>
                            </div>
                            
                            <div class="tip-item">
                                <span class="tip-icon">‚ò†Ô∏è</span>
                                <span class="tip-label">Poison</span>
                                <span class="tip-text">- Placez 1 √† 2 pierre(s) verte(s) dans votre √©quipement offensif pour empiler le poison et infliger de gros d√©g√¢ts DoT.</span>
                            </div>
                            
                            <div class="tip-item">
                                <span class="tip-icon">üéØ</span>
                                <span class="tip-label">Taches aveugles</span>
                                <span class="tip-text">- Le boss a des taches aveugles sur ses flancs, juste aux coins de la carte (de chaque c√¥t√© du boss). Selon la direction dans laquelle l'attaque respiratoire oscille, l'autre c√¥t√© pourra attaquer en toute s√©curit√©. Cliquez ici pour voir les angles morts.</span>
                            </div>
                            
                            <div class="tip-item">
                                <span class="tip-icon">üö∂</span>
                                <span class="tip-label">Chemin</span>
                                <span class="tip-text">- Pour optimiser votre temps de massacre, surtout lorsque vous jouez en duo, il est essentiel d'avoir le bon cheminement ! Une <strong>solo/duo</strong> guides de cheminement.</span>
                            </div>
                            
                            <div class="tip-item">
                                <span class="tip-icon">üíé</span>
                                <span class="tip-label">Pas de drain de vie</span>
                                <span class="tip-text">- Life drain est essentiellement votre pierre violette qui vous gu√©rit pour un pourcentage de vos d√©g√¢ts inflig√©s. Sur les sols o√π les foules et les patrons y r√©sistent, vous souhaitez donner la priorit√© aux chasseurs avec des avantages Regen et/ou Life Steal pour la gu√©rison.</span>
                            </div>
                        </div>
                        
                        <div class="farming-zone" style="text-align: center; margin-top: 20px;">
                            <div style="background: rgba(255, 0, 255, 0.2); padding: 15px; border-radius: 10px; border: 2px solid #FF00FF;">
                                <h5 style="color: #FF00FF; margin-bottom: 10px;">üéØ Mob Farming Zone</h5>
                                <p style="color: #FFD700;">Zone optimale pour farmer les mobs avant d'affronter le boss</p>
                            </div>
                        </div>
                    </div>

                    <!-- Tables des donn√©es compl√®tes du Dragon -->
                    <div class="dragon-data-tables">
                        <h4>üìä Donn√©es Compl√®tes du Dragon</h4>
                        
                        <!-- Tableau Floor Time, Boss HP & Rewards -->
                        <div class="data-table-section">
                            <h5 style="color: #FFD700; margin-bottom: 15px;">‚è±Ô∏è Floor Time, Boss HP & Rewards Table</h5>
                            
                            <!-- Onglets pour les diff√©rents types de r√©compenses -->
                            <div class="rewards-tabs">
                                <div class="reward-tab active" onclick="showRewards('base')">
                                    <span>üéØ Base</span>
                                </div>
                                <div class="reward-tab" onclick="showRewards('vip')">
                                    <span>üëë VIP Activ√©</span>
                                </div>
                                <div class="reward-tab" onclick="showRewards('clan')">
                                    <span>üè∞ Clan Full (Sans VIP)</span>
                                </div>
                                <div class="reward-tab" onclick="showRewards('clan-vip')">
                                    <span>üèÜ Clan Full + VIP</span>
                                </div>
                            </div>
                            
                            <!-- Table Base -->
                            <div id="base-rewards" class="dragon-table">
                                <div class="table-header">
                                    <div class="header-cell">Floor</div>
                                    <div class="header-cell">Time</div>
                                    <div class="header-cell">Boss HP</div>
                                    <div class="header-cell">Rewards (Base)</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">1</div>
                                    <div class="cell time-cell">üïê 4:30<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 100k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">10üü° 3üî¥ 3üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">2</div>
                                    <div class="cell time-cell">üïê 4:30<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 140k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">40üü° 9üî¥ 9üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">3</div>
                                    <div class="cell time-cell">üïê 3:40<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 200k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">80üü° 15üî¥ 15üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">4</div>
                                    <div class="cell time-cell">üïê 3:40<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 280k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">120üü° 24üî¥ 24üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">5</div>
                                    <div class="cell time-cell">üïê 3:20<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 350k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">160üü° 30üî¥ 30üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">6</div>
                                    <div class="cell time-cell">üïê 3:20<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 500k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">200üü° 39üî¥ 39üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">7</div>
                                    <div class="cell time-cell">üïê 3:00<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 650k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">240üü° 45üî¥ 45üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">8</div>
                                    <div class="cell time-cell">üïê 3:00<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 850k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">280üü° 54üî¥ 54üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">9</div>
                                    <div class="cell time-cell">üïê 2:40<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 1mil<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">320üü° 60üî¥ 60üü¢</div>
                                </div>
                                
                                <div class="table-row boss-row">
                                    <div class="cell floor-cell">10</div>
                                    <div class="cell time-cell">üïê 2:40<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 1.2mil<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">400üü° 75üî¥ 75üü¢</div>
                                </div>
                            </div>
                            
                            <!-- Table VIP -->
                            <div id="vip-rewards" class="dragon-table" style="display: none;">
                                <div class="table-header">
                                    <div class="header-cell">Floor</div>
                                    <div class="header-cell">Time</div>
                                    <div class="header-cell">Boss HP</div>
                                    <div class="header-cell">Rewards (VIP)</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">1</div>
                                    <div class="cell time-cell">üïê 4:30<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 100k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">10üü° 2üî¥ 2üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">2</div>
                                    <div class="cell time-cell">üïê 4:30<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 140k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">40üü° 7üî¥ 7üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">3</div>
                                    <div class="cell time-cell">üïê 3:40<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 200k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">80üü° 12üî¥ 12üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">4</div>
                                    <div class="cell time-cell">üïê 3:40<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 280k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">120üü° 20üî¥ 20üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">5</div>
                                    <div class="cell time-cell">üïê 3:20<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 350k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">160üü° 25üî¥ 25üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">6</div>
                                    <div class="cell time-cell">üïê 3:20<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 500k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">200üü° 32üî¥ 32üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">7</div>
                                    <div class="cell time-cell">üïê 3:00<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 650k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">240üü° 37üî¥ 37üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">8</div>
                                    <div class="cell time-cell">üïê 3:00<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 850k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">280üü° 45üî¥ 45üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">9</div>
                                    <div class="cell time-cell">üïê 2:40<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 1mil<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">320üü° 50üî¥ 50üü¢</div>
                                </div>
                                
                                <div class="table-row boss-row">
                                    <div class="cell floor-cell">10</div>
                                    <div class="cell time-cell">üïê 2:40<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 1.2mil<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">400üü° 62üî¥ 62üü¢</div>
                                </div>
                            </div>
                            
                            <!-- Table Clan Full (Sans VIP) -->
                            <div id="clan-rewards" class="dragon-table" style="display: none;">
                                <div class="table-header">
                                    <div class="header-cell">Floor</div>
                                    <div class="header-cell">Time</div>
                                    <div class="header-cell">Boss HP</div>
                                    <div class="header-cell">Rewards (Clan Full)</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">1</div>
                                    <div class="cell time-cell">üïê 4:30<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 100k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">10üü° 3üî¥ 3üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">2</div>
                                    <div class="cell time-cell">üïê 4:30<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 140k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">40üü° 11üî¥ 11üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">3</div>
                                    <div class="cell time-cell">üïê 3:40<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 200k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">80üü° 18üî¥ 18üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">4</div>
                                    <div class="cell time-cell">üïê 3:40<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 280k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">120üü° 30üî¥ 30üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">5</div>
                                    <div class="cell time-cell">üïê 3:20<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 350k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">160üü° 37üî¥ 37üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">6</div>
                                    <div class="cell time-cell">üïê 3:20<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 500k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">200üü° 48üî¥ 48üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">7</div>
                                    <div class="cell time-cell">üïê 3:00<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 650k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">240üü° 56üî¥ 56üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">8</div>
                                    <div class="cell time-cell">üïê 3:00<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 850k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">280üü° 67üî¥ 67üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">9</div>
                                    <div class="cell time-cell">üïê 2:40<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 1mil<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">320üü° 75üî¥ 75üü¢</div>
                                </div>
                                
                                <div class="table-row boss-row">
                                    <div class="cell floor-cell">10</div>
                                    <div class="cell time-cell">üïê 2:40<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 1.2mil<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">400üü° 93üî¥ 93üü¢</div>
                                </div>
                            </div>
                            
                            <!-- Table Clan Full + VIP -->
                            <div id="clan-vip-rewards" class="dragon-table" style="display: none;">
                                <div class="table-header">
                                    <div class="header-cell">Floor</div>
                                    <div class="header-cell">Time</div>
                                    <div class="header-cell">Boss HP</div>
                                    <div class="header-cell">Rewards (Clan + VIP)</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">1</div>
                                    <div class="cell time-cell">üïê 4:30<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 100k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">10üü° 2üî¥ 2üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">2</div>
                                    <div class="cell time-cell">üïê 4:30<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 140k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">40üü° 6üî¥ 6üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">3</div>
                                    <div class="cell time-cell">üïê 3:40<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 200k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">80üü° 10üî¥ 10üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">4</div>
                                    <div class="cell time-cell">üïê 3:40<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 280k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">120üü° 16üî¥ 16üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">5</div>
                                    <div class="cell time-cell">üïê 3:20<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 350k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">160üü° 20üî¥ 20üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">6</div>
                                    <div class="cell time-cell">üïê 3:20<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 500k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">200üü° 26üî¥ 26üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">7</div>
                                    <div class="cell time-cell">üïê 3:00<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 650k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">240üü° 30üî¥ 30üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">8</div>
                                    <div class="cell time-cell">üïê 3:00<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 850k<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">280üü° 36üî¥ 36üü¢</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">9</div>
                                    <div class="cell time-cell">üïê 2:40<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 1mil<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">320üü° 40üî¥ 40üü¢</div>
                                </div>
                                
                                <div class="table-row boss-row">
                                    <div class="cell floor-cell">10</div>
                                    <div class="cell time-cell">üïê 2:40<br><span class="small-text">CLAIRE TIME</span></div>
                                    <div class="cell hp-cell">üü¢ 1.2mil<br><span class="small-text">BOSS HP</span></div>
                                    <div class="cell reward-cell">400üü° 50üî¥ 50üü¢</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tableau Floor Modifiers -->
                        <div class="data-table-section" style="margin-top: 30px;">
                            <h5 style="color: #FFD700; margin-bottom: 15px;">‚öôÔ∏è Floor Modifiers Table</h5>
                            <div class="modifiers-table">
                                <div class="table-header">
                                    <div class="header-cell">Floor</div>
                                    <div class="header-cell">Modifiers</div>
                                    <div class="header-cell">Mob Stats</div>
                                    <div class="header-cell">Boss Stats</div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">1</div>
                                    <div class="cell modifier-cell">‚ú® 250%<br><span class="small-text">XP MULTIPLIER</span></div>
                                    <div class="cell stat-cell">‚ù§Ô∏è 200%<br><span class="small-text">MONSTERS HP</span></div>
                                    <div class="cell stat-cell">üü¢ 40<br><span class="small-text">BOSS DMG</span> üü¢ 100%<br><span class="small-text">STUN RESIST</span></div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">2</div>
                                    <div class="cell modifier-cell">‚ú® 250%<br><span class="small-text">XP MULTIPLIER</span></div>
                                    <div class="cell stat-cell">‚ù§Ô∏è 200%<br><span class="small-text">MONSTERS HP</span></div>
                                    <div class="cell stat-cell">üü¢ 40<br><span class="small-text">BOSS DMG</span> üü¢ 100%<br><span class="small-text">STUN RESIST</span></div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">3</div>
                                    <div class="cell modifier-cell">‚ú® 250%<br><span class="small-text">XP MULTIPLIER</span> üîµ None<br><span class="small-text">HEALING POINTS</span></div>
                                    <div class="cell stat-cell">‚Äî</div>
                                    <div class="cell stat-cell">üü¢ 40<br><span class="small-text">BOSS DMG</span> üü¢ 100%<br><span class="small-text">STUN RESIST</span></div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">4</div>
                                    <div class="cell modifier-cell">‚ú® 125%<br><span class="small-text">XP MULTIPLIER</span></div>
                                    <div class="cell stat-cell">‚ù§Ô∏è 200%<br><span class="small-text">MONSTERS HP</span></div>
                                    <div class="cell stat-cell">üü¢ 40<br><span class="small-text">BOSS DMG</span> üü¢ 100%<br><span class="small-text">STUN RESIST</span></div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">5</div>
                                    <div class="cell modifier-cell">‚ú® 250%<br><span class="small-text">XP MULTIPLIER</span></div>
                                    <div class="cell stat-cell">‚ù§Ô∏è 200%<br><span class="small-text">MONSTERS HP</span></div>
                                    <div class="cell stat-cell">üü¢ 40<br><span class="small-text">BOSS DMG</span> üü¢ 100%<br><span class="small-text">STUN RESIST</span></div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">6</div>
                                    <div class="cell modifier-cell">‚ú® 250%<br><span class="small-text">XP MULTIPLIER</span> üîµ None<br><span class="small-text">HEALING POINTS</span></div>
                                    <div class="cell stat-cell">‚Äî</div>
                                    <div class="cell stat-cell">üü¢ 40<br><span class="small-text">BOSS DMG</span> üü¢ 100%<br><span class="small-text">STUN RESIST</span></div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">7</div>
                                    <div class="cell modifier-cell">‚ú® 250%<br><span class="small-text">XP MULTIPLIER</span> üîµ None<br><span class="small-text">HEALING POINTS</span></div>
                                    <div class="cell stat-cell">ü©∏ 100%<br><span class="small-text">LIFEDRAIN RESIST</span></div>
                                    <div class="cell stat-cell">üü¢ 40<br><span class="small-text">BOSS DMG</span> üü¢ 100%<br><span class="small-text">STUN RESIST</span></div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">8</div>
                                    <div class="cell modifier-cell">‚ú® 250%<br><span class="small-text">XP MULTIPLIER</span></div>
                                    <div class="cell stat-cell">‚ù§Ô∏è 200%<br><span class="small-text">MONSTERS HP</span></div>
                                    <div class="cell stat-cell">üü¢ 40<br><span class="small-text">BOSS DMG</span> üü¢ 100%<br><span class="small-text">STUN RESIST</span></div>
                                </div>
                                
                                <div class="table-row">
                                    <div class="cell floor-cell">9</div>
                                    <div class="cell modifier-cell">‚ú® 250%<br><span class="small-text">XP MULTIPLIER</span> üîµ None<br><span class="small-text">HEALING POINTS</span></div>
                                    <div class="cell stat-cell">‚Äî</div>
                                    <div class="cell stat-cell">üü¢ 40<br><span class="small-text">BOSS DMG</span> üü¢ 100%<br><span class="small-text">STUN RESIST</span></div>
                                </div>
                                
                                <div class="table-row boss-row">
                                    <div class="cell floor-cell">10</div>
                                    <div class="cell modifier-cell">‚ú® 250%<br><span class="small-text">XP MULTIPLIER</span> üîµ None<br><span class="small-text">HEALING POINTS</span></div>
                                    <div class="cell stat-cell">‚ù§Ô∏è 200%<br><span class="small-text">MONSTERS HP</span><br>ü©∏ 100%<br><span class="small-text">LIFEDRAIN RESIST</span></div>
                                    <div class="cell stat-cell">üü¢ 40<br><span class="small-text">BOSS DMG</span> üü¢ 100%<br><span class="small-text">STUN RESIST</span> üü¢ 100%<br><span class="small-text">LIFEDRAIN RESIST</span></div>
                                </div>
                            </div>
                        </div>

                        <!-- Possible Drops -->
                        <div class="data-table-section" style="margin-top: 30px;">
                            <h5 style="color: #FFD700; margin-bottom: 15px;">üíé Possible Drops</h5>
                            <p style="color: #CCC; margin-bottom: 15px;">Dragon's Dungeon will drop 2 different kinds of items:</p>
                            
                            <div class="drops-section">
                                <div class="drop-category">
                                    <h6 style="color: #4ECDC4; margin-bottom: 10px;">1. Power Stones</h6>
                                    <p style="color: #999; font-size: 12px; margin-bottom: 10px;">(1 will and must drop chance per type when it kills 8)</p>
                                    <div class="power-stones">
                                        <span class="stone-item">üîµ</span>
                                        <span class="stone-item">üü£</span>
                                        <span class="stone-item">üü†</span>
                                        <span class="stone-item">üü§</span>
                                        <span class="stone-item">üü¢</span>
                                        <span class="stone-item">üî¥</span>
                                        <span class="stone-item">‚ö´</span>
                                    </div>
                                </div>
                                
                                <div class="drop-category" style="margin-top: 20px;">
                                    <h6 style="color: #FF6B6B; margin-bottom: 10px;">2. Dragon Gear</h6>
                                    <p style="color: #999; font-size: 12px; margin-bottom: 10px;">(1 will and must drop chance per type when it kills 8)</p>
                                    <div class="dragon-gear">
                                        <!-- Rang√©e 1 -->
                                        <div class="gear-row">
                                            <span class="gear-item green">üó°Ô∏è</span>
                                            <span class="gear-item purple">üõ°Ô∏è</span>
                                            <span class="gear-item orange">üèπ</span>
                                            <span class="gear-item purple">üëò</span>
                                            <span class="gear-item green">üîß</span>
                                        </div>
                                        <!-- Rang√©e 2 -->
                                        <div class="gear-row">
                                            <span class="gear-item orange">üí∞</span>
                                            <span class="gear-item orange">üëë</span>
                                            <span class="gear-item orange">üéØ</span>
                                            <span class="gear-item orange">‚öîÔ∏è</span>
                                            <span class="gear-item orange">üëë</span>
                                        </div>
                                        <!-- Rang√©e 3 -->
                                        <div class="gear-row">
                                            <span class="gear-item blue">üîó</span>
                                            <span class="gear-item orange">üõ°Ô∏è</span>
                                            <span class="gear-item orange">‚öîÔ∏è</span>
                                            <span class="gear-item orange">üèπ</span>
                                            <span class="gear-item orange">üî•</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chemins de navigation -->
                    <div class="navigation-paths">
                        <h4>üó∫Ô∏è Chemins de Navigation</h4>
                        
                        <div class="path-tabs">
                            <div class="path-tab active" onclick="showPath('solo')">
                                <span class="path-icon">üë§</span>
                                <span>Chemin Solo</span>
                            </div>
                            <div class="path-tab" onclick="showPath('duo')">
                                <span class="path-icon">üë•</span>
                                <span>Chemin Duo</span>
                            </div>
                        </div>
                        
                        <div class="path-content" id="solo-path">
                            <h5 style="color: #4ECDC4;">üîµ Chemin recommand√© en Solo</h5>
                            <p style="color: #CCC; margin-bottom: 15px;">Parcours optimis√© pour un joueur seul, privil√©giant la s√©curit√© et l'efficacit√©.</p>
                            <div class="path-steps">
                                <div class="step">1. D√©marrage depuis l'entr√©e principale</div>
                                <div class="step">2. Nettoyage m√©thodique zone par zone</div>
                                <div class="step">3. √âviter les zones √† forte concentration de mobs</div>
                                <div class="step">4. Approche prudente du boss depuis les angles morts</div>
                            </div>
                        </div>
                        
                        <div class="path-content" id="duo-path" style="display: none;">
                            <h5 style="color: #FF6B6B;">ÔøΩ Chemin recommand√© en Duo</h5>
                            <p style="color: #CCC; margin-bottom: 15px;">Parcours optimis√© pour deux joueurs, permettant une progression plus agressive.</p>
                            <div class="path-steps">
                                <div class="step">1. S√©paration tactique d√®s l'entr√©e</div>
                                <div class="step">2. Nettoyage simultan√© des deux c√¥t√©s</div>
                                <div class="step">3. Coordination pour les zones denses</div>
                                <div class="step">4. Attaque coordonn√©e du boss depuis les flancs</div>
                            </div>
                        </div>
                    </div>
                        </div>
                    </div>
                    <!-- Fin de la section Dragon -->
                    
                    <!-- Zone pour les futurs donjons -->
                    <div class="future-dungeons">
                        <div style="text-align: center; padding: 40px 20px; background: rgba(76, 205, 196, 0.05); border: 2px dashed #4ECDC4; border-radius: 15px; margin-top: 20px;">
                            <h4 style="color: #4ECDC4; margin-bottom: 15px;">üöß Futurs Modes de Donjon</h4>
                            <p style="color: #CCC; font-style: italic;">D'autres modes de donjon seront ajout√©s ici prochainement...</p>
                            <div style="margin-top: 15px;">
                                <span style="background: rgba(255, 215, 0, 0.1); padding: 8px 16px; border-radius: 20px; color: #FFD700; font-size: 14px;">
                                    üîú En d√©veloppement
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
</html>
