<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arsenal V4 WebPanel - Dashboard Ultime</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Tous les styles et scripts sont intégrés dans ce fichier -->
    <style>
        :root {
            --primary-color: #00fff7;
            --secondary-color: #0088ff;
            --bg-dark: #0a0a0f;
            --card-bg: rgba(255, 255, 255, 0.05);
            --border-color: rgba(0, 255, 247, 0.3);
            --text-primary: #ffffff;
            --text-secondary: #b8c5d1;
            --accent-color: #00fff7;
            --success-color: #00ff88;
            --warning-color: #ffaa00;
            --error-color: #ff4444;
            --hover-color: rgba(0, 255, 247, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Orbitron', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(120deg, var(--bg-dark) 60%, var(--primary-color) 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Particules d'arrière-plan ULTIMATE */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(3px 3px at 20px 30px, #00fff7, transparent),
                radial-gradient(3px 3px at 40px 70px, #ff006e, transparent),
                radial-gradient(2px 2px at 90px 40px, #39ff14, transparent),
                radial-gradient(2px 2px at 130px 80px, #8b5cf6, transparent),
                radial-gradient(1px 1px at 160px 30px, #fff, transparent);
            background-repeat: repeat;
            background-size: 200px 200px;
            animation: particleMatrix 25s linear infinite;
            opacity: 0.4;
            z-index: -1;
            pointer-events: none;
        }

        /* Effet Matrix scanlines */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(0, 255, 247, 0.03) 2px,
                rgba(0, 255, 247, 0.03) 4px
            );
            animation: scanlines 0.1s linear infinite;
            z-index: -1;
            pointer-events: none;
        }

        @keyframes particleMatrix {
            0% { 
                transform: translateY(0px) translateX(0px); 
                filter: hue-rotate(0deg);
            }
            25% { 
                transform: translateY(-100px) translateX(50px); 
                filter: hue-rotate(90deg);
            }
            50% { 
                transform: translateY(-50px) translateX(-30px); 
                filter: hue-rotate(180deg);
            }
            75% { 
                transform: translateY(-150px) translateX(20px); 
                filter: hue-rotate(270deg);
            }
            100% { 
                transform: translateY(0px) translateX(0px); 
                filter: hue-rotate(360deg);
            }
        }

        @keyframes scanlines {
            0% { transform: translateY(0); }
            100% { transform: translateY(4px); }
        }

        @keyframes particleFloat {
            0% { transform: translateY(0px) translateX(0px); }
            33% { transform: translateY(-50px) translateX(30px); }
            66% { transform: translateY(-20px) translateX(-20px); }
            100% { transform: translateY(0px) translateX(0px); }
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 70px;
            background: rgba(10, 15, 28, 0.98);
            backdrop-filter: blur(25px);
            border-bottom: 2px solid #00fff7;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 255, 247, 0.2);
        }

        .logo {
            font-size: 2.5em;
            font-weight: bold;
            color: #00fff7;
            text-shadow: 
                0 0 30px #00fff7, 
                0 0 60px #00eaff,
                0 0 90px #ff006e,
                0 0 120px #8b5cf6;
            letter-spacing: 4px;
            animation: arsenalGlow 3s ease-in-out infinite alternate, glitchEffect 4s infinite;
            position: relative;
            background: linear-gradient(45deg, #00fff7, #ff006e, #39ff14, #00fff7);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: arsenalGlow 3s ease-in-out infinite alternate, glitchEffect 4s infinite, gradientShift 8s ease infinite;
        }

        .logo::before {
            content: 'ARSENAL';
            position: absolute;
            top: 0;
            left: 2px;
            color: #ff006e;
            z-index: -1;
            animation: glitchRed 0.3s infinite;
            opacity: 0.8;
        }

        .logo::after {
            content: 'ARSENAL';
            position: absolute;
            top: 0;
            left: -2px;
            color: #00fff7;
            z-index: -1;
            animation: glitchBlue 0.3s infinite;
            opacity: 0.8;
        }

        @keyframes arsenalGlow {
            from { 
                filter: drop-shadow(0 0 20px #00fff7) drop-shadow(0 0 40px #ff006e);
                transform: scale(1);
            }
            to { 
                filter: drop-shadow(0 0 40px #ff006e) drop-shadow(0 0 80px #00fff7);
                transform: scale(1.05);
            }
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes glitchEffect {
            0%, 90%, 100% { transform: translateX(0); }
            10% { transform: translateX(-2px); }
            20% { transform: translateX(2px); }
            30% { transform: translateX(-1px); }
            40% { transform: translateX(1px); }
        }

        @keyframes glitchRed {
            0%, 90%, 100% { transform: translateX(0); }
            10% { transform: translateX(-1px); }
            20% { transform: translateX(1px); }
        }

        @keyframes glitchBlue {
            0%, 90%, 100% { transform: translateX(0); }
            15% { transform: translateX(1px); }
            25% { transform: translateX(-1px); }
        }

        @keyframes neonGlow {
            from { 
                filter: drop-shadow(0 0 15px #00fff7);
                text-shadow: 0 0 30px #00fff7, 0 0 60px #00eaff;
            }
            to { 
                filter: drop-shadow(0 0 25px #00eaff);
                text-shadow: 0 0 40px #00eaff, 0 0 80px #00fff7;
            }
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(0, 255, 247, 0.1);
            padding: 8px 15px;
            border-radius: 25px;
            border: 1px solid rgba(0, 255, 247, 0.4);
            box-shadow: 0 0 15px rgba(0, 255, 247, 0.2);
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
        }

        .user-info:hover {
            background: rgba(0, 255, 247, 0.15);
            box-shadow: 0 0 20px rgba(0, 255, 247, 0.3);
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            width: 320px;
            background: rgba(10, 15, 28, 0.98);
            border: 2px solid #00fff7;
            border-radius: 15px;
            padding: 20px;
            margin-top: 10px;
            display: none;
            z-index: 10000;
            backdrop-filter: blur(20px);
            box-shadow: 0 10px 40px rgba(0, 255, 247, 0.3);
        }

        .user-dropdown.show {
            display: block;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from { 
                opacity: 0; 
                transform: translateY(-10px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        @keyframes holographicScan {
            0%, 100% { 
                opacity: 0.3;
                transform: translateX(0);
            }
            50% { 
                opacity: 0.7;
                transform: translateX(10px);
            }
        }

        @keyframes borderPulse {
            0% { 
                opacity: 0.4;
                filter: hue-rotate(0deg);
            }
            100% { 
                opacity: 1;
                filter: hue-rotate(360deg);
            }
        }

        @keyframes menuGlow {
            0%, 100% { 
                opacity: 0.5;
                transform: scaleX(0.8);
            }
            50% { 
                opacity: 1;
                transform: scaleX(1.1);
            }
        }

        @keyframes sectionPulse {
            0%, 100% { 
                opacity: 0.4;
                filter: hue-rotate(0deg);
            }
            33% { 
                opacity: 0.8;
                filter: hue-rotate(120deg);
            }
            66% { 
                opacity: 0.6;
                filter: hue-rotate(240deg);
            }
        }

        @keyframes cardBorderFlow {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(0, 255, 247, 0.2);
            }
            25% { 
                box-shadow: 0 0 30px rgba(255, 0, 110, 0.3);
            }
            50% { 
                box-shadow: 0 0 40px rgba(57, 255, 20, 0.3);
            }
            75% { 
                box-shadow: 0 0 35px rgba(139, 92, 246, 0.3);
            }
        }

        @keyframes buttonGradient {
            0%, 100% { 
                background-position: 0% 50%;
            }
            50% { 
                background-position: 100% 50%;
            }
        }

        @keyframes calculatorScan {
            0%, 100% { 
                opacity: 0.3;
                transform: translateX(0);
            }
            50% { 
                opacity: 0.7;
                transform: translateX(20px);
            }
        }

        @keyframes tabGlow {
            0%, 100% { 
                background-position: 0% 50%;
                box-shadow: 0 0 40px rgba(0, 255, 247, 0.6);
            }
            33% { 
                background-position: 50% 50%;
                box-shadow: 0 0 50px rgba(255, 0, 110, 0.6);
            }
            66% { 
                background-position: 100% 50%;
                box-shadow: 0 0 45px rgba(57, 255, 20, 0.6);
            }
        }

        .user-dropdown-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0, 255, 247, 0.3);
        }

        .user-dropdown-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(45deg, #00fff7, #0088ff);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-size: 24px;
        }

        .user-dropdown-name {
            font-weight: bold;
            color: #00fff7;
            margin-bottom: 5px;
        }

        .user-dropdown-role {
            color: #888;
            font-size: 0.9em;
        }

        .user-dropdown-menu {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .user-dropdown-item {
            padding: 12px 15px;
            margin: 5px 0;
            background: var(--card-bg);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-dropdown-item:hover {
            background: rgba(0, 255, 247, 0.1);
            transform: translateX(5px);
        }

        .user-dropdown-item i {
            width: 20px;
            color: #00fff7;
        }

        .account-switch {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(0, 255, 247, 0.3);
        }

        .account-switch-btn {
            width: 100%;
            background: linear-gradient(45deg, #00fff7, #0088ff);
            border: none;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .account-switch-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 255, 247, 0.4);
        }

        .user-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: linear-gradient(45deg, #00fff7, #0088ff);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 10px rgba(0, 255, 247, 0.5);
        }

        /* Theme Selector Styles */
        .theme-selector {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(0, 255, 247, 0.3);
        }

        .theme-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .theme-option {
            text-align: center;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .theme-option:hover, .theme-option.active {
            border-color: #00fff7;
            background: rgba(0, 255, 247, 0.1);
        }

        .theme-preview {
            width: 30px;
            height: 20px;
            border-radius: 4px;
            margin: 0 auto 5px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .theme-name {
            font-size: 0.75em;
            color: #ccc;
        }

        /* Theme Previews */
        .theme-preview.arsenal { background: linear-gradient(45deg, #00fff7, #0088ff); }
        .theme-preview.matrix { background: linear-gradient(45deg, #00ff00, #66ff66); }
        .theme-preview.galaxy { background: linear-gradient(45deg, #9d4edd, #c77dff); }
        .theme-preview.fire { background: linear-gradient(45deg, #ff6b35, #f7931e); }
        .theme-preview.ocean { background: linear-gradient(45deg, #0077be, #00a8cc); }
        .theme-preview.sunset { background: linear-gradient(45deg, #ff6b6b, #ffa726); }
        .theme-preview.neon { background: linear-gradient(45deg, #ff1744, #e91e63); }
        .theme-preview.cyber { background: linear-gradient(45deg, #673ab7, #3f51b5); }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 70px;
            left: -300px;
            width: 300px;
            height: calc(100vh - 70px);
            background: linear-gradient(145deg, rgba(10, 15, 28, 0.95), rgba(20, 25, 40, 0.9));
            backdrop-filter: blur(25px);
            border-right: 2px solid var(--primary-color);
            border-image: linear-gradient(180deg, #00fff7 0%, #ff006e 50%, #39ff14 100%) 1;
            box-shadow: 
                4px 0 30px rgba(0, 255, 247, 0.3),
                inset -1px 0 0 rgba(255, 255, 255, 0.1),
                0 0 50px rgba(57, 255, 20, 0.1);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 999;
            overflow-y: auto;
            position: relative;
        }

        .sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(
                    90deg,
                    transparent,
                    transparent 2px,
                    rgba(0, 255, 247, 0.05) 2px,
                    rgba(0, 255, 247, 0.05) 4px
                );
            animation: holographicScan 3s ease-in-out infinite;
            pointer-events: none;
        }

        .sidebar::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 1px;
            height: 100%;
            background: linear-gradient(
                180deg,
                transparent 0%,
                #00fff7 20%,
                #ff006e 50%,
                #39ff14 80%,
                transparent 100%
            );
            animation: borderPulse 2s ease-in-out infinite alternate;
        }

        .sidebar.open {
            left: 0;
            box-shadow: 
                4px 0 40px rgba(0, 255, 247, 0.5),
                inset -1px 0 0 rgba(255, 255, 255, 0.2),
                0 0 80px rgba(57, 255, 20, 0.2);
            transform: translateZ(0);
        }

        .sidebar-toggle {
            background: linear-gradient(45deg, transparent, rgba(0, 255, 247, 0.1));
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            padding: 12px 18px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-size: 1.1em;
            position: relative;
            overflow: hidden;
            text-shadow: 0 0 10px currentColor;
        }

        .sidebar-toggle::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(0, 255, 247, 0.4),
                transparent
            );
            transition: left 0.6s ease;
        }

        .sidebar-toggle:hover::before {
            left: 100%;
        }

        .sidebar-toggle:hover {
            background: linear-gradient(45deg, var(--primary-color), #ff006e);
            color: var(--bg-dark);
            box-shadow: 
                0 0 30px var(--hover-color),
                0 0 50px rgba(0, 255, 247, 0.3),
                inset 0 0 20px rgba(255, 255, 255, 0.1);
            transform: scale(1.08) translateY(-2px);
            border-color: #00fff7;
            text-shadow: 0 0 15px var(--bg-dark);
        }

        .sidebar-menu {
            padding: 25px 0;
            position: relative;
        }

        .sidebar-menu::before {
            content: '';
            position: absolute;
            top: 0;
            left: 10px;
            right: 10px;
            height: 1px;
            background: linear-gradient(90deg, transparent, #00fff7, #ff006e, #39ff14, transparent);
            animation: menuGlow 3s ease-in-out infinite;
        }

        .menu-section {
            margin-bottom: 35px;
            position: relative;
            padding: 15px 20px;
            border-radius: 12px;
            background: linear-gradient(135deg, rgba(0, 255, 247, 0.05), rgba(255, 0, 110, 0.05));
            border: 1px solid rgba(0, 255, 247, 0.2);
            transition: all 0.3s ease;
        }

        .menu-section:hover {
            background: linear-gradient(135deg, rgba(0, 255, 247, 0.1), rgba(255, 0, 110, 0.1));
            border-color: rgba(0, 255, 247, 0.4);
            box-shadow: 
                0 0 20px rgba(0, 255, 247, 0.2),
                inset 0 0 20px rgba(255, 255, 255, 0.05);
            transform: translateX(5px);
        }

        .menu-section::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 3px;
            height: 100%;
            background: linear-gradient(180deg, transparent, var(--primary-color), #ff006e, #39ff14, transparent);
            opacity: 0.6;
            border-radius: 0 3px 3px 0;
            animation: sectionPulse 4s ease-in-out infinite;
        }

        .menu-title {
            color: var(--primary-color);
            font-size: 0.9em;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 0 20px 10px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 15px;
            text-shadow: 0 0 10px var(--primary-color);
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            color: var(--text-secondary);
            position: relative;
            overflow: hidden;
        }

        .menu-item::before {
            content: '';
            position: absolute;
            left: -100%;
            top: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, var(--hover-color), transparent);
            transition: left 0.5s ease;
        }

        .menu-item:hover::before {
            left: 100%;
        }

        .menu-item:hover, .menu-item.active {
            background: var(--hover-color);
            border-left-color: var(--primary-color);
            color: var(--primary-color);
            transform: translateX(5px);
        }

        .menu-item i {
            width: 20px;
            margin-right: 15px;
            font-size: 1.1em;
        }

        /* Main Content */
        .main-content {
            margin-top: 70px;
            margin-left: 0;
            padding: 30px;
            transition: all 0.3s ease;
            min-height: calc(100vh - 70px);
        }

        .main-content.sidebar-open {
            margin-left: 300px;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .page-title {
            font-size: 2.5em;
            font-weight: bold;
            background: linear-gradient(45deg, #00ff88, #0088ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .breadcrumb {
            color: #888;
            font-size: 0.9em;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .card {
            background: linear-gradient(135deg, 
                rgba(10, 15, 28, 0.9) 0%, 
                rgba(20, 25, 40, 0.8) 50%, 
                rgba(15, 20, 35, 0.9) 100%);
            border: 2px solid var(--primary-color);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(25px);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 0 50px rgba(0, 255, 247, 0.2),
                inset 0 0 50px rgba(255, 255, 255, 0.03),
                0 20px 40px rgba(0, 0, 0, 0.4);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, 
                transparent, 
                #00fff7 20%, 
                #ff006e 50%, 
                #39ff14 80%, 
                transparent);
            transition: left 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            animation: cardBorderFlow 4s ease-in-out infinite;
        }

        .card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 2px,
                    rgba(0, 255, 247, 0.02) 2px,
                    rgba(0, 255, 247, 0.02) 4px
                );
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover::before {
            left: 100%;
        }

        .card:hover::after {
            opacity: 1;
        }

        .card:hover {
            border-color: #00fff7;
            border-image: linear-gradient(45deg, #00fff7, #ff006e, #39ff14, #8b5cf6) 1;
            box-shadow: 
                0 0 80px rgba(0, 255, 247, 0.4),
                0 0 120px rgba(255, 0, 110, 0.2),
                inset 0 0 60px rgba(255, 255, 255, 0.1),
                0 30px 60px rgba(0, 0, 0, 0.6);
            transform: translateY(-8px) scale(1.02);
            background: linear-gradient(135deg, 
                rgba(15, 20, 35, 0.95) 0%, 
                rgba(25, 30, 45, 0.9) 50%, 
                rgba(20, 25, 40, 0.95) 100%);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .card-title {
            color: #00ff88;
            font-size: 1.3em;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-icon {
            font-size: 1.5em;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #fff;
            margin: 10px 0;
        }

        .stat-label {
            color: #888;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 15px 0;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--success-color);
            animation: pulse 2s ease-in-out infinite;
        }

        .status-dot.online { background: var(--success-color); }
        .status-dot.offline { background: var(--error-color); }
        .status-dot.warning { background: var(--warning-color); }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.1); }
        }

        /* Switch Styles */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--success-color);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        /* Buttons */
        .btn {
            background: linear-gradient(45deg, #00fff7, #ff006e, #39ff14);
            background-size: 200% 200%;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1em;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            margin: 8px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 
                0 0 30px rgba(0, 255, 247, 0.3),
                inset 0 0 30px rgba(255, 255, 255, 0.1);
            animation: buttonGradient 3s ease-in-out infinite;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.4),
                transparent
            );
            transition: left 0.6s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: scale(1.08) translateY(-3px);
            box-shadow: 
                0 0 50px rgba(0, 255, 247, 0.6),
                0 0 80px rgba(255, 0, 110, 0.4),
                0 20px 40px rgba(0, 0, 0, 0.3),
                inset 0 0 50px rgba(255, 255, 255, 0.2);
            background-position: 100% 100%;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
        }

        .btn-secondary {
            background: linear-gradient(45deg, rgba(0, 255, 247, 0.2), rgba(255, 0, 110, 0.2));
            border: 2px solid rgba(0, 255, 247, 0.5);
            color: #00fff7;
            box-shadow: 
                0 0 25px rgba(0, 255, 247, 0.2),
                inset 0 0 25px rgba(255, 255, 255, 0.05);
        }

        .btn-secondary:hover {
            background: linear-gradient(45deg, rgba(0, 255, 247, 0.4), rgba(255, 0, 110, 0.4));
            border-color: #00fff7;
            color: white;
            text-shadow: 0 0 10px #00fff7;
        }

        /* Activity Feed */
        .activity-feed {
            max-height: 400px;
            overflow-y: auto;
        }

        .activity-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-left: 3px solid #00ff88;
            background: rgba(255, 255, 255, 0.02);
            margin-bottom: 10px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .activity-item:hover {
            background: rgba(0, 255, 136, 0.1);
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, #00ff88, #0088ff);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
        }

        .activity-content {
            flex: 1;
        }

        .activity-text {
            font-size: 0.95em;
            margin-bottom: 5px;
        }

        .activity-time {
            font-size: 0.8em;
            color: #888;
        }

        /* Footer */
        .footer {
            background: rgba(10, 10, 10, 0.95);
            border-top: 1px solid rgba(0, 255, 136, 0.3);
            padding: 30px 0;
            margin-top: 50px;
            text-align: center;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .footer-logo {
            font-size: 1.5em;
            font-weight: bold;
            background: linear-gradient(45deg, #00ff88, #0088ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
        }

        .footer-text {
            color: #888;
            font-size: 0.9em;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                left: -100%;
            }
            
            .main-content.sidebar-open {
                margin-left: 0;
            }
            
            .header {
                padding: 0 15px;
            }
            
            .main-content {
                padding: 20px 15px;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Content Pages */
        .content-page {
            display: none;
        }
        
        .content-page.active {
            display: block;
        }

        /* Charts placeholder */
        .chart-container {
            height: 300px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px dashed rgba(0, 255, 136, 0.3);
        }

        /* Command Help Styles */
        .command-help-item {
            background: rgba(255, 255, 255, 0.02);
            padding: 12px;
            border-radius: 8px;
            border-left: 3px solid #00fff7;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .command-help-item:hover {
            background: rgba(0, 255, 247, 0.05);
            transform: translateX(5px);
        }

        .command-card[data-category="music"] .card-title {
            color: #ff6b9d;
        }

        .command-card[data-category="moderation"] .card-title {
            color: #ff4757;
        }

        .command-card[data-category="economy"] .card-title {
            color: #ffa502;
        }

        .command-card[data-category="casino"] .card-title {
            color: #ff3838;
        }

        .command-card[data-category="utility"] .card-title {
            color: #3742fa;
        }

        .command-card[data-category="admin"] .card-title {
            color: #ffd700;
        }

        /* Search Input Focus */
        #commandSearch:focus {
            outline: none;
            border-color: #00fff7;
            box-shadow: 0 0 15px rgba(0, 255, 247, 0.3);
        }

        /* Enhanced Button Styles */
        .btn-danger {
            background: linear-gradient(45deg, #ff4757, #ff3742);
        }

        .btn-warning {
            background: linear-gradient(45deg, #ffa502, #ff6348);
        }

        .btn-info {
            background: linear-gradient(45deg, #3742fa, #2f3542);
        }

        /* Security Indicators */
        .security-high {
            color: #00ff88;
            text-shadow: 0 0 10px #00ff88;
        }

        .security-medium {
            color: #ffaa00;
            text-shadow: 0 0 10px #ffaa00;
        }

        .security-low {
            color: #ff4444;
            text-shadow: 0 0 10px #ff4444;
        }

        /* Module Status */
        .module-active {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.3);
        }

        .module-inactive {
            background: rgba(255, 68, 68, 0.1);
            border: 1px solid rgba(255, 68, 68, 0.3);
        }

        .module-dev {
            background: rgba(255, 170, 0, 0.1);
            border: 1px solid rgba(255, 170, 0, 0.3);
        }

        /* Backup List Styles */
        .backup-item {
            transition: all 0.3s ease;
        }

        .backup-item:hover {
            transform: scale(1.02);
            background: rgba(0, 255, 247, 0.1) !important;
        }

        /* Performance Indicators */
        .perf-good {
            color: var(--success-color);
        }

        .perf-warning {
            color: var(--warning-color);
        }

        .perf-critical {
            color: var(--error-color);
        }

        /* Servers List in Sidebar */
        .servers-list {
            max-height: 200px;
            overflow-y: auto;
            padding: 10px 0;
        }

        .server-item {
            display: flex;
            align-items: center;
            padding: 8px 15px;
            margin: 5px 0;
            background: var(--card-bg);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .server-item:hover {
            background: var(--hover-color);
            border-left-color: var(--primary-color);
            transform: translateX(5px);
        }

        .server-item.selected {
            background: var(--hover-color);
            border-left-color: var(--primary-color);
        }

        .server-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00fff7, #0088ff);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 10px;
            font-size: 14px;
        }

        .server-info {
            flex: 1;
            min-width: 0;
        }

        .server-name {
            font-size: 0.9em;
            font-weight: bold;
            color: white;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .server-members {
            font-size: 0.75em;
            color: #888;
        }

        .server-status {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #00ff88;
            margin-left: 5px;
        }

        .server-status.offline {
            background: #ff4444;
        }

        .loading-servers {
            text-align: center;
            color: #888;
            padding: 20px;
        }

        /* Scrollbar for servers list */
        .servers-list::-webkit-scrollbar {
            width: 4px;
        }

        .servers-list::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 2px;
        }

        .servers-list::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 247, 0.3);
            border-radius: 2px;
        }

        .servers-list::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 255, 247, 0.5);
        }

        /* Server Configuration Styles */
        .servers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px 0;
        }

        .server-card {
            background: linear-gradient(135deg, rgba(0, 255, 247, 0.1), rgba(0, 136, 255, 0.1));
            border: 1px solid rgba(0, 255, 247, 0.3);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .server-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 255, 247, 0.3);
            border-color: #00fff7;
        }

        .server-card.selected {
            background: linear-gradient(135deg, rgba(0, 255, 247, 0.2), rgba(0, 136, 255, 0.2));
            border-color: #00fff7;
            box-shadow: 0 0 20px rgba(0, 255, 247, 0.4);
        }

        .server-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #00fff7, #0088ff);
        }

        .server-card-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .server-card-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00fff7, #0088ff);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
        }

        .server-card-info h3 {
            margin: 0;
            color: #00fff7;
            font-size: 1.2em;
        }

        .server-card-info p {
            margin: 5px 0 0 0;
            color: #888;
            font-size: 0.9em;
        }

        .server-card-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .server-stat {
            text-align: center;
        }

        .server-stat-value {
            font-size: 1.3em;
            font-weight: bold;
            color: #00ff88;
        }

        .server-stat-label {
            font-size: 0.8em;
            color: #888;
        }

        /* Configuration Tabs */
        .config-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .config-tab {
            background: none;
            border: none;
            color: #888;
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .config-tab.active {
            color: #00fff7;
            border-bottom-color: #00fff7;
        }

        .config-tab:hover {
            color: #00fff7;
        }

        .config-tab-content {
            display: none;
        }

        .config-tab-content.active {
            display: block;
        }

        .config-section {
            margin-bottom: 30px;
        }

        .config-section h3 {
            color: #00fff7;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .config-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .config-row label {
            color: white;
            font-weight: 500;
        }

        .config-input, .config-select {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 247, 0.3);
            border-radius: 5px;
            padding: 8px 12px;
            color: white;
            min-width: 200px;
        }

        .config-input:focus, .config-select:focus {
            outline: none;
            border-color: #00fff7;
            box-shadow: 0 0 10px rgba(0, 255, 247, 0.3);
        }

        .config-slider {
            width: 150px;
            accent-color: #00fff7;
        }

        .config-actions {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            gap: 15px;
        }

        .btn-success {
            background: linear-gradient(135deg, #00ff88, #00cc6a);
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #00cc6a, #00ff88);
        }

        /* Switch Toggle */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #333;
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #00fff7;
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #00ff88;
        }

        .stat-label {
            font-size: 0.8em;
            color: #888;
            margin-top: 5px;
        }
        /* ==================== CALCULATOR STYLES ==================== */
        .calculator-container {
            background: linear-gradient(135deg, 
                rgba(10, 15, 28, 0.95) 0%, 
                rgba(20, 25, 40, 0.9) 50%, 
                rgba(15, 20, 35, 0.95) 100%);
            border-radius: 20px;
            padding: 35px;
            margin-top: 25px;
            border: 2px solid var(--primary-color);
            border-image: linear-gradient(45deg, #00fff7, #ff006e, #39ff14, #8b5cf6) 1;
            backdrop-filter: blur(25px);
            box-shadow: 
                0 0 60px rgba(0, 255, 247, 0.3),
                inset 0 0 60px rgba(255, 255, 255, 0.05),
                0 25px 50px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
        }

        .calculator-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(
                    90deg,
                    transparent,
                    transparent 2px,
                    rgba(0, 255, 247, 0.03) 2px,
                    rgba(0, 255, 247, 0.03) 4px
                );
            pointer-events: none;
            animation: calculatorScan 5s ease-in-out infinite;
        }

        .calculator-tabs {
            display: flex;
            gap: 15px;
            margin-bottom: 35px;
            flex-wrap: wrap;
            position: relative;
            z-index: 2;
        }

        .calc-tab {
            background: linear-gradient(45deg, rgba(0, 255, 247, 0.1), rgba(255, 0, 110, 0.1));
            border: 2px solid var(--border-color);
            color: var(--text-primary);
            padding: 15px 25px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-family: inherit;
            font-size: 15px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 0 20px rgba(0, 255, 247, 0.1);
        }

        .calc-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(0, 255, 247, 0.3),
                transparent
            );
            transition: left 0.6s ease;
        }

        .calc-tab:hover::before {
            left: 100%;
        }

        .calc-tab:hover {
            background: linear-gradient(45deg, rgba(0, 255, 247, 0.2), rgba(255, 0, 110, 0.2));
            border-color: var(--primary-color);
            box-shadow: 
                0 0 30px rgba(0, 255, 247, 0.4),
                inset 0 0 20px rgba(255, 255, 255, 0.1);
            transform: translateY(-3px) scale(1.05);
            text-shadow: 0 0 10px currentColor;
        }

        .calc-tab.active {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color), #39ff14);
            background-size: 200% 200%;
            border-color: var(--primary-color);
            box-shadow: 
                0 0 40px rgba(0, 255, 247, 0.6),
                0 0 60px rgba(255, 0, 110, 0.3),
                inset 0 0 30px rgba(255, 255, 255, 0.2);
            animation: tabGlow 3s ease-in-out infinite;
            color: white;
            text-shadow: 0 0 15px rgba(0, 0, 0, 0.8);
        }

        .calc-content {
            display: none;
        }

        .calc-content.active {
            display: block;
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        .calc-section {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(0, 255, 247, 0.1);
        }

        .calc-section.full-width {
            grid-column: 1 / -1;
        }

        .calc-section h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
        }

        .gems-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }

        .gem-item {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid transparent;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .gem-item:hover {
            border-color: var(--primary-color);
            background: var(--hover-color);
            transform: translateY(-2px);
        }

        .gem-item.selected {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, rgba(0, 255, 247, 0.2), rgba(0, 136, 255, 0.2));
            box-shadow: 0 0 15px rgba(0, 255, 247, 0.3);
        }

        .gem-icon {
            font-size: 24px;
            margin-bottom: 8px;
            display: block;
        }

        .gem-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--text-primary);
        }

        .gem-power {
            color: var(--primary-color);
            font-size: 12px;
        }

        .equipment-config {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .equipment-item {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .equipment-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 15px;
            color: var(--accent-color);
            font-weight: bold;
        }

        .level-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .level-button {
            background: var(--primary-color);
            border: none;
            color: var(--bg-dark);
            width: 30px;
            height: 30px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .level-button:hover {
            background: var(--secondary-color);
            transform: scale(1.1);
        }

        .level-display {
            background: rgba(0, 255, 247, 0.1);
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid var(--primary-color);
            min-width: 90px;
            text-align: center;
            color: var(--primary-color);
            font-weight: bold;
            font-size: 14px;
        }

        .slots-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
        }

        .slot {
            width: 35px;
            height: 35px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .slot:hover {
            border-color: var(--primary-color);
            background: var(--hover-color);
        }

        .slot.filled {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border-color: var(--primary-color);
            color: var(--bg-dark);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .result-card {
            background: linear-gradient(135deg, rgba(0, 255, 247, 0.1), rgba(0, 136, 255, 0.1));
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .result-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 255, 247, 0.2);
        }

        .result-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .result-value {
            font-size: 28px;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .result-label {
            color: var(--text-secondary);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .coming-soon {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .coming-soon i {
            font-size: 64px;
            color: var(--primary-color);
            margin-bottom: 20px;
            opacity: 0.7;
        }

        .coming-soon h3 {
            color: var(--text-primary);
            margin-bottom: 10px;
            font-size: 24px;
        }

        .coming-soon p {
            font-size: 16px;
            opacity: 0.8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .calculator-grid {
                grid-template-columns: 1fr;
            }
            
            .equipment-config {
                grid-template-columns: 1fr;
            }
            
            .results-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 480px) {
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .calculator-tabs {
                flex-direction: column;
            }
        }

    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div style="display: flex; align-items: center; gap: 20px;">
            <button class="sidebar-toggle" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </button>
            <div class="logo">ARSENAL</div>
            <!-- Signature discrète développeur - XeRoX © -->
            <div style="position: absolute; opacity: 0; font-size: 1px; color: transparent; user-select: none; pointer-events: none;">XeRoX - Developed by XeRoX © 2024-2025 All Rights Reserved</div>
        </div>
        
        <div class="header-controls">
            <div class="user-info" onclick="toggleUserDropdown()" id="userInfo">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div>
                    <div style="font-weight: bold;" id="userDisplayName">Utilisateur</div>
                    <div style="font-size: 0.8em; color: #888;" id="userDisplayRole">Membre</div>
                </div>
                <i class="fas fa-chevron-down" style="margin-left: 10px; transition: transform 0.3s ease;" id="userDropdownChevron"></i>
                
                <!-- User Dropdown -->
                <div class="user-dropdown" id="userDropdown">
                    <div class="user-dropdown-header">
                        <div class="user-dropdown-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="user-dropdown-name" id="dropdownUserName">Utilisateur</div>
                        <div class="user-dropdown-role" id="dropdownUserRole">Membre</div>
                    </div>
                    
                    <ul class="user-dropdown-menu">
                        <li class="user-dropdown-item" onclick="showUserProfile()">
                            <i class="fas fa-user-circle"></i>
                            <span>Mon Profil</span>
                        </li>
                        <li class="user-dropdown-item" onclick="showThemeSelector()">
                            <i class="fas fa-palette"></i>
                            <span>Thèmes Interface</span>
                        </li>
                        <li class="user-dropdown-item" onclick="showMixThemeSelector()">
                            <i class="fas fa-magic"></i>
                            <span>🎨 Thème Mixte</span>
                        </li>
                        <li class="user-dropdown-item" onclick="showUserSettings()">
                            <i class="fas fa-cog"></i>
                            <span>Paramètres</span>
                        </li>
                        <li class="user-dropdown-item" onclick="showUserPermissions()">
                            <i class="fas fa-shield-alt"></i>
                            <span>Permissions</span>
                        </li>
                        <li class="user-dropdown-item" onclick="showUserActivity()">
                            <i class="fas fa-history"></i>
                            <span>Activité</span>
                        </li>
                        <li class="user-dropdown-item" onclick="showUserSecurity()">
                            <i class="fas fa-lock"></i>
                            <span>Sécurité</span>
                        </li>
                    </ul>
                    
                    <!-- Theme Selector -->
                    <div class="theme-selector" id="themeSelector" style="display: none;">
                        <div style="color: #00fff7; font-weight: bold; margin-bottom: 15px; text-align: center;">
                            <i class="fas fa-palette"></i> Sélectionner un Thème
                        </div>
                        <div class="theme-grid">
                            <div class="theme-option active" data-theme="arsenal" onclick="changeTheme('arsenal')">
                                <div class="theme-preview arsenal"></div>
                                <div class="theme-name">Arsenal</div>
                            </div>
                            <div class="theme-option" data-theme="matrix" onclick="changeTheme('matrix')">
                                <div class="theme-preview matrix"></div>
                                <div class="theme-name">Matrix</div>
                            </div>
                            <div class="theme-option" data-theme="galaxy" onclick="changeTheme('galaxy')">
                                <div class="theme-preview galaxy"></div>
                                <div class="theme-name">Galaxy</div>
                            </div>
                            <div class="theme-option" data-theme="fire" onclick="changeTheme('fire')">
                                <div class="theme-preview fire"></div>
                                <div class="theme-name">Fire</div>
                            </div>
                            <div class="theme-option" data-theme="ocean" onclick="changeTheme('ocean')">
                                <div class="theme-preview ocean"></div>
                                <div class="theme-name">Ocean</div>
                            </div>
                            <div class="theme-option" data-theme="sunset" onclick="changeTheme('sunset')">
                                <div class="theme-preview sunset"></div>
                                <div class="theme-name">Sunset</div>
                            </div>
                            <div class="theme-option" data-theme="neon" onclick="changeTheme('neon')">
                                <div class="theme-preview neon"></div>
                                <div class="theme-name">Neon</div>
                            </div>
                            <div class="theme-option" data-theme="cyber" onclick="changeTheme('cyber')">
                                <div class="theme-preview cyber"></div>
                                <div class="theme-name">Cyber</div>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 15px;">
                            <button onclick="hideThemeSelector()" style="background: rgba(255,255,255,0.1); border: 1px solid #00fff7; color: #00fff7; padding: 8px 16px; border-radius: 5px; cursor: pointer;">
                                Retour
                            </button>
                        </div>
                    </div>
                    
                    <div class="account-switch">
                        <div style="color: #888; font-size: 0.9em; margin-bottom: 10px; text-align: center;">
                            <i class="fas fa-exchange-alt"></i> Changer de compte
                        </div>
                        <button class="account-switch-btn" onclick="switchAccount()">
                            <i class="fas fa-user-plus"></i> Connecter un autre compte
                        </button>
                    </div>
                    
                    <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(0, 255, 247, 0.3);">
                        <div class="user-dropdown-item" onclick="logout()" style="color: #ff4444;">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Déconnexion</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-menu">
            <div class="menu-section">
                <div class="menu-title">Tableau de Bord</div>
                <div class="menu-item active" onclick="showPage('dashboard', this)">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Vue d'ensemble</span>
                </div>
                <div class="menu-item" onclick="showPage('analytics', this)">
                    <i class="fas fa-chart-line"></i>
                    <span>Analytiques</span>
                </div>
                <div class="menu-item" onclick="showPage('realtime', this)">
                    <i class="fas fa-bolt"></i>
                    <span>Temps Réel</span>
                </div>
            </div>

            <div class="menu-section">
                <div class="menu-title">🌐 Serveurs Connectés</div>
                <div class="servers-list" id="servers-list">
                    <!-- Liste des serveurs chargée dynamiquement -->
                    <div class="loading-servers">
                        <i class="fas fa-spinner fa-spin"></i> Chargement...
                    </div>
                </div>
            </div>

            <div class="menu-section">
                <div class="menu-title">Gestion Bot</div>
                <div class="menu-item" onclick="showPage('servers', this)">
                    <i class="fas fa-server"></i>
                    <span>Serveurs</span>
                </div>
                <div class="menu-item" onclick="showPage('users', this)">
                    <i class="fas fa-users"></i>
                    <span>Utilisateurs</span>
                </div>
                <div class="menu-item" onclick="showPage('commands', this)">
                    <i class="fas fa-terminal"></i>
                    <span>Commandes</span>
                </div>
                <div class="menu-item" onclick="showPage('moderation', this)">
                    <i class="fas fa-shield-alt"></i>
                    <span>Modération</span>
                </div>
                <div class="menu-item" onclick="showPage('automod', this)">
                    <i class="fas fa-robot"></i>
                    <span>Auto-Mod</span>
                </div>
                <div class="menu-item" onclick="showPage('security', this)">
                    <i class="fas fa-lock"></i>
                    <span>Sécurité</span>
                </div>
            </div>

            <div class="menu-section">
                <div class="menu-title">Fonctionnalités</div>
                <div class="menu-item" onclick="showPage('music', this)">
                    <i class="fas fa-music"></i>
                    <span>Musique</span>
                </div>
                <div class="menu-item" onclick="showPage('economy', this)">
                    <i class="fas fa-coins"></i>
                    <span>Économie</span>
                </div>
                <div class="menu-item" onclick="showPage('games', this)">
                    <i class="fas fa-gamepad"></i>
                    <span>Mini-Jeux</span>
                </div>
                <div class="menu-item" onclick="openCasino()">
                    <i class="fas fa-dice"></i>
                    <span>🎰 Casino</span>
                </div>
                <div class="menu-item" onclick="showPage('calculator', this)">
                    <i class="fas fa-calculator"></i>
                    <span>🔢 SuperCalculator</span>
                </div>
                <div class="menu-item" onclick="showPage('backup', this)">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span>💾 Backup</span>
                </div>
                <div class="menu-item" onclick="showPage('bridges', this)">
                    <i class="fas fa-bridge"></i>
                    <span>🌉 Ponts Inter-Serveur</span>
                </div>
                <div class="menu-item" onclick="showPage('hub', this)">
                    <i class="fas fa-network-wired"></i>
                    <span>🌐 Hub Config</span>
                </div>
            </div>

            <div class="menu-section">
                <div class="menu-title">Système</div>
                <div class="menu-item" onclick="showPage('botinfo', this)">
                    <i class="fas fa-info-circle"></i>
                    <span>ℹ️ Info Bot</span>
                </div>
                <div class="menu-item" onclick="showPage('help', this)">
                    <i class="fas fa-question-circle"></i>
                    <span>📖 Help Commandes</span>
                </div>
                <div class="menu-item" onclick="showPage('performance', this)">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>⚡ Performance</span>
                </div>
            </div>

            <div class="menu-section">
                <div class="menu-title">Configuration</div>
                <div class="menu-item" onclick="showPage('settings', this)">
                    <i class="fas fa-cog"></i>
                    <span>Paramètres</span>
                </div>
                <div class="menu-item" onclick="showPage('logs', this)">
                    <i class="fas fa-file-alt"></i>
                    <span>Logs</span>
                </div>
                <div class="menu-item" onclick="showPage('database', this)">
                    <i class="fas fa-database"></i>
                    <span>Base de Données</span>
                </div>
                <div class="menu-item" onclick="showPage('api', this)">
                    <i class="fas fa-code"></i>
                    <span>API</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        
        <!-- Dashboard Page -->
        <div class="content-page active" id="dashboard">
            <div class="page-header">
                <div>
                    <div class="page-title">Tableau de Bord</div>
                    <div class="breadcrumb">Accueil > Vue d'ensemble</div>
                </div>
                <button class="btn" onclick="refreshDashboard()">
                    <i class="fas fa-sync-alt"></i> Actualiser
                </button>
            </div>

            <div class="dashboard-grid">
                <!-- Status Cards -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-robot card-icon"></i>
                            Status Bot
                        </div>
                    </div>
                    <div class="status-indicator">
                        <div class="status-dot online" id="bot-status"></div>
                        <span id="bot-text">En ligne</span>
                    </div>
                    <div style="font-size: 0.9em; color: #888;">
                        Dernière connexion: <span id="last-online"><i class="fas fa-spinner fa-spin"></i></span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-server card-icon"></i>
                            Serveurs
                        </div>
                    </div>
                    <div class="stat-number" id="servers-count">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Serveurs actifs</div>
                    <div style="margin-top: 10px;" id="servers-change">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-users card-icon"></i>
                            Utilisateurs
                        </div>
                    </div>
                    <div class="stat-number" id="users-count">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Utilisateurs total</div>
                    <div style="margin-top: 10px;" id="users-change">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-bolt card-icon"></i>
                            Commandes
                        </div>
                    </div>
                    <div class="stat-number" id="commands-count">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Commandes exécutées</div>
                    <div style="margin-top: 10px;" id="commands-change">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                </div>

                <!-- Performance Card -->
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-area card-icon"></i>
                            Performance Système
                        </div>
                        <button class="btn btn-secondary">
                            <i class="fas fa-expand"></i> Détails
                        </button>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                        <div>
                            <div style="font-size: 1.5em; font-weight: bold; color: #ff6b6b;" id="cpu-usage">
                                <i class="fas fa-spinner fa-spin"></i>
                            </div>
                            <div style="color: #888;">CPU Usage</div>
                        </div>
                        <div>
                            <div style="font-size: 1.5em; font-weight: bold; color: #ffa500;" id="ram-usage">
                                <i class="fas fa-spinner fa-spin"></i>
                            </div>
                            <div style="color: #888;">RAM Usage</div>
                        </div>
                        <div>
                            <div style="font-size: 1.5em; font-weight: bold; color: #00ff88;" id="uptime">
                                <i class="fas fa-spinner fa-spin"></i>
                            </div>
                            <div style="color: #888;">Uptime</div>
                        </div>
                        <div>
                            <div style="font-size: 1.5em; font-weight: bold; color: #ffa500;" id="discord-latency">
                                <i class="fas fa-spinner fa-spin"></i>
                            </div>
                            <div style="color: #888;">Latence Discord</div>
                        </div>
                    </div>
                </div>

                <!-- Activity Feed -->
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-history card-icon"></i>
                            Activité Récente
                        </div>
                        <button class="btn btn-secondary" onclick="loadActivity()">
                            <i class="fas fa-sync"></i> Actualiser
                        </button>
                    </div>
                    <div class="activity-feed" id="activity-feed">
                        <!-- Activity items will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics Page -->
        <div class="content-page" id="analytics">
            <div class="page-header">
                <div>
                    <div class="page-title">📊 Analytics Manager</div>
                    <div class="breadcrumb">Accueil > Analytics</div>
                </div>
                <button class="btn" onclick="refreshAnalytics()">
                    <i class="fas fa-sync"></i> Actualiser
                </button>
            </div>
            
            <div class="dashboard-grid">
                <!-- Vue d'ensemble analytics -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-pie card-icon"></i>
                            Vue d'Ensemble
                        </div>
                    </div>
                    <div class="stat-number" id="analytics-total-points">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Points de données collectés</div>
                    <div class="stat-number" style="font-size: 1.5em; margin-top: 15px;" id="analytics-servers">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Serveurs trackés</div>
                </div>
                
                <!-- Métriques temps réel -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-bolt card-icon"></i>
                            Temps Réel
                        </div>
                    </div>
                    <div class="stat-number" id="analytics-events-today">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Événements aujourd'hui</div>
                    <div class="stat-number" style="font-size: 1.5em; margin-top: 15px;" id="analytics-active-users">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Utilisateurs actifs</div>
                </div>

                <!-- Tendances d'activité -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-line card-icon"></i>
                            Tendances d'Activité
                        </div>
                    </div>
                    <div id="activity-trends">
                        <div style="margin: 10px 0;">
                            <div style="display: flex; justify-content: space-between; margin: 8px 0;">
                                <span>Messages</span>
                                <span style="color: #00ff88;" id="messages-trend">--</span>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); height: 8px; border-radius: 4px;">
                                <div style="background: linear-gradient(90deg, #00ff88, #0088ff); height: 100%; width: 0%; border-radius: 4px;" id="messages-bar"></div>
                            </div>
                        </div>
                        <div style="margin: 10px 0;">
                            <div style="display: flex; justify-content: space-between; margin: 8px 0;">
                                <span>Temps vocal</span>
                                <span style="color: #0088ff;" id="voice-trend">--</span>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); height: 8px; border-radius: 4px;">
                                <div style="background: linear-gradient(90deg, #0088ff, #00ff88); height: 100%; width: 0%; border-radius: 4px;" id="voice-bar"></div>
                            </div>
                        </div>
                        <div style="margin: 10px 0;">
                            <div style="display: flex; justify-content: space-between; margin: 8px 0;">
                                <span>Commandes</span>
                                <span style="color: #ffaa00;" id="commands-trend">--</span>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); height: 8px; border-radius: 4px;">
                                <div style="background: linear-gradient(90deg, #ffaa00, #ff6600); height: 100%; width: 0%; border-radius: 4px;" id="commands-bar"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Top serveurs par activité -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-trophy card-icon"></i>
                            Top Serveurs
                        </div>
                    </div>
                    <div id="top-servers" style="max-height: 250px; overflow-y: auto;">
                        <div style="text-align: center; padding: 20px;">
                            <i class="fas fa-spinner fa-spin"></i> Chargement...
                        </div>
                    </div>
                </div>

                <!-- Générateur de rapports -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-file-alt card-icon"></i>
                            Générateur de Rapports
                        </div>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        <div>
                            <label style="color: #00ff88; margin-bottom: 5px; display: block;">Type de rapport:</label>
                            <select id="report-type" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(0,255,136,0.3); color: white; padding: 8px; border-radius: 5px; width: 100%;">
                                <option value="weekly">Hebdomadaire</option>
                                <option value="monthly">Mensuel</option>
                                <option value="yearly">Annuel</option>
                                <option value="custom">Personnalisé</option>
                            </select>
                        </div>
                        <div>
                            <label style="color: #00ff88; margin-bottom: 5px; display: block;">Serveur:</label>
                            <select id="report-server" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(0,255,136,0.3); color: white; padding: 8px; border-radius: 5px; width: 100%;">
                                <option value="">Tous les serveurs</option>
                            </select>
                        </div>
                        <button class="btn" style="width: 100%;" onclick="generateReport()">
                            <i class="fas fa-download"></i> Générer Rapport
                        </button>
                    </div>
                </div>

                <!-- Configuration analytics par serveur -->
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-server card-icon"></i>
                            Configuration Analytics par Serveur
                        </div>
                        <button class="btn btn-secondary" onclick="loadAnalyticsServers()">
                            <i class="fas fa-sync"></i> Actualiser
                        </button>
                    </div>
                    <div id="analytics-servers-grid" class="servers-grid">
                        <div style="text-align: center; padding: 20px;">
                            <i class="fas fa-spinner fa-spin"></i> Chargement des serveurs...
                        </div>
                    </div>
                </div>

                <!-- Panel de configuration analytics serveur -->
                <div class="card" style="grid-column: 1 / -1; display: none;" id="analytics-server-config">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-wrench card-icon"></i>
                            Configuration Analytics: <span id="analytics-selected-server">Aucun</span>
                        </div>
                        <button class="btn btn-secondary" onclick="closeAnalyticsServerConfig()">
                            <i class="fas fa-times"></i> Fermer
                        </button>
                    </div>
                    
                    <div class="config-tabs">
                        <button class="config-tab active" onclick="showAnalyticsTab('tracking')">
                            <i class="fas fa-eye"></i> Suivi
                        </button>
                        <button class="config-tab" onclick="showAnalyticsTab('privacy')">
                            <i class="fas fa-shield-alt"></i> Confidentialité
                        </button>
                        <button class="config-tab" onclick="showAnalyticsTab('reports')">
                            <i class="fas fa-chart-bar"></i> Rapports
                        </button>
                    </div>

                    <!-- Configuration suivi -->
                    <div class="config-tab-content active" id="analytics-tab-tracking">
                        <div class="config-section">
                            <h3><i class="fas fa-chart-line"></i> Données Suivies</h3>
                            <div class="config-row">
                                <label>Messages:</label>
                                <label class="switch">
                                    <input type="checkbox" id="track-messages" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="config-row">
                                <label>Temps vocal:</label>
                                <label class="switch">
                                    <input type="checkbox" id="track-voice" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="config-row">
                                <label>Commandes:</label>
                                <label class="switch">
                                    <input type="checkbox" id="track-commands" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="config-row">
                                <label>Réactions:</label>
                                <label class="switch">
                                    <input type="checkbox" id="track-reactions" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="config-row">
                                <label>Durée de rétention (jours):</label>
                                <input type="number" id="retention-days" min="7" max="365" value="90" class="config-input">
                            </div>
                        </div>
                    </div>

                    <!-- Configuration confidentialité -->
                    <div class="config-tab-content" id="analytics-tab-privacy">
                        <div class="config-section">
                            <h3><i class="fas fa-user-secret"></i> Paramètres de Confidentialité</h3>
                            <div class="config-row">
                                <label>Mode privé (pas de noms d'utilisateurs):</label>
                                <label class="switch">
                                    <input type="checkbox" id="privacy-mode">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="config-row">
                                <label>Anonymisation automatique:</label>
                                <label class="switch">
                                    <input type="checkbox" id="auto-anonymize">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="config-row">
                                <label>Délai d'anonymisation (jours):</label>
                                <input type="number" id="anonymize-delay" min="1" max="90" value="30" class="config-input">
                            </div>
                        </div>
                    </div>

                    <!-- Configuration rapports -->
                    <div class="config-tab-content" id="analytics-tab-reports">
                        <div class="config-section">
                            <h3><i class="fas fa-calendar"></i> Rapports Automatiques</h3>
                            <div class="config-row">
                                <label>Rapports automatiques:</label>
                                <label class="switch">
                                    <input type="checkbox" id="auto-reports">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="config-row">
                                <label>Fréquence:</label>
                                <select id="report-frequency" class="config-select">
                                    <option value="weekly">Hebdomadaire</option>
                                    <option value="monthly">Mensuel</option>
                                    <option value="quarterly">Trimestriel</option>
                                </select>
                            </div>
                            <div class="config-row">
                                <label>Canal de destination:</label>
                                <select id="reports-channel" class="config-select">
                                    <option value="">Aucun canal</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="config-actions">
                        <button class="btn btn-success" onclick="saveAnalyticsServerConfig()">
                            <i class="fas fa-save"></i> Sauvegarder Configuration
                        </button>
                        <button class="btn btn-secondary" onclick="resetAnalyticsServerConfig()">
                            <i class="fas fa-undo"></i> Réinitialiser
                        </button>
                    </div>
                </div>

                <!-- Métriques utilisateurs -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-users card-icon"></i>
                            Métriques Utilisateurs
                        </div>
                    </div>
                    <div id="user-metrics" style="max-height: 300px; overflow-y: auto;">
                        <div style="text-align: center; padding: 20px;">
                            <i class="fas fa-spinner fa-spin"></i> Chargement...
                        </div>
                    </div>
                </div>

                <!-- Événements récents -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-clock card-icon"></i>
                            Événements Récents
                        </div>
                    </div>
                    <div id="recent-events" style="max-height: 300px; overflow-y: auto;">
                        <div style="text-align: center; padding: 20px;">
                            <i class="fas fa-spinner fa-spin"></i> Chargement...
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Servers Page -->
        <div class="content-page" id="servers">
            <div class="page-header">
                <div>
                    <div class="page-title">🌐 Gestion Serveurs</div>
                    <div class="breadcrumb">Accueil > Gestion Bot > Serveurs</div>
                </div>
                <button class="btn" onclick="refreshServers()">
                    <i class="fas fa-sync-alt"></i> Actualiser
                </button>
            </div>
            
            <div class="dashboard-grid">
                <!-- Server Selection -->
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-server card-icon"></i>
                            Serveurs Connectés
                        </div>
                        <span id="servers-connected-count" style="color: #ffaa00; font-weight: bold;">
                            <i class="fas fa-spinner fa-spin"></i>
                        </span>
                    </div>
                    <div id="main-servers-list" class="servers-grid">
                        <!-- Les serveurs seront chargés ici -->
                        <div class="loading-servers">
                            <i class="fas fa-spinner fa-spin"></i> Chargement des serveurs...
                        </div>
                    </div>
                </div>

                <!-- Server Configuration Panel -->
                <div class="card" style="grid-column: 1 / -1;" id="server-config-panel" style="display: none;">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-cogs card-icon"></i>
                            Configuration: <span id="selected-server-name">Aucun serveur sélectionné</span>
                        </div>
                        <button class="btn btn-secondary" onclick="closeServerConfig()">
                            <i class="fas fa-times"></i> Fermer
                        </button>
                    </div>
                    
                    <div class="config-tabs">
                        <button class="config-tab active" onclick="showConfigTab('general')">
                            <i class="fas fa-cog"></i> Général
                        </button>
                        <button class="config-tab" onclick="showConfigTab('moderation')">
                            <i class="fas fa-shield-alt"></i> Modération
                        </button>
                        <button class="config-tab" onclick="showConfigTab('music')">
                            <i class="fas fa-music"></i> Musique
                        </button>
                        <button class="config-tab" onclick="showConfigTab('permissions')">
                            <i class="fas fa-key"></i> Permissions
                        </button>
                    </div>

                    <!-- Configuration Content -->
                    <div class="config-content">
                        <!-- General Tab -->
                        <div class="config-tab-content active" id="config-general">
                            <div class="config-section">
                                <h3><i class="fas fa-info-circle"></i> Informations du Serveur</h3>
                                <div class="config-row">
                                    <label>Préfixe des commandes:</label>
                                    <input type="text" id="server-prefix" value="!" maxlength="5" class="config-input">
                                </div>
                                <div class="config-row">
                                    <label>Canal de logs:</label>
                                    <select id="logs-channel" class="config-select">
                                        <option value="">Sélectionner un canal</option>
                                        <!-- Les canaux seront chargés dynamiquement via l'API -->
                                    </select>
                                </div>
                                <div class="config-row">
                                    <label>Language:</label>
                                    <select id="server-language" class="config-select">
                                        <option value="fr">🇫🇷 Français</option>
                                        <option value="en">🇺🇸 English</option>
                                        <option value="es">🇪🇸 Español</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Moderation Tab -->
                        <div class="config-tab-content" id="config-moderation">
                            <div class="config-section">
                                <h3><i class="fas fa-shield-alt"></i> Auto-Modération</h3>
                                <div class="config-row">
                                    <label>Anti-Spam:</label>
                                    <label class="switch">
                                        <input type="checkbox" id="anti-spam" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="config-row">
                                    <label>Filtre de mots:</label>
                                    <label class="switch">
                                        <input type="checkbox" id="word-filter">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="config-row">
                                    <label>Auto-Mute (spam):</label>
                                    <select id="auto-mute-duration" class="config-select">
                                        <option value="0">Désactivé</option>
                                        <option value="60">1 minute</option>
                                        <option value="300">5 minutes</option>
                                        <option value="600">10 minutes</option>
                                        <option value="3600">1 heure</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Music Tab -->
                        <div class="config-tab-content" id="config-music">
                            <div class="config-section">
                                <h3><i class="fas fa-music"></i> Système Musical</h3>
                                <div class="config-row">
                                    <label>Canal musical par défaut:</label>
                                    <select id="music-channel" class="config-select">
                                        <option value="">Aucun canal fixe</option>
                                        <!-- Les canaux seront chargés dynamiquement via l'API -->
                                    </select>
                                </div>
                                <div class="config-row">
                                    <label>Volume par défaut:</label>
                                    <input type="range" id="default-volume" min="10" max="100" value="50" class="config-slider">
                                    <span id="volume-display">50%</span>
                                </div>
                                <div class="config-row">
                                    <label>Queue maximale:</label>
                                    <input type="number" id="max-queue" min="5" max="100" value="20" class="config-input">
                                </div>
                            </div>
                        </div>

                        <!-- Permissions Tab -->
                        <div class="config-tab-content" id="config-permissions">
                            <div class="config-section">
                                <h3><i class="fas fa-key"></i> Rôles et Permissions</h3>
                                <div class="config-row">
                                    <label>Rôle Admin Arsenal:</label>
                                    <select id="admin-role" class="config-select">
                                        <option value="">Aucun rôle spécifique</option>
                                        <!-- Les rôles seront chargés dynamiquement via l'API -->
                                    </select>
                                </div>
                                <div class="config-row">
                                    <label>Rôle DJ:</label>
                                    <select id="dj-role" class="config-select">
                                        <option value="">Tout le monde</option>
                                        <!-- Les rôles seront chargés dynamiquement via l'API -->
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Save Button -->
                    <div class="config-actions">
                        <button class="btn btn-success" onclick="saveServerConfig()">
                            <i class="fas fa-save"></i> Sauvegarder Configuration
                        </button>
                        <button class="btn btn-secondary" onclick="resetServerConfig()">
                            <i class="fas fa-undo"></i> Réinitialiser
                        </button>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-pie card-icon"></i>
                            Statistiques
                        </div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="total-servers"><i class="fas fa-spinner fa-spin"></i></div>
                            <div class="stat-label">Serveurs Total</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="total-members"><i class="fas fa-spinner fa-spin"></i></div>
                            <div class="stat-label">Membres Total</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="active-servers"><i class="fas fa-spinner fa-spin"></i></div>
                            <div class="stat-label">Serveurs Actifs</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Users Page -->
        <div class="content-page" id="users">
            <div class="page-header">
                <div>
                    <div class="page-title">Utilisateurs</div>
                    <div class="breadcrumb">Accueil > Gestion Bot > Utilisateurs</div>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-users card-icon"></i>
                        Base d'utilisateurs
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div style="text-align: center;">
                        <div style="font-size: 2em; font-weight: bold; color: #00ff88;" id="total-users">
                            <i class="fas fa-spinner fa-spin"></i>
                        </div>
                        <div style="color: #888;">Total utilisateurs</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2em; font-weight: bold; color: #0088ff;" id="active-7days">
                            <i class="fas fa-spinner fa-spin"></i>
                        </div>
                        <div style="color: #888;">Actifs (7 jours)</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2em; font-weight: bold; color: #ffaa00;" id="new-users">
                            <i class="fas fa-spinner fa-spin"></i>
                        </div>
                        <div style="color: #888;">Nouveaux (30 jours)</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Commands Page -->
        <div class="content-page" id="commands">
            <div class="page-header">
                <div>
                    <div class="page-title">Commandes</div>
                    <div class="breadcrumb">Accueil > Gestion Bot > Commandes</div>
                </div>
            </div>
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-terminal card-icon"></i>
                            Commandes Disponibles
                        </div>
                    </div>
                    <div id="commandsList">
                        <div class="command-item" style="padding: 10px; margin: 5px 0; background: rgba(255,255,255,0.05); border-radius: 8px;">
                            <strong>!play [chanson]</strong> - Jouer de la musique
                        </div>
                        <div class="command-item" style="padding: 10px; margin: 5px 0; background: rgba(255,255,255,0.05); border-radius: 8px;">
                            <strong>!skip</strong> - Passer la chanson actuelle
                        </div>
                        <div class="command-item" style="padding: 10px; margin: 5px 0; background: rgba(255,255,255,0.05); border-radius: 8px;">
                            <strong>!queue</strong> - Afficher la file d'attente
                        </div>
                        <div class="command-item" style="padding: 10px; margin: 5px 0; background: rgba(255,255,255,0.05); border-radius: 8px;">
                            <strong>!ban [utilisateur]</strong> - Bannir un utilisateur
                        </div>
                        <div class="command-item" style="padding: 10px; margin: 5px 0; background: rgba(255,255,255,0.05); border-radius: 8px;">
                            <strong>!kick [utilisateur]</strong> - Expulser un utilisateur
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-history card-icon"></i>
                            Commandes Récentes
                        </div>
                    </div>
                    <div id="recentCommands">
                        <!-- Recent commands will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Music Page -->
        <div class="content-page" id="music">
            <div class="page-header">
                <div>
                    <div class="page-title">🎵 Système Musical</div>
                    <div class="breadcrumb">Accueil > Fonctionnalités > Musique</div>
                </div>
                <button class="btn" onclick="refreshMusicData()">
                    <i class="fas fa-sync"></i> Actualiser
                </button>
            </div>
            
            <div class="dashboard-grid">
                <!-- Lecteur actuel -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-music card-icon"></i>
                            Lecture Actuelle
                        </div>
                    </div>
                    <div id="current-track-info" style="text-align: center; padding: 20px;">
                        <div style="font-size: 1.2em; margin-bottom: 10px;" id="current-track-title">🎵 Aucune musique en cours</div>
                        <div style="color: #888; margin-bottom: 15px;" id="current-track-artist">Sélectionner un serveur</div>
                        <div style="display: flex; justify-content: center; gap: 10px; margin-top: 15px;">
                            <button class="btn btn-secondary" onclick="musicControl('play')" id="play-btn">
                                <i class="fas fa-play"></i>
                            </button>
                            <button class="btn btn-secondary" onclick="musicControl('pause')" id="pause-btn">
                                <i class="fas fa-pause"></i>
                            </button>
                            <button class="btn btn-secondary" onclick="musicControl('skip')">
                                <i class="fas fa-forward"></i>
                            </button>
                        </div>
                        <div style="margin-top: 15px;">
                            <label style="color: #00ff88; margin-right: 10px;">Volume:</label>
                            <input type="range" id="volume-slider" min="0" max="100" value="50" onchange="setVolume(this.value)" style="width: 150px;">
                            <span id="volume-display" style="margin-left: 10px;">50%</span>
                        </div>
                    </div>
                </div>
                
                <!-- Queue musicale -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-list card-icon"></i>
                            File d'Attente
                        </div>
                        <button class="btn btn-secondary" onclick="clearQueue()">
                            <i class="fas fa-trash"></i> Vider
                        </button>
                    </div>
                    <div id="music-queue" style="max-height: 300px; overflow-y: auto;">
                        <div style="text-align: center; color: #888; padding: 20px;">
                            File d'attente vide
                        </div>
                    </div>
                </div>

                <!-- Contrôles d'ajout -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-plus card-icon"></i>
                            Ajouter Musique
                        </div>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        <div>
                            <label style="color: #00ff88; margin-bottom: 5px; display: block;">URL ou terme de recherche:</label>
                            <input type="text" id="music-search-input" placeholder="https://youtube.com/... ou nom de musique" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(0,255,136,0.3); color: white; padding: 8px; border-radius: 5px; width: 100%;">
                        </div>
                        <div>
                            <label style="color: #00ff88; margin-bottom: 5px; display: block;">Serveur:</label>
                            <select id="music-server-select" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(0,255,136,0.3); color: white; padding: 8px; border-radius: 5px; width: 100%;">
                                <option value="">Sélectionner un serveur</option>
                            </select>
                        </div>
                        <button class="btn" style="width: 100%;" onclick="addToQueue()">
                            <i class="fas fa-plus"></i> Ajouter à la Queue
                        </button>
                    </div>
                </div>

                <!-- Historique récent -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-history card-icon"></i>
                            Historique Récent
                        </div>
                    </div>
                    <div id="music-history" style="max-height: 250px; overflow-y: auto;">
                        <div style="text-align: center; color: #888; padding: 20px;">
                            <i class="fas fa-spinner fa-spin"></i> Chargement...
                        </div>
                    </div>
                </div>

                <!-- Configuration musicale par serveur -->
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-server card-icon"></i>
                            Configuration par Serveur
                        </div>
                        <button class="btn btn-secondary" onclick="loadMusicServers()">
                            <i class="fas fa-sync"></i> Actualiser
                        </button>
                    </div>
                    <div id="music-servers-grid" class="servers-grid">
                        <div style="text-align: center; padding: 20px;">
                            <i class="fas fa-spinner fa-spin"></i> Chargement des serveurs...
                        </div>
                    </div>
                </div>

                <!-- Panel de configuration musicale serveur -->
                <div class="card" style="grid-column: 1 / -1; display: none;" id="music-server-config">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-wrench card-icon"></i>
                            Configuration Musicale: <span id="music-selected-server">Aucun</span>
                        </div>
                        <button class="btn btn-secondary" onclick="closeMusicServerConfig()">
                            <i class="fas fa-times"></i> Fermer
                        </button>
                    </div>
                    
                    <div class="config-section">
                        <h3><i class="fas fa-sliders-h"></i> Paramètres Audio</h3>
                        <div class="config-row">
                            <label>Taille maximale de la queue:</label>
                            <input type="number" id="max-queue-size" min="5" max="500" value="100" class="config-input">
                        </div>
                        <div class="config-row">
                            <label>Volume par défaut (%):</label>
                            <input type="range" id="default-volume" min="10" max="100" value="50" class="config-slider" onchange="updateVolumeDisplay(this.value)">
                            <span id="default-volume-display">50%</span>
                        </div>
                        <div class="config-row">
                            <label>Auto-play (lecture automatique):</label>
                            <label class="switch">
                                <input type="checkbox" id="auto-play" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="config-row">
                            <label>Déconnexion auto (minutes):</label>
                            <input type="number" id="auto-disconnect-minutes" min="1" max="60" value="5" class="config-input">
                        </div>
                        <div class="config-row">
                            <label>Mode DJ uniquement:</label>
                            <label class="switch">
                                <input type="checkbox" id="dj-only-mode">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="config-row">
                            <label>Sources autorisées:</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <label><input type="checkbox" id="source-youtube" checked> YouTube</label>
                                <label><input type="checkbox" id="source-spotify" checked> Spotify</label>
                                <label><input type="checkbox" id="source-soundcloud" checked> SoundCloud</label>
                            </div>
                        </div>
                        <div class="config-row">
                            <label>Qualité de préférence:</label>
                            <select id="quality-preference" class="config-select">
                                <option value="high">Haute (720p+)</option>
                                <option value="medium">Moyenne (480p)</option>
                                <option value="low">Basse (360p)</option>
                            </select>
                        </div>
                    </div>

                    <div class="config-actions">
                        <button class="btn btn-success" onclick="saveMusicServerConfig()">
                            <i class="fas fa-save"></i> Sauvegarder Configuration
                        </button>
                        <button class="btn btn-secondary" onclick="resetMusicServerConfig()">
                            <i class="fas fa-undo"></i> Réinitialiser
                        </button>
                    </div>
                </div>

                <!-- Statistiques musicales -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-bar card-icon"></i>
                            Statistiques
                        </div>
                    </div>
                    <div class="stat-number" id="music-total-played">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Musiques jouées aujourd'hui</div>
                    <div class="stat-number" style="font-size: 1.5em; margin-top: 15px;" id="music-total-hours">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Heures d'écoute total</div>
                </div>
            </div>
        </div>

        <!-- Moderation Page -->
        <div class="content-page" id="moderation">
            <div class="page-header">
                <div>
                    <div class="page-title">🛡️ Moderation Manager</div>
                    <div class="breadcrumb">Accueil > Gestion Bot > Modération</div>
                </div>
                <button class="btn" onclick="refreshModerationData()">
                    <i class="fas fa-sync"></i> Actualiser
                </button>
            </div>
            
            <div class="dashboard-grid">
                <!-- Actions de modération récentes -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-shield-alt card-icon"></i>
                            Actions Récentes
                        </div>
                    </div>
                    <div id="moderation-actions" style="max-height: 300px; overflow-y: auto;">
                        <div style="text-align: center; padding: 20px;">
                            <i class="fas fa-spinner fa-spin"></i> Chargement...
                        </div>
                    </div>
                </div>
                
                <!-- Statistiques de modération -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-bar card-icon"></i>
                            Statistiques
                        </div>
                    </div>
                    <div class="stat-number" id="mod-actions-today">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Actions aujourd'hui</div>
                    <div class="stat-number" style="font-size: 1.5em; margin-top: 15px;" id="mod-warnings-total">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Avertissements actifs</div>
                </div>

                <!-- Outils de modération rapide -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-tools card-icon"></i>
                            Actions Rapides
                        </div>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        <div>
                            <label style="color: #00ff88; margin-bottom: 5px; display: block;">ID Utilisateur:</label>
                            <input type="text" id="mod-user-id" placeholder="ID Discord de l'utilisateur" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(0,255,136,0.3); color: white; padding: 8px; border-radius: 5px; width: 100%;">
                        </div>
                        <div>
                            <label style="color: #00ff88; margin-bottom: 5px; display: block;">Serveur:</label>
                            <select id="mod-server-select" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(0,255,136,0.3); color: white; padding: 8px; border-radius: 5px; width: 100%;">
                                <option value="">Sélectionner un serveur</option>
                            </select>
                        </div>
                        <div>
                            <label style="color: #00ff88; margin-bottom: 5px; display: block;">Raison:</label>
                            <input type="text" id="mod-reason" placeholder="Raison de l'action" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(0,255,136,0.3); color: white; padding: 8px; border-radius: 5px; width: 100%;">
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <button class="btn btn-warning" onclick="moderationAction('warn')">
                                <i class="fas fa-exclamation-triangle"></i> Warn
                            </button>
                            <button class="btn btn-danger" onclick="moderationAction('kick')">
                                <i class="fas fa-user-times"></i> Kick
                            </button>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <button class="btn btn-danger" onclick="moderationAction('ban')">
                                <i class="fas fa-ban"></i> Ban
                            </button>
                            <button class="btn btn-secondary" onclick="moderationAction('timeout')">
                                <i class="fas fa-clock"></i> Timeout
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Auto-modération status -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-robot card-icon"></i>
                            Auto-Modération
                        </div>
                    </div>
                    <div class="stat-number" id="automod-blocks-today">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Messages bloqués aujourd'hui</div>
                    <div style="margin-top: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>Anti-Spam</span>
                            <span style="color: #00ff88;" id="antispam-status">Actif</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>Filtre de mots</span>
                            <span style="color: #00ff88;" id="wordfilter-status">Actif</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>Anti-Raid</span>
                            <span style="color: #ffaa00;" id="antiraid-status">Standby</span>
                        </div>
                    </div>
                </div>

                <!-- Configuration de modération par serveur -->
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-server card-icon"></i>
                            Configuration par Serveur
                        </div>
                        <button class="btn btn-secondary" onclick="loadModerationServers()">
                            <i class="fas fa-sync"></i> Actualiser
                        </button>
                    </div>
                    <div id="moderation-servers-grid" class="servers-grid">
                        <div style="text-align: center; padding: 20px;">
                            <i class="fas fa-spinner fa-spin"></i> Chargement des serveurs...
                        </div>
                    </div>
                </div>

                <!-- Panel de configuration modération serveur -->
                <div class="card" style="grid-column: 1 / -1; display: none;" id="moderation-server-config">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-wrench card-icon"></i>
                            Configuration Modération: <span id="moderation-selected-server">Aucun</span>
                        </div>
                        <button class="btn btn-secondary" onclick="closeModerationServerConfig()">
                            <i class="fas fa-times"></i> Fermer
                        </button>
                    </div>
                    
                    <div class="config-tabs">
                        <button class="config-tab active" onclick="showModerationTab('automod')">
                            <i class="fas fa-robot"></i> Auto-Modération
                        </button>
                        <button class="config-tab" onclick="showModerationTab('sanctions')">
                            <i class="fas fa-gavel"></i> Sanctions
                        </button>
                        <button class="config-tab" onclick="showModerationTab('logs')">
                            <i class="fas fa-file-alt"></i> Logs
                        </button>
                    </div>

                    <!-- Configuration auto-modération -->
                    <div class="config-tab-content active" id="moderation-tab-automod">
                        <div class="config-section">
                            <h3><i class="fas fa-shield-virus"></i> Filtres Automatiques</h3>
                            <div class="config-row">
                                <label>Anti-Spam activé:</label>
                                <label class="switch">
                                    <input type="checkbox" id="antispam-enabled" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="config-row">
                                <label>Limite messages/seconde:</label>
                                <input type="number" id="spam-limit" min="1" max="20" value="5" class="config-input">
                            </div>
                            <div class="config-row">
                                <label>Filtre de mots activé:</label>
                                <label class="switch">
                                    <input type="checkbox" id="wordfilter-enabled">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="config-row">
                                <label>Anti-liens activé:</label>
                                <label class="switch">
                                    <input type="checkbox" id="antilink-enabled">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="config-row">
                                <label>Anti-mentions mass:</label>
                                <label class="switch">
                                    <input type="checkbox" id="antimention-enabled">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="config-row">
                                <label>Limite mentions par message:</label>
                                <input type="number" id="mention-limit" min="1" max="20" value="5" class="config-input">
                            </div>
                        </div>
                    </div>

                    <!-- Configuration sanctions -->
                    <div class="config-tab-content" id="moderation-tab-sanctions">
                        <div class="config-section">
                            <h3><i class="fas fa-exclamation-triangle"></i> Sanctions Automatiques</h3>
                            <div class="config-row">
                                <label>Auto-mute spam:</label>
                                <label class="switch">
                                    <input type="checkbox" id="auto-mute-spam">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="config-row">
                                <label>Durée auto-mute (minutes):</label>
                                <input type="number" id="auto-mute-duration" min="1" max="1440" value="10" class="config-input">
                            </div>
                            <div class="config-row">
                                <label>Auto-kick après avertissements:</label>
                                <input type="number" id="auto-kick-warns" min="0" max="10" value="3" class="config-input">
                            </div>
                            <div class="config-row">
                                <label>Auto-ban après kicks:</label>
                                <input type="number" id="auto-ban-kicks" min="0" max="5" value="2" class="config-input">
                            </div>
                            <div class="config-row">
                                <label>Expiration avertissements (jours):</label>
                                <input type="number" id="warn-expiry" min="0" max="365" value="30" class="config-input">
                            </div>
                        </div>
                    </div>

                    <!-- Configuration logs -->
                    <div class="config-tab-content" id="moderation-tab-logs">
                        <div class="config-section">
                            <h3><i class="fas fa-clipboard-list"></i> Canaux de Logs</h3>
                            <div class="config-row">
                                <label>Canal de modération:</label>
                                <select id="mod-log-channel" class="config-select">
                                    <option value="">Aucun canal</option>
                                </select>
                            </div>
                            <div class="config-row">
                                <label>Canal des messages supprimés:</label>
                                <select id="message-log-channel" class="config-select">
                                    <option value="">Aucun canal</option>
                                </select>
                            </div>
                            <div class="config-row">
                                <label>Canal auto-modération:</label>
                                <select id="automod-log-channel" class="config-select">
                                    <option value="">Aucun canal</option>
                                </select>
                            </div>
                            <div class="config-row">
                                <label>Canal arrivées/départs:</label>
                                <select id="member-log-channel" class="config-select">
                                    <option value="">Aucun canal</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="config-actions">
                        <button class="btn btn-success" onclick="saveModerationServerConfig()">
                            <i class="fas fa-save"></i> Sauvegarder Configuration
                        </button>
                        <button class="btn btn-secondary" onclick="resetModerationServerConfig()">
                            <i class="fas fa-undo"></i> Réinitialiser
                        </button>
                    </div>
                </div>

                <!-- Logs de modération -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-history card-icon"></i>
                            Historique
                        </div>
                    </div>
                    <div id="moderation-history" style="max-height: 300px; overflow-y: auto;">
                        <div style="text-align: center; padding: 20px;">
                            <i class="fas fa-spinner fa-spin"></i> Chargement...
                        </div>
                    </div>
                </div>

                <!-- Utilisateurs sanctionnés -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-user-slash card-icon"></i>
                            Sanctions Actives
                        </div>
                    </div>
                    <div id="active-sanctions" style="max-height: 300px; overflow-y: auto;">
                        <div style="text-align: center; padding: 20px;">
                            <i class="fas fa-spinner fa-spin"></i> Chargement...
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Page -->
        <div class="content-page" id="settings">
            <div class="page-header">
                <div>
                    <div class="page-title">Paramètres</div>
                    <div class="breadcrumb">Accueil > Configuration > Paramètres</div>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-cog card-icon"></i>
                        Configuration du Bot
                    </div>
                </div>
                <div style="display: grid; gap: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 5px; color: #00ff88;">Préfixe des commandes:</label>
                        <input type="text" value="!" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(0,255,136,0.3); color: white; padding: 10px; border-radius: 5px; width: 200px;">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px; color: #00ff88;">Canal de logs:</label>
                        <select style="background: rgba(255,255,255,0.1); border: 1px solid rgba(0,255,136,0.3); color: white; padding: 10px; border-radius: 5px; width: 200px;">
                            <option value="">#logs</option>
                            <option value="">#moderation</option>
                            <option value="">#general</option>
                        </select>
                    </div>
                    <div>
                        <button class="btn">
                            <i class="fas fa-save"></i> Sauvegarder
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Real-time Page -->
        <div class="content-page" id="realtime">
            <div class="page-header">
                <div>
                    <div class="page-title">🔴 Temps Réel</div>
                    <div class="breadcrumb">Accueil > Surveillance > Temps Réel</div>
                </div>
                <button class="btn" onclick="refreshRealtime()">
                    <i class="fas fa-sync-alt"></i> Actualiser
                </button>
            </div>
            
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-bolt card-icon"></i>
                            Activité Live
                        </div>
                    </div>
                    <div id="live-activity" style="max-height: 300px; overflow-y: auto;">
                        <div style="text-align: center; color: #ffaa00; padding: 20px;">
                            <i class="fas fa-exclamation-triangle"></i><br>
                            API Required<br>
                            <small>Connectez le backend pour voir l'activité réelle</small>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-line card-icon"></i>
                            Métriques Live
                        </div>
                    </div>
                    <div class="stat-number" id="live-users">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Utilisateurs connectés</div>
                    <div class="status-indicator">
                        <div class="status-dot"></div>
                        <span>Serveur stable</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Economy Page -->
        <div class="content-page" id="economy">
            <div class="page-header">
                <div>
                    <div class="page-title">💰 Économie</div>
                    <div class="breadcrumb">Accueil > Features > Économie</div>
                </div>
                <button class="btn" onclick="loadEconomyData()">
                    <i class="fas fa-sync"></i> Actualiser
                </button>
            </div>
            
            <div class="dashboard-grid">
                <!-- Vue d'ensemble économique -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-pie card-icon"></i>
                            Vue d'Ensemble
                        </div>
                    </div>
                    <div class="stat-number" id="economy-total-coins">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Arsenal Coins en circulation</div>
                    <div class="stat-number" style="font-size: 1.5em; margin-top: 15px;" id="economy-transactions">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Transactions aujourd'hui</div>
                </div>
                
                <!-- Classement économique -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-trophy card-icon"></i>
                            Classement Richesse
                        </div>
                    </div>
                    <div id="economy-leaderboard" style="max-height: 300px; overflow-y: auto;">
                        <div style="text-align: center; padding: 20px;">
                            <i class="fas fa-spinner fa-spin"></i> Chargement...
                        </div>
                    </div>
                </div>
                
                <!-- Configuration économique globale -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-cogs card-icon"></i>
                            Configuration Globale
                        </div>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        <div>
                            <label style="color: #00ff88; margin-bottom: 5px; display: block;">Gains quotidiens max:</label>
                            <input type="number" id="max-daily-amount" value="500" min="10" max="10000" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(0,255,136,0.3); color: white; padding: 8px; border-radius: 5px; width: 100%;">
                        </div>
                        <div>
                            <label style="color: #00ff88; margin-bottom: 5px; display: block;">Symbole de devise:</label>
                            <input type="text" id="currency-symbol" value="🪙" maxlength="3" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(0,255,136,0.3); color: white; padding: 8px; border-radius: 5px; width: 100%;">
                        </div>
                        <div>
                            <label style="color: #00ff88; margin-bottom: 5px; display: block;">Système économique:</label>
                            <label class="switch">
                                <input type="checkbox" id="economy-enabled" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <button class="btn" style="width: 100%;" onclick="saveEconomyConfig()">
                            <i class="fas fa-save"></i> Sauvegarder Configuration
                        </button>
                    </div>
                </div>

                <!-- Serveurs économiques -->
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-server card-icon"></i>
                            Configuration par Serveur
                        </div>
                        <button class="btn btn-secondary" onclick="loadEconomyServers()">
                            <i class="fas fa-sync"></i> Actualiser
                        </button>
                    </div>
                    <div id="economy-servers-grid" class="servers-grid">
                        <div style="text-align: center; padding: 20px;">
                            <i class="fas fa-spinner fa-spin"></i> Chargement des serveurs...
                        </div>
                    </div>
                </div>

                <!-- Panel de configuration serveur sélectionné -->
                <div class="card" style="grid-column: 1 / -1; display: none;" id="economy-server-config">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-wrench card-icon"></i>
                            Configuration: <span id="economy-selected-server">Aucun</span>
                        </div>
                        <button class="btn btn-secondary" onclick="closeEconomyServerConfig()">
                            <i class="fas fa-times"></i> Fermer
                        </button>
                    </div>
                    
                    <div class="config-tabs">
                        <button class="config-tab active" onclick="showEconomyTab('basic')">
                            <i class="fas fa-coins"></i> Configuration de Base
                        </button>
                        <button class="config-tab" onclick="showEconomyTab('levels')">
                            <i class="fas fa-chart-line"></i> Système de Niveaux
                        </button>
                        <button class="config-tab" onclick="showEconomyTab('rewards')">
                            <i class="fas fa-gift"></i> Récompenses
                        </button>
                    </div>

                    <!-- Configuration de base -->
                    <div class="config-tab-content active" id="economy-tab-basic">
                        <div class="config-section">
                            <h3><i class="fas fa-wallet"></i> Économie de Base</h3>
                            <div class="config-row">
                                <label>Système économique activé:</label>
                                <label class="switch">
                                    <input type="checkbox" id="server-economy-enabled">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="config-row">
                                <label>Gain quotidien:</label>
                                <input type="number" id="daily-amount" min="10" max="1000" class="config-input">
                            </div>
                            <div class="config-row">
                                <label>Gain travail (min-max):</label>
                                <div style="display: flex; gap: 10px;">
                                    <input type="number" id="work-min" min="1" max="500" class="config-input">
                                    <input type="number" id="work-max" min="1" max="500" class="config-input">
                                </div>
                            </div>
                            <div class="config-row">
                                <label>Gain crime (min-max):</label>
                                <div style="display: flex; gap: 10px;">
                                    <input type="number" id="crime-min" min="10" max="1000" class="config-input">
                                    <input type="number" id="crime-max" min="10" max="1000" class="config-input">
                                </div>
                            </div>
                            <div class="config-row">
                                <label>Pénalité crime échoué:</label>
                                <input type="number" id="crime-fail-penalty" min="0" max="200" class="config-input">
                            </div>
                            <div class="config-row">
                                <label>Taux d'intérêt banque (%):</label>
                                <input type="number" id="bank-interest-rate" min="0" max="10" step="0.1" class="config-input">
                            </div>
                        </div>
                    </div>

                    <!-- Configuration niveaux -->
                    <div class="config-tab-content" id="economy-tab-levels">
                        <div class="config-section">
                            <h3><i class="fas fa-level-up-alt"></i> Système de Niveaux</h3>
                            <div class="config-row">
                                <label>Système de niveaux activé:</label>
                                <label class="switch">
                                    <input type="checkbox" id="levels-enabled">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="config-row">
                                <label>XP par message:</label>
                                <input type="number" id="xp-per-message" min="1" max="50" class="config-input">
                            </div>
                            <div class="config-row">
                                <label>XP par minute vocal:</label>
                                <input type="number" id="xp-per-voice-minute" min="1" max="100" class="config-input">
                            </div>
                            <div class="config-row">
                                <label>Bonus level up:</label>
                                <input type="number" id="level-up-bonus" min="0" max="500" class="config-input">
                            </div>
                        </div>
                    </div>

                    <!-- Configuration récompenses -->
                    <div class="config-tab-content" id="economy-tab-rewards">
                        <div class="config-section">
                            <h3><i class="fas fa-trophy"></i> Récompenses de Niveau</h3>
                            <div id="level-rewards-list">
                                <!-- Les récompenses seront listées ici -->
                            </div>
                            <button class="btn" onclick="addLevelReward()">
                                <i class="fas fa-plus"></i> Ajouter Récompense
                            </button>
                        </div>
                    </div>

                    <div class="config-actions">
                        <button class="btn btn-success" onclick="saveEconomyServerConfig()">
                            <i class="fas fa-save"></i> Sauvegarder Configuration
                        </button>
                        <button class="btn btn-secondary" onclick="resetEconomyServerConfig()">
                            <i class="fas fa-undo"></i> Réinitialiser
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Games Page -->
        <div class="content-page" id="games">
            <div class="page-header">
                <div>
                    <div class="page-title">🎮 Gaming Manager</div>
                    <div class="breadcrumb">Accueil > Features > Gaming</div>
                </div>
                <button class="btn" onclick="loadGamingData()">
                    <i class="fas fa-sync"></i> Actualiser
                </button>
            </div>
            
            <div class="dashboard-grid">
                <!-- Système de niveaux gaming -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-level-up-alt card-icon"></i>
                            Système de Niveaux
                        </div>
                    </div>
                    <div class="stat-number" id="gaming-max-level">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Niveau maximum atteint</div>
                    <div class="stat-number" style="font-size: 1.5em; margin-top: 15px;" id="gaming-total-xp">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">XP total distribué</div>
                </div>
                
                <!-- Mini-jeux disponibles -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-gamepad card-icon"></i>
                            Mini-Jeux
                        </div>
                        <button class="btn btn-secondary" onclick="openCasino()">
                            <i class="fas fa-dice"></i> Casino
                        </button>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px;">
                        <div style="background: rgba(0,255,136,0.1); padding: 10px; border-radius: 8px; text-align: center; cursor: pointer;" onclick="openCasino()">
                            <i class="fas fa-dice" style="font-size: 1.5em; color: #00ff88; margin-bottom: 5px;"></i>
                            <div style="font-size: 0.9em;">🎰 Casino</div>
                        </div>
                        <div style="background: rgba(0,255,136,0.1); padding: 10px; border-radius: 8px; text-align: center; cursor: pointer;" onclick="startTrivia()">
                            <i class="fas fa-question-circle" style="font-size: 1.5em; color: #00ff88; margin-bottom: 5px;"></i>
                            <div style="font-size: 0.9em;">🧠 Trivia</div>
                        </div>
                        <div style="background: rgba(0,255,136,0.1); padding: 10px; border-radius: 8px; text-align: center; cursor: pointer;" onclick="startBattle()">
                            <i class="fas fa-sword" style="font-size: 1.5em; color: #00ff88; margin-bottom: 5px;"></i>
                            <div style="font-size: 0.9em;">⚔️ Battle</div>
                        </div>
                        <div style="background: rgba(0,255,136,0.1); padding: 10px; border-radius: 8px; text-align: center; cursor: pointer;" onclick="openLootbox()">
                            <i class="fas fa-box" style="font-size: 1.5em; color: #00ff88; margin-bottom: 5px;"></i>
                            <div style="font-size: 0.9em;">📦 Lootbox</div>
                        </div>
                    </div>
                </div>

                <!-- Classement niveaux -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-trophy card-icon"></i>
                            Classement Niveaux
                        </div>
                    </div>
                    <div id="gaming-leaderboard" style="max-height: 300px; overflow-y: auto;">
                        <div style="text-align: center; padding: 20px;">
                            <i class="fas fa-spinner fa-spin"></i> Chargement...
                        </div>
                    </div>
                </div>

                <!-- Statistiques mini-jeux -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-bar card-icon"></i>
                            Stats Mini-Jeux
                        </div>
                    </div>
                    <div id="minigames-stats">
                        <div style="margin: 10px 0;">
                            <div style="display: flex; justify-content: space-between; margin: 8px 0;">
                                <span>🎰 Casino</span>
                                <span style="color: #ffaa00;" id="casino-games">--</span>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); height: 6px; border-radius: 3px;">
                                <div style="background: linear-gradient(90deg, #00ff88, #0088ff); height: 100%; width: 0%; border-radius: 3px;" id="casino-bar"></div>
                            </div>
                        </div>
                        <div style="margin: 10px 0;">
                            <div style="display: flex; justify-content: space-between; margin: 8px 0;">
                                <span>🧠 Trivia</span>
                                <span style="color: #ffaa00;" id="trivia-games">--</span>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); height: 6px; border-radius: 3px;">
                                <div style="background: linear-gradient(90deg, #0088ff, #00ff88); height: 100%; width: 0%; border-radius: 3px;" id="trivia-bar"></div>
                            </div>
                        </div>
                        <div style="margin: 10px 0;">
                            <div style="display: flex; justify-content: space-between; margin: 8px 0;">
                                <span>⚔️ Battle</span>
                                <span style="color: #ffaa00;" id="battle-games">--</span>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); height: 6px; border-radius: 3px;">
                                <div style="background: linear-gradient(90deg, #ffaa00, #ff6600); height: 100%; width: 0%; border-radius: 3px;" id="battle-bar"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gestion XP -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-plus-circle card-icon"></i>
                            Attribution XP
                        </div>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        <div>
                            <label style="color: #00ff88; margin-bottom: 5px; display: block;">ID Utilisateur:</label>
                            <input type="text" id="xp-user-id" placeholder="ID Discord de l'utilisateur" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(0,255,136,0.3); color: white; padding: 8px; border-radius: 5px; width: 100%;">
                        </div>
                        <div>
                            <label style="color: #00ff88; margin-bottom: 5px; display: block;">Montant XP:</label>
                            <input type="number" id="xp-amount" min="1" max="10000" value="100" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(0,255,136,0.3); color: white; padding: 8px; border-radius: 5px; width: 100%;">
                        </div>
                        <div>
                            <label style="color: #00ff88; margin-bottom: 5px; display: block;">Serveur:</label>
                            <select id="xp-server-select" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(0,255,136,0.3); color: white; padding: 8px; border-radius: 5px; width: 100%;">
                                <option value="">Sélectionner un serveur</option>
                            </select>
                        </div>
                        <div>
                            <label style="color: #00ff88; margin-bottom: 5px; display: block;">Raison:</label>
                            <input type="text" id="xp-reason" placeholder="Raison de l'attribution" value="Attribution manuelle" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(0,255,136,0.3); color: white; padding: 8px; border-radius: 5px; width: 100%;">
                        </div>
                        <button class="btn" style="width: 100%;" onclick="giveXP()">
                            <i class="fas fa-gift"></i> Attribuer XP
                        </button>
                    </div>
                </div>

                <!-- Configuration gaming par serveur -->
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-server card-icon"></i>
                            Configuration Gaming par Serveur
                        </div>
                        <button class="btn btn-secondary" onclick="loadGamingServers()">
                            <i class="fas fa-sync"></i> Actualiser
                        </button>
                    </div>
                    <div id="gaming-servers-grid" class="servers-grid">
                        <div style="text-align: center; padding: 20px;">
                            <i class="fas fa-spinner fa-spin"></i> Chargement des serveurs...
                        </div>
                    </div>
                </div>

                <!-- Panel de configuration gaming serveur -->
                <div class="card" style="grid-column: 1 / -1; display: none;" id="gaming-server-config">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-wrench card-icon"></i>
                            Configuration Gaming: <span id="gaming-selected-server">Aucun</span>
                        </div>
                        <button class="btn btn-secondary" onclick="closeGamingServerConfig()">
                            <i class="fas fa-times"></i> Fermer
                        </button>
                    </div>
                    
                    <div class="config-tabs">
                        <button class="config-tab active" onclick="showGamingTab('xp')">
                            <i class="fas fa-star"></i> Système XP
                        </button>
                        <button class="config-tab" onclick="showGamingTab('rewards')">
                            <i class="fas fa-gift"></i> Récompenses
                        </button>
                        <button class="config-tab" onclick="showGamingTab('minigames')">
                            <i class="fas fa-gamepad"></i> Mini-Jeux
                        </button>
                    </div>

                    <!-- Configuration XP -->
                    <div class="config-tab-content active" id="gaming-tab-xp">
                        <div class="config-section">
                            <h3><i class="fas fa-chart-line"></i> Paramètres d'Expérience</h3>
                            <div class="config-row">
                                <label>XP par message:</label>
                                <input type="number" id="gaming-xp-per-message" min="1" max="50" value="10" class="config-input">
                            </div>
                            <div class="config-row">
                                <label>XP par minute vocal:</label>
                                <input type="number" id="gaming-xp-per-voice" min="1" max="100" value="5" class="config-input">
                            </div>
                            <div class="config-row">
                                <label>Cooldown XP (secondes):</label>
                                <input type="number" id="gaming-xp-cooldown" min="10" max="300" value="60" class="config-input">
                            </div>
                            <div class="config-row">
                                <label>Niveau maximum:</label>
                                <input type="number" id="gaming-max-level" min="10" max="1000" value="100" class="config-input">
                            </div>
                            <div class="config-row">
                                <label>Bonus weekend:</label>
                                <label class="switch">
                                    <input type="checkbox" id="gaming-bonus-weekends">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="config-row">
                                <label>Récompenses level-up:</label>
                                <label class="switch">
                                    <input type="checkbox" id="gaming-level-rewards" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Configuration récompenses -->
                    <div class="config-tab-content" id="gaming-tab-rewards">
                        <div class="config-section">
                            <h3><i class="fas fa-trophy"></i> Récompenses de Niveau</h3>
                            <div id="gaming-rewards-list">
                                <!-- Les récompenses seront listées ici -->
                            </div>
                            <div style="display: flex; gap: 10px; margin-top: 15px;">
                                <input type="number" id="reward-level" placeholder="Niveau" min="1" max="1000" class="config-input" style="width: 100px;">
                                <select id="reward-type" class="config-select" style="width: 150px;">
                                    <option value="coins">Coins</option>
                                    <option value="role">Rôle</option>
                                    <option value="item">Objet</option>
                                </select>
                                <input type="text" id="reward-value" placeholder="Valeur/ID" class="config-input" style="flex: 1;">
                                <button class="btn" onclick="addGamingReward()">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Configuration mini-jeux -->
                    <div class="config-tab-content" id="gaming-tab-minigames">
                        <div class="config-section">
                            <h3><i class="fas fa-dice"></i> Mini-Jeux Activés</h3>
                            <div class="config-row">
                                <label>Casino:</label>
                                <label class="switch">
                                    <input type="checkbox" id="minigame-casino" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="config-row">
                                <label>Trivia:</label>
                                <label class="switch">
                                    <input type="checkbox" id="minigame-trivia" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="config-row">
                                <label>Battle PvP:</label>
                                <label class="switch">
                                    <input type="checkbox" id="minigame-battle" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="config-row">
                                <label>Lootbox:</label>
                                <label class="switch">
                                    <input type="checkbox" id="minigame-lootbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="config-actions">
                        <button class="btn btn-success" onclick="saveGamingServerConfig()">
                            <i class="fas fa-save"></i> Sauvegarder Configuration
                        </button>
                        <button class="btn btn-secondary" onclick="resetGamingServerConfig()">
                            <i class="fas fa-undo"></i> Réinitialiser
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- AutoMod Page -->
        <div class="content-page" id="automod">
            <div class="page-header">
                <div>
                    <div class="page-title">🤖 Auto-Modération</div>
                    <div class="breadcrumb">Accueil > Modération > Auto-Mod</div>
                </div>
                <button class="btn" onclick="toggleAutoMod()">
                    <i class="fas fa-power-off"></i> Activer/Désactiver
                </button>
            </div>
            
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-shield-alt card-icon"></i>
                            Filtres Anti-Spam
                        </div>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span>Messages répétés</span>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span>Liens suspects</span>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span>Mentions en masse</span>
                            <label class="switch">
                                <input type="checkbox">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-ban card-icon"></i>
                            Actions Automatiques
                        </div>
                    </div>
                    <div class="stat-number">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Messages supprimés aujourd'hui</div>
                    <div class="stat-number" style="font-size: 1.5em; margin-top: 15px;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Utilisateurs sanctionnés</div>
                </div>
            </div>
        </div>

        <!-- Logs Page -->
        <div class="content-page" id="logs">
            <div class="page-header">
                <div>
                    <div class="page-title">📜 Logs</div>
                    <div class="breadcrumb">Accueil > Système > Logs</div>
                </div>
                <button class="btn" onclick="clearLogs()">
                    <i class="fas fa-trash"></i> Vider les logs
                </button>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-file-alt card-icon"></i>
                        Journal d'activité
                    </div>
                </div>
                <div id="logs-container" style="max-height: 500px; overflow-y: auto; font-family: monospace; font-size: 0.9em;">
                    <div style="text-align: center; color: #ffaa00; padding: 20px;">
                        <i class="fas fa-exclamation-triangle"></i><br>
                        API Required<br>
                        <small>Connectez le backend pour voir les logs réels</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Database Page -->
        <div class="content-page" id="database">
            <div class="page-header">
                <div>
                    <div class="page-title">🗄️ Base de Données</div>
                    <div class="breadcrumb">Accueil > Système > Base de Données</div>
                </div>
                <button class="btn" onclick="backupDatabase()">
                    <i class="fas fa-download"></i> Backup
                </button>
            </div>
            
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-database card-icon"></i>
                            Statistiques DB
                        </div>
                    </div>
                    <div class="stat-number">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Enregistrements totaux</div>
                    <div class="stat-number" style="font-size: 1.5em; margin-top: 15px;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Taille de la base</div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-table card-icon"></i>
                            Tables Principales
                        </div>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>users</span>
                            <span style="color: #ffaa00;">API Required</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>servers</span>
                            <span style="color: #ffaa00;">API Required</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>commands</span>
                            <span style="color: #ffaa00;">API Required</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>economy</span>
                            <span style="color: #ffaa00;">API Required</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- API Page -->
        <div class="content-page" id="api">
            <div class="page-header">
                <div>
                    <div class="page-title">🔌 API</div>
                    <div class="breadcrumb">Accueil > Système > API</div>
                </div>
                <button class="btn" onclick="testAPI()">
                    <i class="fas fa-flask"></i> Tester API
                </button>
            </div>
            
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-plug card-icon"></i>
                            Endpoints Disponibles
                        </div>
                    </div>
                    <div style="font-family: monospace; font-size: 0.9em;">
                        <div style="padding: 8px; background: rgba(0,255,136,0.1); margin-bottom: 5px; border-radius: 5px;">
                            <span style="color: #00ff88;">GET</span> /api/stats
                        </div>
                        <div style="padding: 8px; background: rgba(0,255,136,0.1); margin-bottom: 5px; border-radius: 5px;">
                            <span style="color: #0088ff;">POST</span> /api/commands/execute
                        </div>
                        <div style="padding: 8px; background: rgba(0,255,136,0.1); margin-bottom: 5px; border-radius: 5px;">
                            <span style="color: #00ff88;">GET</span> /api/users/{id}
                        </div>
                        <div style="padding: 8px; background: rgba(0,255,136,0.1); margin-bottom: 5px; border-radius: 5px;">
                            <span style="color: #ffaa00;">PUT</span> /api/settings
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-line card-icon"></i>
                            Utilisation API
                        </div>
                    </div>
                    <div class="stat-number">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <div class="stat-label">Requêtes aujourd'hui</div>
                    <div class="status-indicator">
                        <div class="status-dot"></div>
                        <span>API Opérationnelle</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bot Info Page -->
        <div class="content-page" id="botinfo">
            <div class="page-header">
                <div>
                    <div class="page-title">ℹ️ Informations du Bot</div>
                    <div class="breadcrumb">Accueil > Système > Info Bot</div>
                </div>
                <button class="btn" onclick="refreshBotInfo()">
                    <i class="fas fa-sync-alt"></i> Actualiser
                </button>
            </div>
            
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-robot card-icon"></i>
                            Arsenal Bot
                        </div>
                    </div>
                    <div style="display: grid; gap: 15px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: #00ff88;">Version:</span>
                            <span>v4.2.6 ULTRA</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: #00ff88;">Développeur:</span>
                            <span>XeRoX</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: #00ff88;">Discord.py:</span>
                            <span id="discordpy-version"><i class="fas fa-spinner fa-spin"></i></span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: #00ff88;">Python:</span>
                            <span id="python-version"><i class="fas fa-spinner fa-spin"></i></span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: #00ff88;">Créé le:</span>
                            <span id="creation-date"><i class="fas fa-spinner fa-spin"></i></span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: #00ff88;">Dernière MàJ:</span>
                            <span id="last-update"><i class="fas fa-spinner fa-spin"></i></span>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-cogs card-icon"></i>
                            Modules Chargés
                        </div>
                    </div>
                    <div style="display: grid; gap: 10px;">
                        <div style="background: rgba(0,255,136,0.1); padding: 10px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center;">
                            <span>🎵 Système Musical</span>
                            <span style="color: #00ff88;">✅ Actif</span>
                        </div>
                        <div style="background: rgba(0,255,136,0.1); padding: 10px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center;">
                            <span>🛡️ Modération</span>
                            <span style="color: #00ff88;">✅ Actif</span>
                        </div>
                        <div style="background: rgba(0,255,136,0.1); padding: 10px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center;">
                            <span>💰 Économie</span>
                            <span style="color: #00ff88;">✅ Actif</span>
                        </div>
                        <div style="background: rgba(0,255,136,0.1); padding: 10px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center;">
                            <span>🎰 Casino</span>
                            <span style="color: #00ff88;">✅ Actif</span>
                        </div>
                        <div style="background: rgba(255,170,0,0.1); padding: 10px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center;">
                            <span>🤖 Auto-Mod</span>
                            <span style="color: #ffaa00;">⚠️ En développement</span>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-bar card-icon"></i>
                            Statistiques Globales
                        </div>
                    </div>
                    <div style="display: grid; gap: 15px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>Total commandes:</span>
                            <span style="color: #ffaa00;">API Required</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Modules actifs:</span>
                            <span style="color: #ffaa00;">API Required</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Événements écoutés:</span>
                            <span style="color: #ffaa00;">API Required</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Base de données:</span>
                            <span style="color: #00ff88; font-weight: bold;">SQLite</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Help Commands Page -->
        <div class="content-page" id="help">
            <div class="page-header">
                <div>
                    <div class="page-title">📖 Help Commandes</div>
                    <div class="breadcrumb">Accueil > Système > Help Commandes</div>
                </div>
                <button class="btn" onclick="searchCommands()">
                    <i class="fas fa-search"></i> Rechercher
                </button>
            </div>
            
            <div style="margin-bottom: 30px;">
                <input type="text" id="commandSearch" placeholder="🔍 Rechercher une commande..." style="width: 100%; padding: 15px; background: rgba(255,255,255,0.1); border: 2px solid rgba(0,255,136,0.3); border-radius: 25px; color: white; font-size: 1.1em;" onkeyup="filterCommands()">
            </div>
            
            <div class="dashboard-grid" id="commandsGrid">
                <!-- Musique -->
                <div class="card command-card" data-category="music">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-music card-icon"></i>
                            Commandes Musique
                        </div>
                        <span style="background: rgba(0,255,136,0.2); padding: 5px 10px; border-radius: 15px; font-size: 0.8em;">12 commandes</span>
                    </div>
                    <div style="display: grid; gap: 10px;">
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!play [chanson/url]</div>
                            <div style="color: #888; font-size: 0.9em;">Jouer une chanson depuis YouTube/Spotify</div>
                            <div style="color: #ffaa00; font-size: 0.8em;">Permissions: Aucune</div>
                        </div>
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!skip</div>
                            <div style="color: #888; font-size: 0.9em;">Passer à la chanson suivante</div>
                            <div style="color: #ffaa00; font-size: 0.8em;">Permissions: Aucune</div>
                        </div>
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!queue</div>
                            <div style="color: #888; font-size: 0.9em;">Afficher la file d'attente musicale</div>
                            <div style="color: #ffaa00; font-size: 0.8em;">Permissions: Aucune</div>
                        </div>
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!pause / !resume</div>
                            <div style="color: #888; font-size: 0.9em;">Mettre en pause ou reprendre la musique</div>
                            <div style="color: #ffaa00; font-size: 0.8em;">Permissions: Aucune</div>
                        </div>
                    </div>
                </div>
                
                <!-- Modération -->
                <div class="card command-card" data-category="moderation">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-shield-alt card-icon"></i>
                            Commandes Modération
                        </div>
                        <span style="background: rgba(255,68,68,0.2); padding: 5px 10px; border-radius: 15px; font-size: 0.8em;">8 commandes</span>
                    </div>
                    <div style="display: grid; gap: 10px;">
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!ban [utilisateur] [raison]</div>
                            <div style="color: #888; font-size: 0.9em;">Bannir définitivement un utilisateur</div>
                            <div style="color: #ff4444; font-size: 0.8em;">Permissions: BAN_MEMBERS</div>
                        </div>
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!kick [utilisateur] [raison]</div>
                            <div style="color: #888; font-size: 0.9em;">Expulser un utilisateur du serveur</div>
                            <div style="color: #ff4444; font-size: 0.8em;">Permissions: KICK_MEMBERS</div>
                        </div>
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!timeout [utilisateur] [durée]</div>
                            <div style="color: #888; font-size: 0.9em;">Mettre un utilisateur en timeout temporaire</div>
                            <div style="color: #ff4444; font-size: 0.8em;">Permissions: MODERATE_MEMBERS</div>
                        </div>
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!warn [utilisateur] [raison]</div>
                            <div style="color: #888; font-size: 0.9em;">Avertir un utilisateur</div>
                            <div style="color: #ffaa00; font-size: 0.8em;">Permissions: MANAGE_MESSAGES</div>
                        </div>
                    </div>
                </div>
                
                <!-- Économie -->
                <div class="card command-card" data-category="economy">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-coins card-icon"></i>
                            Commandes Économie
                        </div>
                        <span style="background: rgba(255,170,0,0.2); padding: 5px 10px; border-radius: 15px; font-size: 0.8em;">6 commandes</span>
                    </div>
                    <div style="display: grid; gap: 10px;">
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!balance [@utilisateur]</div>
                            <div style="color: #888; font-size: 0.9em;">Voir le solde d'Arsenal Coins</div>
                            <div style="color: #ffaa00; font-size: 0.8em;">Permissions: Aucune</div>
                        </div>
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!daily</div>
                            <div style="color: #888; font-size: 0.9em;">Récupérer ses gains quotidiens</div>
                            <div style="color: #ffaa00; font-size: 0.8em;">Permissions: Aucune</div>
                        </div>
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!pay [utilisateur] [montant]</div>
                            <div style="color: #888; font-size: 0.9em;">Transférer des Arsenal Coins</div>
                            <div style="color: #ffaa00; font-size: 0.8em;">Permissions: Aucune</div>
                        </div>
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!shop</div>
                            <div style="color: #888; font-size: 0.9em;">Voir la boutique d'articles</div>
                            <div style="color: #ffaa00; font-size: 0.8em;">Permissions: Aucune</div>
                        </div>
                    </div>
                </div>
                
                <!-- Casino -->
                <div class="card command-card" data-category="casino">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-dice card-icon"></i>
                            Commandes Casino
                        </div>
                        <span style="background: rgba(255,0,255,0.2); padding: 5px 10px; border-radius: 15px; font-size: 0.8em;">5 commandes</span>
                    </div>
                    <div style="display: grid; gap: 10px;">
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!blackjack [mise]</div>
                            <div style="color: #888; font-size: 0.9em;">Jouer au Blackjack contre le croupier</div>
                            <div style="color: #ffaa00; font-size: 0.8em;">Permissions: Aucune</div>
                        </div>
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!roulette [mise] [couleur/numéro]</div>
                            <div style="color: #888; font-size: 0.9em;">Jouer à la roulette française</div>
                            <div style="color: #ffaa00; font-size: 0.8em;">Permissions: Aucune</div>
                        </div>
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!slots [mise]</div>
                            <div style="color: #888; font-size: 0.9em;">Jouer aux machines à sous</div>
                            <div style="color: #ffaa00; font-size: 0.8em;">Permissions: Aucune</div>
                        </div>
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!casino</div>
                            <div style="color: #888; font-size: 0.9em;">Ouvrir l'interface casino web</div>
                            <div style="color: #ffaa00; font-size: 0.8em;">Permissions: Aucune</div>
                        </div>
                    </div>
                </div>

                <!-- Utilitaires -->
                <div class="card command-card" data-category="utility">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-tools card-icon"></i>
                            Commandes Utilitaires
                        </div>
                        <span style="background: rgba(0,136,255,0.2); padding: 5px 10px; border-radius: 15px; font-size: 0.8em;">10 commandes</span>
                    </div>
                    <div style="display: grid; gap: 10px;">
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!serverinfo</div>
                            <div style="color: #888; font-size: 0.9em;">Informations détaillées du serveur</div>
                            <div style="color: #ffaa00; font-size: 0.8em;">Permissions: Aucune</div>
                        </div>
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!userinfo [@utilisateur]</div>
                            <div style="color: #888; font-size: 0.9em;">Informations d'un utilisateur</div>
                            <div style="color: #ffaa00; font-size: 0.8em;">Permissions: Aucune</div>
                        </div>
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!avatar [@utilisateur]</div>
                            <div style="color: #888; font-size: 0.9em;">Afficher l'avatar d'un utilisateur</div>
                            <div style="color: #ffaa00; font-size: 0.8em;">Permissions: Aucune</div>
                        </div>
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!ping</div>
                            <div style="color: #888; font-size: 0.9em;">Vérifier la latence du bot</div>
                            <div style="color: #ffaa00; font-size: 0.8em;">Permissions: Aucune</div>
                        </div>
                    </div>
                </div>

                <!-- Administration -->
                <div class="card command-card" data-category="admin">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-crown card-icon"></i>
                            Commandes Admin
                        </div>
                        <span style="background: rgba(255,215,0,0.2); padding: 5px 10px; border-radius: 15px; font-size: 0.8em;">6 commandes</span>
                    </div>
                    <div style="display: grid; gap: 10px;">
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!reload [module]</div>
                            <div style="color: #888; font-size: 0.9em;">Recharger un module du bot</div>
                            <div style="color: #ff4444; font-size: 0.8em;">Permissions: ADMINISTRATOR</div>
                        </div>
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!backup</div>
                            <div style="color: #888; font-size: 0.9em;">Créer une sauvegarde du serveur</div>
                            <div style="color: #ff4444; font-size: 0.8em;">Permissions: ADMINISTRATOR</div>
                        </div>
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!setprefix [nouveau_préfixe]</div>
                            <div style="color: #888; font-size: 0.9em;">Changer le préfixe des commandes</div>
                            <div style="color: #ff4444; font-size: 0.8em;">Permissions: MANAGE_GUILD</div>
                        </div>
                        <div class="command-help-item">
                            <div style="font-weight: bold; color: #00fff7;">!logs [canal]</div>
                            <div style="color: #888; font-size: 0.9em;">Configurer le canal de logs</div>
                            <div style="color: #ff4444; font-size: 0.8em;">Permissions: MANAGE_GUILD</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Security Page -->
        <div class="content-page" id="security">
            <div class="page-header">
                <div>
                    <div class="page-title">🔒 Sécurité Avancée</div>
                    <div class="breadcrumb">Accueil > Gestion Bot > Sécurité</div>
                </div>
                <button class="btn" onclick="scanSecurity()">
                    <i class="fas fa-shield-alt"></i> Scan Sécurité
                </button>
            </div>
            
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-lock card-icon"></i>
                            Niveau de Sécurité
                        </div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 3em; color: #00ff88; margin-bottom: 10px;">🛡️</div>
                        <div style="font-size: 1.5em; font-weight: bold; color: #00ff88;">ÉLEVÉ</div>
                        <div style="color: #888; margin-top: 10px;">Score: 94/100</div>
                    </div>
                    <div style="margin-top: 20px;">
                        <div style="background: rgba(255,255,255,0.1); height: 12px; border-radius: 6px; overflow: hidden;">
                            <div style="background: linear-gradient(90deg, #00ff88, #00fff7); height: 100%; width: 94%; transition: width 0.5s;"></div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-eye card-icon"></i>
                            Surveillance Active
                        </div>
                    </div>
                    <div style="display: grid; gap: 12px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span>🔍 Anti-Raid</span>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span>🚫 Anti-Spam</span>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span>🛡️ Anti-Flood</span>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span>🔒 2FA Obligatoire</span>
                            <label class="switch">
                                <input type="checkbox">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-history card-icon"></i>
                            Événements Sécurité
                        </div>
                    </div>
                    <div style="max-height: 300px; overflow-y: auto;">
                        <div style="text-align: center; color: #ffaa00; padding: 20px;">
                            <i class="fas fa-exclamation-triangle"></i><br>
                            API Required<br>
                            <small>Connectez le backend pour voir les événements de sécurité réels</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Backup Page -->
        <div class="content-page" id="backup">
            <div class="page-header">
                <div>
                    <div class="page-title">💾 Système de Backup</div>
                    <div class="breadcrumb">Accueil > Fonctionnalités > Backup</div>
                </div>
                <button class="btn" onclick="createBackup()">
                    <i class="fas fa-plus"></i> Nouveau Backup
                </button>
            </div>
            
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-cloud-upload-alt card-icon"></i>
                            Backup Automatique
                        </div>
                    </div>
                    <div style="display: grid; gap: 15px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span>🔄 Backup Quotidien</span>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>📅 Prochaine sauvegarde:</span>
                            <span style="color: #ffaa00;">API Required</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>💾 Espace utilisé:</span>
                            <span style="color: #ffaa00;">API Required</span>
                        </div>
                        <button class="btn btn-secondary" style="width: 100%;">
                            <i class="fas fa-cog"></i> Configurer
                        </button>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-history card-icon"></i>
                            Backups Récents
                        </div>
                    </div>
                    <div style="text-align: center; color: #ffaa00; padding: 20px;">
                        <i class="fas fa-exclamation-triangle"></i><br>
                        API Required<br>
                        <small>Connectez le backend pour voir les backups réels</small>
                    </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add more pages here... -->
        
    </div>

    <!-- Footer -->
    <div class="footer">
        <div class="footer-content">
            <div class="footer-logo">ARSENAL</div>
            <div class="footer-text">
                Dashboard Arsenal V4.2.6 ULTRA © 2025 – Développé par XeRoX | Interface Suprême
            </div>
        </div>
    </div>

    <script>
        const API_BASE = window.location.origin;
        let sidebarOpen = false;

        // Toggle Sidebar
        function toggleSidebar() {
            sidebarOpen = !sidebarOpen;
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            if (sidebarOpen) {
                sidebar.classList.add('open');
                mainContent.classList.add('sidebar-open');
                // Ajouter classe pour empêcher le scroll du body sur mobile
                document.body.style.overflow = window.innerWidth <= 768 ? 'hidden' : 'auto';
            } else {
                sidebar.classList.remove('open');
                mainContent.classList.remove('sidebar-open');
                // Restaurer le scroll
                document.body.style.overflow = 'auto';
            }
        }

        // Fermer la sidebar
        function closeSidebar() {
            if (sidebarOpen) {
                sidebarOpen = false;
                const sidebar = document.getElementById('sidebar');
                const mainContent = document.getElementById('mainContent');
                
                sidebar.classList.remove('open');
                mainContent.classList.remove('sidebar-open');
                document.body.style.overflow = 'auto';
            }
        }

        // ==================== USER DROPDOWN FUNCTIONS ====================
        let userDropdownOpen = false;

        // Toggle User Dropdown
        function toggleUserDropdown() {
            userDropdownOpen = !userDropdownOpen;
            const dropdown = document.getElementById('userDropdown');
            const chevron = document.getElementById('userDropdownChevron');
            
            if (!dropdown || !chevron) {
                console.error('Éléments dropdown non trouvés');
                return;
            }
            
            if (userDropdownOpen) {
                dropdown.classList.add('show');
                chevron.style.transform = 'rotate(180deg)';
            } else {
                dropdown.classList.remove('show');
                chevron.style.transform = 'rotate(0deg)';
            }
        }

        // ==================== THEME SYSTEM FUNCTIONS ====================
        const themes = {
            arsenal: { 
                primary: '#00fff7', 
                secondary: '#0088ff', 
                background: '#0a0a0f',
                cardBg: 'rgba(255, 255, 255, 0.05)',
                borderColor: 'rgba(0, 255, 247, 0.3)',
                textPrimary: '#ffffff',
                textSecondary: '#b8c5d1',
                accentColor: '#00fff7',
                successColor: '#00ff88',
                warningColor: '#ffaa00',
                errorColor: '#ff4444',
                hoverColor: 'rgba(0, 255, 247, 0.1)'
            },
            matrix: { 
                primary: '#00ff00', 
                secondary: '#66ff66', 
                background: '#0a1a0a',
                cardBg: 'rgba(0, 255, 0, 0.05)',
                borderColor: 'rgba(0, 255, 0, 0.3)',
                textPrimary: '#ffffff',
                textSecondary: '#b8d1b8',
                accentColor: '#00ff00',
                successColor: '#66ff66',
                warningColor: '#ffff00',
                errorColor: '#ff6666',
                hoverColor: 'rgba(0, 255, 0, 0.1)'
            },
            galaxy: { 
                primary: '#9d4edd', 
                secondary: '#c77dff', 
                background: '#1a0a1f',
                cardBg: 'rgba(157, 78, 221, 0.05)',
                borderColor: 'rgba(157, 78, 221, 0.3)',
                textPrimary: '#ffffff',
                textSecondary: '#d1b8d1',
                accentColor: '#9d4edd',
                successColor: '#c77dff',
                warningColor: '#ffd700',
                errorColor: '#ff6b9d',
                hoverColor: 'rgba(157, 78, 221, 0.1)'
            },
            fire: { 
                primary: '#ff6b35', 
                secondary: '#f7931e', 
                background: '#1f0a05',
                cardBg: 'rgba(255, 107, 53, 0.05)',
                borderColor: 'rgba(255, 107, 53, 0.3)',
                textPrimary: '#ffffff',
                textSecondary: '#d1c5b8',
                accentColor: '#ff6b35',
                successColor: '#f7931e',
                warningColor: '#ffaa00',
                errorColor: '#ff4444',
                hoverColor: 'rgba(255, 107, 53, 0.1)'
            },
            ocean: { 
                primary: '#0077be', 
                secondary: '#00a8cc', 
                background: '#051015',
                cardBg: 'rgba(0, 119, 190, 0.05)',
                borderColor: 'rgba(0, 119, 190, 0.3)',
                textPrimary: '#ffffff',
                textSecondary: '#b8c5d1',
                accentColor: '#0077be',
                successColor: '#00a8cc',
                warningColor: '#ffd700',
                errorColor: '#ff6b6b',
                hoverColor: 'rgba(0, 119, 190, 0.1)'
            },
            sunset: { 
                primary: '#ff6b6b', 
                secondary: '#ffa726', 
                background: '#1f0f05',
                cardBg: 'rgba(255, 107, 107, 0.05)',
                borderColor: 'rgba(255, 107, 107, 0.3)',
                textPrimary: '#ffffff',
                textSecondary: '#d1c5b8',
                accentColor: '#ff6b6b',
                successColor: '#ffa726',
                warningColor: '#ffcc02',
                errorColor: '#ff4444',
                hoverColor: 'rgba(255, 107, 107, 0.1)'
            },
            neon: { 
                primary: '#ff1744', 
                secondary: '#e91e63', 
                background: '#1f0510',
                cardBg: 'rgba(255, 23, 68, 0.05)',
                borderColor: 'rgba(255, 23, 68, 0.3)',
                textPrimary: '#ffffff',
                textSecondary: '#d1b8c5',
                accentColor: '#ff1744',
                successColor: '#e91e63',
                warningColor: '#ff9800',
                errorColor: '#f44336',
                hoverColor: 'rgba(255, 23, 68, 0.1)'
            },
            cyber: { 
                primary: '#673ab7', 
                secondary: '#3f51b5', 
                background: '#0f0520',
                cardBg: 'rgba(103, 58, 183, 0.05)',
                borderColor: 'rgba(103, 58, 183, 0.3)',
                textPrimary: '#ffffff',
                textSecondary: '#c5b8d1',
                accentColor: '#673ab7',
                successColor: '#3f51b5',
                warningColor: '#ff9800',
                errorColor: '#e91e63',
                hoverColor: 'rgba(103, 58, 183, 0.1)'
            }
        };

        // Thème mixte par défaut
        let customTheme = {
            background: 'arsenal',    // Fond
            buttons: 'arsenal',       // Boutons et éléments interactifs
            sidebar: 'arsenal',       // Sidebar et navigation
            text: 'arsenal',          // Texte et typographie
            cards: 'arsenal'          // Cartes et conteneurs
        };

        // Appliquer un thème mixte
        function applyMixedTheme(mixConfig) {
            const root = document.documentElement;
            
            // Fond et arrière-plan
            const bgTheme = themes[mixConfig.background];
            root.style.setProperty('--bg-dark', bgTheme.background);
            
            // Boutons et éléments interactifs
            const btnTheme = themes[mixConfig.buttons];
            root.style.setProperty('--primary-color', btnTheme.primary);
            root.style.setProperty('--secondary-color', btnTheme.secondary);
            root.style.setProperty('--accent-color', btnTheme.accentColor);
            root.style.setProperty('--hover-color', btnTheme.hoverColor);
            
            // Sidebar et navigation
            const sidebarTheme = themes[mixConfig.sidebar];
            root.style.setProperty('--border-color', sidebarTheme.borderColor);
            root.style.setProperty('--success-color', sidebarTheme.successColor);
            
            // Texte
            const textTheme = themes[mixConfig.text];
            root.style.setProperty('--text-primary', textTheme.textPrimary);
            root.style.setProperty('--text-secondary', textTheme.textSecondary);
            root.style.setProperty('--warning-color', textTheme.warningColor);
            root.style.setProperty('--error-color', textTheme.errorColor);
            
            // Cartes
            const cardTheme = themes[mixConfig.cards];
            root.style.setProperty('--card-bg', cardTheme.cardBg);
            
            // Sauvegarder la configuration
            customTheme = mixConfig;
            localStorage.setItem('arsenal-custom-theme', JSON.stringify(mixConfig));
            
            showToast(`🎨 Thème mixte appliqué !`, 'success');
        }

        // Fonctions pour changer chaque partie individuellement
        function changeBackground(themeName) {
            customTheme.background = themeName;
            applyMixedTheme(customTheme);
            showToast(`🌌 Fond changé: ${themeName}`, 'success');
        }

        function changeButtons(themeName) {
            customTheme.buttons = themeName;
            applyMixedTheme(customTheme);
            showToast(`🔘 Boutons changés: ${themeName}`, 'success');
        }

        function changeSidebar(themeName) {
            customTheme.sidebar = themeName;
            applyMixedTheme(customTheme);
            showToast(`📋 Sidebar changée: ${themeName}`, 'success');
        }

        function changeText(themeName) {
            customTheme.text = themeName;
            applyMixedTheme(customTheme);
            showToast(`📝 Texte changé: ${themeName}`, 'success');
        }

        function changeCards(themeName) {
            customTheme.cards = themeName;
            applyMixedTheme(customTheme);
            showToast(`📦 Cartes changées: ${themeName}`, 'success');
        }

        // Présets de thèmes mixtes populaires
        const mixedPresets = {
            cyberpunk: {
                background: 'cyber',
                buttons: 'neon', 
                sidebar: 'matrix',
                text: 'arsenal',
                cards: 'galaxy'
            },
            ocean_fire: {
                background: 'ocean',
                buttons: 'fire',
                sidebar: 'sunset',
                text: 'arsenal',
                cards: 'ocean'
            },
            neon_galaxy: {
                background: 'galaxy',
                buttons: 'neon',
                sidebar: 'neon',
                text: 'galaxy',
                cards: 'cyber'
            }
        };

        function applyMixedPreset(presetName) {
            if (mixedPresets[presetName]) {
                applyMixedTheme(mixedPresets[presetName]);
                showToast(`🎨 Preset "${presetName}" appliqué !`, 'success');
            }
        }

        // Initialize Theme (sans animation au démarrage)
        function initializeTheme(themeName) {
            // Charger le thème mixte si disponible
            const savedCustomTheme = localStorage.getItem('arsenal-custom-theme');
            if (savedCustomTheme) {
                try {
                    const customConfig = JSON.parse(savedCustomTheme);
                    applyMixedTheme(customConfig);
                    return;
                } catch (error) {
                    console.log('Erreur chargement thème mixte, utilisation thème standard');
                }
            }
            
            // Sinon appliquer le thème standard
            const theme = themes[themeName];
            if (!theme) return;

            const root = document.documentElement;
            root.style.setProperty('--primary-color', theme.primary);
            root.style.setProperty('--secondary-color', theme.secondary);
            root.style.setProperty('--bg-dark', theme.background);
            root.style.setProperty('--card-bg', theme.cardBg);
            root.style.setProperty('--border-color', theme.borderColor);
            root.style.setProperty('--text-primary', theme.textPrimary);
            root.style.setProperty('--text-secondary', theme.textSecondary);
            root.style.setProperty('--accent-color', theme.accentColor);
            root.style.setProperty('--success-color', theme.successColor);
            root.style.setProperty('--warning-color', theme.warningColor);
            root.style.setProperty('--error-color', theme.errorColor);
            root.style.setProperty('--hover-color', theme.hoverColor);

            // Update active theme indicator
            setTimeout(() => {
                document.querySelectorAll('.theme-option').forEach(option => {
                    option.classList.remove('active');
                });
                const activeTheme = document.querySelector(`.theme-option[data-theme="${themeName}"]`);
                if (activeTheme) {
                    activeTheme.classList.add('active');
                }
            }, 100);
        }

        // Apply Theme (thème standard complet)
        function changeTheme(themeName) {
            const theme = themes[themeName];
            if (!theme) return;

            const root = document.documentElement;
            root.style.setProperty('--primary-color', theme.primary);
            root.style.setProperty('--secondary-color', theme.secondary);
            root.style.setProperty('--bg-dark', theme.background);
            root.style.setProperty('--card-bg', theme.cardBg);
            root.style.setProperty('--border-color', theme.borderColor);
            root.style.setProperty('--text-primary', theme.textPrimary);
            root.style.setProperty('--text-secondary', theme.textSecondary);
            root.style.setProperty('--accent-color', theme.accentColor);
            root.style.setProperty('--success-color', theme.successColor);
            root.style.setProperty('--warning-color', theme.warningColor);
            root.style.setProperty('--error-color', theme.errorColor);
            root.style.setProperty('--hover-color', theme.hoverColor);

            // Réinitialiser le thème mixte
            customTheme = {
                background: themeName,
                buttons: themeName,
                sidebar: themeName,
                text: themeName,
                cards: themeName
            };
            localStorage.removeItem('arsenal-custom-theme');

            // Save theme preference
            localStorage.setItem('arsenal-theme', themeName);
            
            // Update active theme indicator
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
            });
            const activeTheme = document.querySelector(`.theme-option[data-theme="${themeName}"]`);
            if (activeTheme) {
                activeTheme.classList.add('active');
            }
            
            // Close dropdown
            hideThemeSelector();
            
            // Show confirmation
            showToast(`🎨 Thème "${themeName}" appliqué !`, 'success');
        }

        // Show Theme Selector
        function showThemeSelector() {
            const selector = document.getElementById('themeSelector');
            if (selector) {
                selector.style.display = 'block';
                selector.style.opacity = '1';
            }
        }

        // Show Mix Theme Selector
        function showMixThemeSelector() {
            // Créer le modal de thème mixte dynamiquement
            const existingModal = document.getElementById('mixThemeModal');
            if (existingModal) {
                existingModal.remove();
            }

            const modal = document.createElement('div');
            modal.id = 'mixThemeModal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                backdrop-filter: blur(10px);
            `;

            modal.innerHTML = `
                <div style="
                    background: var(--card-bg);
                    border: 2px solid var(--border-color);
                    border-radius: 15px;
                    padding: 30px;
                    max-width: 600px;
                    max-height: 80vh;
                    overflow-y: auto;
                    backdrop-filter: blur(20px);
                ">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="color: var(--primary-color); margin: 0;">🎨 Thème Mixte</h2>
                        <button onclick="document.getElementById('mixThemeModal').remove()" style="
                            background: transparent;
                            border: none;
                            color: var(--text-primary);
                            font-size: 24px;
                            cursor: pointer;
                        ">×</button>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <h3 style="color: var(--primary-color);">🌌 Arrière-plan</h3>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap; margin: 10px 0;">
                            ${Object.keys(themes).map(theme => `
                                <button onclick="changeBackground('${theme}')" style="
                                    background: ${themes[theme].background};
                                    border: 2px solid var(--border-color);
                                    color: white;
                                    padding: 8px 12px;
                                    border-radius: 8px;
                                    cursor: pointer;
                                    font-size: 12px;
                                ">${theme}</button>
                            `).join('')}
                        </div>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h3 style="color: var(--primary-color);">🔘 Boutons</h3>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap; margin: 10px 0;">
                            ${Object.keys(themes).map(theme => `
                                <button onclick="changeButtons('${theme}')" style="
                                    background: ${themes[theme].primary};
                                    border: 2px solid ${themes[theme].primary};
                                    color: white;
                                    padding: 8px 12px;
                                    border-radius: 8px;
                                    cursor: pointer;
                                    font-size: 12px;
                                ">${theme}</button>
                            `).join('')}
                        </div>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h3 style="color: var(--primary-color);">📋 Sidebar</h3>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap; margin: 10px 0;">
                            ${Object.keys(themes).map(theme => `
                                <button onclick="changeSidebar('${theme}')" style="
                                    background: transparent;
                                    border: 2px solid ${themes[theme].borderColor.replace('rgba', 'rgb').replace(', 0.3)', '')};
                                    color: ${themes[theme].successColor};
                                    padding: 8px 12px;
                                    border-radius: 8px;
                                    cursor: pointer;
                                    font-size: 12px;
                                ">${theme}</button>
                            `).join('')}
                        </div>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h3 style="color: var(--primary-color);">📝 Texte</h3>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap; margin: 10px 0;">
                            ${Object.keys(themes).map(theme => `
                                <button onclick="changeText('${theme}')" style="
                                    background: transparent;
                                    border: 2px solid var(--border-color);
                                    color: ${themes[theme].textPrimary};
                                    padding: 8px 12px;
                                    border-radius: 8px;
                                    cursor: pointer;
                                    font-size: 12px;
                                ">${theme}</button>
                            `).join('')}
                        </div>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h3 style="color: var(--primary-color);">📦 Cartes</h3>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap; margin: 10px 0;">
                            ${Object.keys(themes).map(theme => `
                                <button onclick="changeCards('${theme}')" style="
                                    background: ${themes[theme].cardBg};
                                    border: 2px solid var(--border-color);
                                    color: white;
                                    padding: 8px 12px;
                                    border-radius: 8px;
                                    cursor: pointer;
                                    font-size: 12px;
                                ">${theme}</button>
                            `).join('')}
                        </div>
                    </div>

                    <div style="border-top: 1px solid var(--border-color); padding-top: 20px;">
                        <h3 style="color: var(--primary-color);">🎨 Presets Populaires</h3>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap; margin: 10px 0;">
                            <button onclick="applyMixedPreset('cyberpunk')" style="
                                background: linear-gradient(45deg, #673ab7, #ff1744);
                                border: none;
                                color: white;
                                padding: 10px 15px;
                                border-radius: 8px;
                                cursor: pointer;
                                font-weight: bold;
                            ">Cyberpunk</button>
                            <button onclick="applyMixedPreset('ocean_fire')" style="
                                background: linear-gradient(45deg, #0077be, #ff6b35);
                                border: none;
                                color: white;
                                padding: 10px 15px;
                                border-radius: 8px;
                                cursor: pointer;
                                font-weight: bold;
                            ">Ocean Fire</button>
                            <button onclick="applyMixedPreset('neon_galaxy')" style="
                                background: linear-gradient(45deg, #9d4edd, #ff1744);
                                border: none;
                                color: white;
                                padding: 10px 15px;
                                border-radius: 8px;
                                cursor: pointer;
                                font-weight: bold;
                            ">Neon Galaxy</button>
                        </div>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            closeUserDropdown();
        }

        // Hide Theme Selector
        function hideThemeSelector() {
            const selector = document.getElementById('themeSelector');
            if (selector) {
                selector.style.opacity = '0';
                setTimeout(() => {
                    selector.style.display = 'none';
                }, 300);
            }
        }

        // ==================== SYSTÈME DE NOTIFICATIONS ====================
        // Système de gestion des notifications (éviter superposition)
        let toastQueue = [];
        let isShowingToast = false;
        
        // Fonction pour afficher les notifications toast (version améliorée)
        function showToast(message, type = 'info') {
            toastQueue.push({ message, type });
            if (!isShowingToast) {
                showNextToast();
            }
        }
        
        function showNextToast() {
            if (toastQueue.length === 0) {
                isShowingToast = false;
                return;
            }
            
            isShowingToast = true;
            const { message, type } = toastQueue.shift();
            
            const toast = document.createElement('div');
            const borderColor = type === 'success' ? '#00ff88' : type === 'error' ? '#ff4444' : '#00fff7';
            const bgGradient = type === 'success' ? 'rgba(0, 255, 136, 0.1)' : type === 'error' ? 'rgba(255, 68, 68, 0.1)' : 'rgba(0, 255, 247, 0.1)';
            
            toast.style.cssText = 
                'position: fixed;' +
                'top: 90px;' +
                'right: 20px;' +
                'background: linear-gradient(135deg, rgba(10, 15, 28, 0.98), ' + bgGradient + ');' +
                'border: 2px solid ' + borderColor + ';' +
                'color: white;' +
                'padding: 15px 20px;' +
                'border-radius: 12px;' +
                'z-index: 10001;' +
                'box-shadow: 0 0 30px rgba(0, 255, 247, 0.4), 0 4px 20px rgba(0, 0, 0, 0.3);' +
                'backdrop-filter: blur(25px);' +
                'animation: toastSlideIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);' +
                'font-family: "Orbitron", sans-serif;' +
                'font-weight: 500;' +
                'max-width: 400px;' +
                'word-wrap: break-word;' +
                'cursor: pointer;';
            
            toast.innerHTML = message;
            document.body.appendChild(toast);
            
            // Masquer automatiquement après 3 secondes
            setTimeout(() => {
                toast.style.animation = 'toastSlideOut 0.3s ease-in';
                setTimeout(() => {
                    if (document.body.contains(toast)) {
                        document.body.removeChild(toast);
                    }
                    setTimeout(showNextToast, 200);
                }, 300);
            }, 3000);
            
            // Permettre de fermer en cliquant
            toast.addEventListener('click', () => {
                toast.style.animation = 'toastSlideOut 0.3s ease-in';
                setTimeout(() => {
                    if (document.body.contains(toast)) {
                        document.body.removeChild(toast);
                    }
                    setTimeout(showNextToast, 200);
                }, 300);
            });
        }

        // ==================== INITIALISATION PRINCIPALE ====================
        document.addEventListener('DOMContentLoaded', function() {
            // Signature discrète développeur - XeRoX ©
            console.log('%c🚀 Arsenal V4 WebPanel%c\n%cDeveloped by XeRoX © 2024-2025%c\n%cAll Rights Reserved', 'color: #00fff7; font-size: 16px; font-weight: bold;', '', 'color: #888; font-size: 12px;', '', 'color: #666; font-size: 10px;');
            
            console.log('🚀 Arsenal Dashboard - Démarrage...');
            
            // Test de connectivité backend immédiat
            fetch('/api/test')
                .then(response => {
                    if (response.ok) {
                        console.log('✅ Backend accessible !');
                        showToast('✅ Backend Arsenal V4 connecté !', 'success');
                    } else {
                        console.log('⚠️ Backend répond mais avec erreur');
                    }
                })
                .catch(error => {
                    console.log('❌ Backend non accessible:', error);
                    showToast('❌ Vérification de la connexion backend...', 'warning');
                });
            
            // 1. Charger le thème sauvegardé
            const savedTheme = localStorage.getItem('arsenal-theme') || 'arsenal';
            initializeTheme(savedTheme);
            
            // 2. Configurer le slider de volume
            const volumeSlider = document.getElementById('default-volume');
            const volumeDisplay = document.getElementById('volume-display');
            if (volumeSlider && volumeDisplay) {
                volumeSlider.addEventListener('input', function() {
                    volumeDisplay.textContent = this.value + '%';
                });
            }
            
            // 3. Check for OAuth session parameters
            const urlParams = new URLSearchParams(window.location.search);
            const sessionToken = urlParams.get('session');
            const userParam = urlParams.get('user');
            
            if (sessionToken && userParam) {
                try {
                    const userData = JSON.parse(decodeURIComponent(userParam));
                    
                    // Store session data
                    localStorage.setItem('arsenal_session', sessionToken);
                    localStorage.setItem('arsenal_user', JSON.stringify(userData));
                    
                    // Clean URL
                    window.history.replaceState({}, document.title, window.location.pathname);
                    
                    console.log('Session OAuth établie:', userData);
                } catch (error) {
                    console.error('Erreur lors du traitement des paramètres OAuth:', error);
                }
            }
            
            // 4. Check authentication avec l'API Flask (version stricte)
            async function checkAuthentication() {
                // Masquer immédiatement l'interface pendant la vérification
                document.body.style.visibility = 'hidden';
                document.body.style.opacity = '0';
                
                try {
                    // D'abord vérifier que le backend est bien accessible
                    const testResponse = await fetch('/api/test', {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    if (!testResponse.ok) {
                        showToast('❌ Backend inaccessible - Vérifiez la connexion', 'error');
                        return false;
                    }
                    
                    // Ensuite vérifier l'authentification utilisateur avec la bonne route
                    const response = await fetch('/api/auth/user', {
                        method: 'GET',
                        credentials: 'include',
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    if (response.ok) {
                        const userInfo = await response.json();
                        if (userInfo.authenticated === true) {
                            // Authentifié - afficher l'interface
                            document.body.style.visibility = 'visible';
                            document.body.style.opacity = '1';
                            document.body.style.transition = 'opacity 0.3s ease';
                            console.log('✅ Utilisateur authentifié:', userInfo.username);
                            showToast('✅ Connexion réussie!', 'success');
                            return true;
                        } else {
                            console.log('❌ Utilisateur non authentifié');
                            showToast('🔐 Authentification Discord requise', 'info');
                            setTimeout(() => window.location.href = '/login', 1500);
                            return false;
                        }
                    } else if (response.status === 401) {
                        console.log('❌ Session expirée, redirection...');
                        showToast('🔐 Session expirée - Redirection vers Discord...', 'info');
                        setTimeout(() => window.location.href = '/login', 1500);
                        return false;
                    } else {
                        console.log('❌ Erreur API:', response.status);
                        showToast('⚠️ Erreur API - Code: ' + response.status, 'warning');
                        return false;
                    }
                } catch (error) {
                    console.error('❌ Erreur vérification session:', error);
                    showToast('❌ Erreur de connexion au backend', 'error');
                    return false;
                }
            }
            
            // 5. Vérifier l'authentification avant de charger le dashboard
            checkAuthentication().then(isAuthenticated => {
                if (isAuthenticated) {
                    // Initialiser la page par défaut
                    initializeDefaultPage();
                    
                    // Charger les vraies données utilisateur depuis l'API
                    loadCurrentUserInfo();
                    
                    // Charger toutes les données
                    loadRealData();
                    loadActivity();
                    refreshDashboard();
                    loadAllData();
                    loadPerformanceData(); // Charger les données de performance
                    
                    // Ajouter des animations d'entrée
                    const cards = document.querySelectorAll('.card');
                    cards.forEach((card, index) => {
                        card.style.animation = 'slideInUp 0.6s ease-out ' + (index * 0.1) + 's both';
                    });

                    // Auto-refresh périodiques
                    setInterval(loadBotStatus, 30000); // Vérifier toutes les 30 secondes
                    setInterval(loadAllData, 60000); // Refresh toutes les minutes
                    setInterval(refreshDashboard, 30000);
                    setInterval(loadPerformanceData, 45000); // Refresh performance toutes les 45 secondes
                    
                    showToast('🚀 Dashboard Arsenal chargé avec succès !', 'success');
                }
            });
        });

        // ==================== BOT STATUS FUNCTIONS ====================
        // Update Bot Status
        function updateBotStatus(isOnline) {
            const statusDot = document.getElementById('bot-status');
            const statusText = document.getElementById('bot-text');
            
            if (isOnline) {
                statusDot.className = 'status-dot online';
                statusText.textContent = 'En ligne';
            } else {
                statusDot.className = 'status-dot offline';
                statusText.textContent = 'Hors ligne';
            }
        }

        // ==================== USER PROFILE FUNCTIONS ====================
        
        // Charger les vraies informations utilisateur
        async function loadCurrentUserInfo() {
            try {
                const response = await fetch('/api/user/profile');
                if (response.ok) {
                    const userData = await response.json();
                    
                    // Mettre à jour l'interface avec les vraies données
                    const userDisplayName = document.getElementById('userDisplayName');
                    const userDisplayRole = document.getElementById('userDisplayRole');
                    const dropdownUserName = document.getElementById('dropdownUserName');
                    const dropdownUserRole = document.getElementById('dropdownUserRole');
                    
                    if (userDisplayName) {
                        userDisplayName.textContent = userData.username || userData.display_name || 'Utilisateur';
                    }
                    if (dropdownUserName) {
                        dropdownUserName.textContent = userData.username || userData.display_name || 'Utilisateur';
                    }
                    
                    // Déterminer le rôle basé sur les permissions
                    let roleLabel = 'Membre';
                    if (userData.permission_level) {
                        const roleLabels = {
                            'owner': 'Propriétaire',
                            'creator': 'Créateur', 
                            'admin': 'Administrateur',
                            'moderator': 'Modérateur',
                            'vip': 'VIP',
                            'member': 'Membre'
                        };
                        roleLabel = roleLabels[userData.permission_level] || 'Membre';
                    } else if (userData.is_owner) {
                        roleLabel = 'Propriétaire';
                    } else if (userData.is_admin) {
                        roleLabel = 'Administrateur';
                    } else if (userData.is_moderator) {
                        roleLabel = 'Modérateur';
                    }
                    
                    if (userDisplayRole) {
                        userDisplayRole.textContent = roleLabel;
                    }
                    if (dropdownUserRole) {
                        dropdownUserRole.textContent = roleLabel;
                    }
                    
                    // Sauvegarder les données utilisateur
                    localStorage.setItem('arsenal_user', JSON.stringify(userData));
                    
                } else {
                    // Fallback avec données par défaut si API non disponible
                    const userDisplayName = document.getElementById('userDisplayName');
                    const userDisplayRole = document.getElementById('userDisplayRole');
                    
                    if (userDisplayName) {
                        userDisplayName.textContent = 'Utilisateur';
                    }
                    if (userDisplayRole) {
                        userDisplayRole.textContent = 'Connectez l\'API';
                    }
                }
            } catch (error) {
                console.error('Erreur chargement profil utilisateur:', error);
                
                // Essayer de charger depuis le localStorage en fallback
                const storedUser = localStorage.getItem('arsenal_user');
                if (storedUser) {
                    try {
                        const user = JSON.parse(storedUser);
                        updateUserInterface(user);
                    } catch (error) {
                        console.error('Erreur parsing stored user data:', error);
                    }
                } else {
                    // Afficher que l'API est requise
                    const userDisplayName = document.getElementById('userDisplayName');
                    const userDisplayRole = document.getElementById('userDisplayRole');
                    
                    if (userDisplayName) {
                        userDisplayName.textContent = 'API Required';
                    }
                    if (userDisplayRole) {
                        userDisplayRole.textContent = 'Connectez le backend';
                    }
                }
            }
        }

        // Close User Dropdown
        function closeUserDropdown() {
            userDropdownOpen = false;
        }

        // User Profile Functions - Appels API réels
        async function showUserProfile() {
            closeUserDropdown();
            try {
                const response = await fetch('/api/user/profile');
                if (response.ok) {
                    const profile = await response.json();
                    showToast(`👤 Profil de ${profile.username}`, 'success');
                    // TODO: Ouvrir modal profil avec les vraies données
                } else {
                    showToast('❌ Erreur chargement profil', 'error');
                }
            } catch (error) {
                showToast('❌ Erreur connexion serveur', 'error');
            }
        }

        async function showUserSettings() {
            closeUserDropdown();
            try {
                const response = await fetch('/api/user/settings');
                if (response.ok) {
                    const settings = await response.json();
                    showToast('⚙️ Paramètres chargés', 'success');
                    // TODO: Ouvrir modal paramètres avec les vraies données
                } else {
                    showToast('❌ Erreur chargement paramètres', 'error');
                }
            } catch (error) {
                showToast('❌ Erreur connexion serveur', 'error');
            }
        }

        async function showUserPermissions() {
            closeUserDropdown();
            try {
                const response = await fetch('/api/user/permissions');
                if (response.ok) {
                    const permissions = await response.json();
                    showToast(`🛡️ Niveau: ${permissions.role}`, 'success');
                    // TODO: Ouvrir modal permissions avec les vraies données
                } else {
                    showToast('❌ Erreur chargement permissions', 'error');
                }
            } catch (error) {
                showToast('❌ Erreur connexion serveur', 'error');
            }
        }

        async function showUserActivity() {
            closeUserDropdown();
            try {
                const response = await fetch('/api/user/activity');
                if (response.ok) {
                    const activity = await response.json();
                    showToast(`📊 ${activity.total_commands} commandes exécutées`, 'success');
                    // TODO: Ouvrir modal activité avec les vraies données
                } else {
                    showToast('❌ Erreur chargement activité', 'error');
                }
            } catch (error) {
                showToast('❌ Erreur connexion serveur', 'error');
            }
        }

        async function showUserSecurity() {
            closeUserDropdown();
            try {
                const response = await fetch('/api/user/security');
                if (response.ok) {
                    const security = await response.json();
                    const mfaStatus = security.mfa_enabled ? 'activé' : 'désactivé';
                    showToast(`🔒 2FA ${mfaStatus}`, security.mfa_enabled ? 'success' : 'warning');
                    // TODO: Ouvrir modal sécurité avec les vraies données
                } else {
                    showToast('❌ Erreur chargement sécurité', 'error');
                }
            } catch (error) {
                showToast('❌ Erreur connexion serveur', 'error');
            }
        }

        // Switch Account
        function switchAccount() {
            closeUserDropdown();
            const confirmSwitch = confirm('🔄 Voulez-vous vous connecter avec un autre compte Discord ?');
            if (confirmSwitch) {
                showToast('🔄 Redirection vers Discord OAuth...', 'info');
                setTimeout(() => {
                    window.location.href = '/auth/login';
                }, 1500);
            }
        }

        // Logout
        function logout() {
            closeUserDropdown();
            const confirmLogout = confirm('🚪 Êtes-vous sûr de vouloir vous déconnecter ?');
            if (confirmLogout) {
                showToast('👋 Déconnexion en cours...', 'info');
                // Supprimer les données de session
                localStorage.removeItem('arsenal_session');
                localStorage.removeItem('arsenal_user');
                setTimeout(() => {
                    window.location.href = '/';
                }, 1500);
            }
        }

        // ============ FONCTIONS SUPPRIMÉES (DUPLIQUÉES) ============
        // Function closeUserDropdown() already exists above - removed duplicate

        // Close dropdown when clicking outside
        // ==================== EVENT LISTENERS GLOBAUX ====================
        document.addEventListener('click', function(event) {
            // Fermer la dropdown utilisateur si on clique à l'extérieur
            const userInfo = document.getElementById('userInfo');
            if (userDropdownOpen && userInfo && !userInfo.contains(event.target)) {
                closeUserDropdown();
            }
            
            // Fermer la sidebar si on clique à l'extérieur (seulement sur mobile)
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.querySelector('.sidebar-toggle');
            if (sidebarOpen && sidebar && sidebarToggle && 
                !sidebar.contains(event.target) && !sidebarToggle.contains(event.target)) {
                // Sur mobile, fermer automatiquement
                if (window.innerWidth <= 768) {
                    closeSidebar();
                }
            }

            // Fermer le sélecteur de thème si on clique à l'extérieur
            const themeSelector = document.getElementById('themeSelector');
            const themeToggle = document.querySelector('[onclick="showThemeSelector()"]');
            if (themeSelector && themeToggle && 
                !themeSelector.contains(event.target) && !themeToggle.contains(event.target)) {
                hideThemeSelector();
            }
        });

        // Gestion du redimensionnement de la fenêtre
        window.addEventListener('resize', function() {
            // Fermer la sidebar automatiquement sur mobile lors du redimensionnement
            if (window.innerWidth <= 768 && sidebarOpen) {
                closeSidebar();
            }
            // Restaurer le comportement normal sur desktop
            if (window.innerWidth > 768) {
                document.body.style.overflow = 'auto';
            }
        });

        // Show Page
        async function showPage(pageId, menuElement) {
            // Hide all pages
            document.querySelectorAll('.content-page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page or create default content
            let targetPage = document.getElementById(pageId);
            if (!targetPage) {
                // Create page if it doesn't exist
                targetPage = createPage(pageId);
            }
            targetPage.classList.add('active');
            
            // Update active menu item
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Find and activate the clicked menu item
            if (menuElement) {
                menuElement.classList.add('active');
            } else {
                // Fallback: find menu item by onclick attribute
                const menuItems = document.querySelectorAll('.menu-item');
                menuItems.forEach(item => {
                    const onclick = item.getAttribute('onclick');
                    if (onclick && onclick.includes(pageId)) {
                        item.classList.add('active');
                    }
                });
            }
            
            // Close sidebar on mobile
            if (window.innerWidth <= 768 && sidebarOpen) {
                closeSidebar();
            }
            
            // Load page-specific data
            await loadPageData(pageId);
            
            console.log('📄 Page affichée:', pageId);
        }

        // Create missing pages dynamically
        function createPage(pageId) {
            const mainContent = document.getElementById('mainContent');
            const newPage = document.createElement('div');
            newPage.className = 'content-page';
            newPage.id = pageId;
            
            // Page content based on ID
            const pageContents = {
                'dashboard': createDashboardPage(),
                'analytics': createAnalyticsPage(),
                'realtime': createRealtimePage(),
                'servers': createServersPage(),
                'users': createUsersPage(),
                'commands': createCommandsPage(),
                'moderation': createModerationPage(),
                'music': createMusicPage(),
                'calculator': createCalculatorPage(),
                'settings': createSettingsPage(),
                'performance': createPerformancePage()
            };
            
            newPage.innerHTML = pageContents[pageId] || createDefaultPage(pageId);
            mainContent.appendChild(newPage);
            return newPage;
        }

        // Load page-specific data
        async function loadPageData(pageId) {
            switch(pageId) {
                case 'dashboard':
                    await loadAllData();
                    break;
                case 'realtime':
                    await refreshRealtime();
                    break;
                case 'servers':
                    await loadServersList();
                    break;
                case 'analytics':
                    await loadAnalytics();
                    break;
                case 'users':
                    await loadUsersData();
                    break;
                case 'calculator':
                    // Initialize calculator after page load
                    setTimeout(initCalculator, 100);
                    break;
                default:
                    console.log('📄 Page sans données spécifiques:', pageId);
            }
        }

        // ==================== PAGE CREATORS ====================
        function createDashboardPage() {
            return `
                <div class="page-header">
                    <div>
                        <h1 class="page-title">Dashboard Arsenal</h1>
                        <div class="breadcrumb">Accueil > Tableau de bord</div>
                    </div>
                </div>
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-server card-icon"></i>
                                Serveurs
                            </div>
                        </div>
                        <div class="stat-number" id="servers-count">Loading...</div>
                        <div class="stat-label">SERVEURS ACTIFS</div>
                        <div style="margin-top: 10px;" id="servers-change">
                            <span style="color: #888;">Chargement...</span>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-users card-icon"></i>
                                Utilisateurs
                            </div>
                        </div>
                        <div class="stat-number" id="users-count">Loading...</div>
                        <div class="stat-label">UTILISATEURS TOTAL</div>
                        <div style="margin-top: 10px;" id="users-change">
                            <span style="color: #888;">Chargement...</span>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-terminal card-icon"></i>
                                Commandes
                            </div>
                        </div>
                        <div class="stat-number" id="commands-count">Loading...</div>
                        <div class="stat-label">COMMANDES EXÉCUTÉES</div>
                        <div style="margin-top: 10px;" id="commands-change">
                            <span style="color: #888;">Chargement...</span>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-bolt card-icon"></i>
                                Statut Bot
                            </div>
                        </div>
                        <div class="status-indicator">
                            <div class="status-dot" id="bot-status"></div>
                            <span id="bot-text">Chargement...</span>
                        </div>
                    </div>
                </div>
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-chart-line card-icon"></i>
                                Activité Récente
                            </div>
                            <button class="btn btn-secondary" onclick="loadActivity()">
                                <i class="fas fa-sync"></i> Actualiser
                            </button>
                        </div>
                        <div class="activity-feed" id="activity-feed">
                            <div style="text-align: center; color: #888; padding: 20px;">
                                <i class="fas fa-spinner fa-spin"></i> Chargement de l'activité...
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function createRealtimePage() {
            return `
                <div class="page-header">
                    <div>
                        <h1 class="page-title">🔴 Temps Réel</h1>
                        <div class="breadcrumb">Monitoring > Temps réel</div>
                    </div>
                    <button class="btn" onclick="refreshRealtime()">
                        <i class="fas fa-sync"></i> Actualiser
                    </button>
                </div>
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-users card-icon"></i>
                                Utilisateurs Live
                            </div>
                        </div>
                        <div class="stat-number" id="live-users">
                            <i class="fas fa-spinner fa-spin"></i>
                        </div>
                        <div class="stat-label">CONNECTÉS MAINTENANT</div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-bolt card-icon"></i>
                                Activité Live
                            </div>
                        </div>
                        <div class="activity-feed" id="live-activity">
                            <!-- Live activity will be populated here -->
                        </div>
                    </div>
                </div>
            `;
        }

        function createServersPage() {
            return `
                <div class="page-header">
                    <div>
                        <h1 class="page-title">🖥️ Serveurs</h1>
                        <div class="breadcrumb">Gestion > Serveurs</div>
                    </div>
                    <button class="btn" onclick="refreshServers()">
                        <i class="fas fa-sync"></i> Actualiser
                    </button>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-server card-icon"></i>
                            Liste des Serveurs
                        </div>
                    </div>
                    <div id="serversList">
                        <div style="text-align: center; color: #888; padding: 20px;">
                            <i class="fas fa-spinner fa-spin"></i> Chargement des serveurs...
                        </div>
                    </div>
                </div>
            `;
        }

        function createCalculatorPage() {
            return `
                <div class="page-header">
                    <div>
                        <h1 class="page-title">🔢 SuperCalculator Hunt Royal</h1>
                        <div class="breadcrumb">Fonctionnalités > SuperCalculator</div>
                    </div>
                </div>
                <div class="calculator-container">
                    <div class="calculator-tabs">
                        <button class="calc-tab active" onclick="switchCalculatorTab('gems', this)">
                            <i class="fas fa-gem"></i> Calculateur de Gemmes
                        </button>
                        <button class="calc-tab" onclick="switchCalculatorTab('upgrades', this)">
                            <i class="fas fa-arrow-up"></i> Améliorations
                        </button>
                        <button class="calc-tab" onclick="switchCalculatorTab('economy', this)">
                            <i class="fas fa-coins"></i> Économie
                        </button>
                    </div>
                    
                    <div id="gems-calculator" class="calc-content active">
                        <div class="calculator-grid">
                            <div class="calc-section">
                                <h3><i class="fas fa-gem"></i> Sélection de Gemme</h3>
                                <div class="gems-grid" id="gemsGrid">
                                    <!-- Gemmes chargées dynamiquement -->
                                </div>
                            </div>
                            
                            <div class="calc-section">
                                <h3><i class="fas fa-sword"></i> Configuration Équipement</h3>
                                <div class="equipment-config">
                                    <div class="equipment-item">
                                        <div class="equipment-header">
                                            <i class="fas fa-shield-alt"></i>
                                            <span>Casque</span>
                                        </div>
                                        <div class="level-controls">
                                            <button class="level-button" onclick="adjustLevel('helmet', -1)">-</button>
                                            <div class="level-display" id="helmet-level">Niveau 1</div>
                                            <button class="level-button" onclick="adjustLevel('helmet', 1)">+</button>
                                        </div>
                                        <div class="slots-container" id="helmet-slots">
                                            <!-- Slots générés dynamiquement -->
                                        </div>
                                    </div>
                                    
                                    <div class="equipment-item">
                                        <div class="equipment-header">
                                            <i class="fas fa-tshirt"></i>
                                            <span>Plastron</span>
                                        </div>
                                        <div class="level-controls">
                                            <button class="level-button" onclick="adjustLevel('chestplate', -1)">-</button>
                                            <div class="level-display" id="chestplate-level">Niveau 1</div>
                                            <button class="level-button" onclick="adjustLevel('chestplate', 1)">+</button>
                                        </div>
                                        <div class="slots-container" id="chestplate-slots">
                                            <!-- Slots générés dynamiquement -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="calc-section full-width">
                                <h3><i class="fas fa-chart-line"></i> Résultats de Calcul</h3>
                                <div class="results-grid">
                                    <div class="result-card">
                                        <div class="result-icon">💎</div>
                                        <div class="result-value" id="total-gems">0</div>
                                        <div class="result-label">Gemmes Totales</div>
                                    </div>
                                    <div class="result-card">
                                        <div class="result-icon">⚡</div>
                                        <div class="result-value" id="total-power">0</div>
                                        <div class="result-label">Puissance Totale</div>
                                    </div>
                                    <div class="result-card">
                                        <div class="result-icon">💰</div>
                                        <div class="result-value" id="total-cost">0</div>
                                        <div class="result-label">Coût Total</div>
                                    </div>
                                    <div class="result-card">
                                        <div class="result-icon">📊</div>
                                        <div class="result-value" id="efficiency-ratio">0%</div>
                                        <div class="result-label">Efficacité</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="upgrades-calculator" class="calc-content">
                        <div class="coming-soon">
                            <i class="fas fa-wrench"></i>
                            <h3>Calculateur d'Améliorations</h3>
                            <p>En cours de développement...</p>
                        </div>
                    </div>
                    
                    <div id="economy-calculator" class="calc-content">
                        <div class="coming-soon">
                            <i class="fas fa-chart-pie"></i>
                            <h3>Calculateur d'Économie</h3>
                            <p>En cours de développement...</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function createDefaultPage(pageId) {
            return `
                <div class="page-header">
                    <div>
                        <h1 class="page-title">${pageId.charAt(0).toUpperCase() + pageId.slice(1)}</h1>
                        <div class="breadcrumb">Arsenal > ${pageId}</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-wrench card-icon"></i>
                            En Développement
                        </div>
                    </div>
                    <div style="text-align: center; padding: 40px;">
                        <div style="font-size: 4em; color: #00fff7; margin-bottom: 20px;">
                            <i class="fas fa-code"></i>
                        </div>
                        <h3 style="color: #00fff7; margin-bottom: 15px;">Page ${pageId} en cours de développement</h3>
                        <p style="color: #888; margin-bottom: 20px;">Cette fonctionnalité sera bientôt disponible.</p>
                        <button class="btn" onclick="showToast('🚧 Fonctionnalité en développement', 'info')">
                            <i class="fas fa-bell"></i> Me notifier quand c'est prêt
                        </button>
                    </div>
                </div>
            `;
        }

        // Load Activity Feed
        // Load Activity Feed - Appel API réel avec fallback
        async function loadActivity() {
            const feed = document.getElementById('activity-feed');
            if (!feed) return;

            try {
                const response = await fetch('/api/activity/feed');
                if (response.ok) {
                    const activities = await response.json();
                    
                    feed.innerHTML = '';

                    if (activities && activities.length > 0) {
                        activities.forEach(activity => {
                            const item = document.createElement('div');
                            item.className = 'activity-item';
                            item.innerHTML = 
                                '<div class="activity-icon">' +
                                    '<i class="' + activity.icon + '"></i>' +
                                '</div>' +
                                '<div class="activity-content">' +
                                    '<div class="activity-text">' + activity.text + '</div>' +
                                    '<div class="activity-time">' + activity.time + '</div>' +
                                    (activity.server ? '<div class="activity-meta">Serveur: ' + activity.server + '</div>' : '') +
                                    (activity.user ? '<div class="activity-meta">Utilisateur: ' + activity.user + '</div>' : '') +
                                '</div>';
                            feed.appendChild(item);
                        });
                    } else {
                        feed.innerHTML = '<div class="no-activity">Aucune activité récente</div>';
                    }
                } else {
                    throw new Error('API non disponible');
                }
            } catch (error) {
                console.error('Erreur chargement activité:', error);
                // Afficher message d'erreur API au lieu de données fictives
                feed.innerHTML = '<div style="text-align: center; color: #ffaa00; padding: 20px;">' +
                    '<i class="fas fa-exclamation-triangle"></i><br>' +
                    'API non disponible<br>' +
                    '<small>Connectez le backend pour voir l\'activité réelle</small>' +
                '</div>';
            }
        }

        // Refresh Dashboard - Vraies données dynamiques
        async function refreshDashboard() {
            try {
                showToast('🔄 Actualisation des données...', 'info');
                
                // Check bot status first
                try {
                    const botStatusResponse = await fetch('/api/bot/status');
                    if (botStatusResponse.ok) {
                        const botStatus = await botStatusResponse.json();
                        updateBotStatus(botStatus.online || true);
                    } else {
                        // Default to online if endpoint is not available
                        updateBotStatus(true);
                    }
                } catch (error) {
                    console.log('Bot status endpoint not available, defaulting to online');
                    updateBotStatus(true);
                }
                
                // Charger les statistiques réelles du dashboard
                try {
                    const response = await fetch('/api/stats/dashboard');
                    if (response.ok) {
                        const data = await response.json();
                        
                        // Mettre à jour les serveurs avec vraies données
                        if (data.servers_count !== undefined) {
                            document.getElementById('servers-count').textContent = data.servers_count;
                            const serverChange = data.servers_change || 0;
                            const changeColor = serverChange >= 0 ? '#00ff88' : '#ff4444';
                            const changeIcon = serverChange >= 0 ? '+' : '';
                            document.getElementById('servers-change').innerHTML = 
                                `<span style="color: ${changeColor};">${changeIcon}${serverChange} cette semaine</span>`;
                        }
                        
                        // Mettre à jour les utilisateurs avec vraies données
                        if (data.users_count !== undefined) {
                            document.getElementById('users-count').textContent = data.users_count.toLocaleString();
                            const userChange = data.users_change || 0;
                            const changeColor = userChange >= 0 ? '#00ff88' : '#ff4444';
                            const changeIcon = userChange >= 0 ? '+' : '';
                            document.getElementById('users-change').innerHTML = 
                                `<span style="color: ${changeColor};">${changeIcon}${userChange} cette semaine</span>`;
                        }
                        
                        // Mettre à jour les commandes avec vraies données
                        if (data.commands_count !== undefined) {
                            document.getElementById('commands-count').textContent = data.commands_count.toLocaleString();
                            const commandsToday = data.commands_today || 0;
                            document.getElementById('commands-change').innerHTML = 
                                `<span style="color: #00ff88;">+${commandsToday} aujourd'hui</span>`;
                        }
                        
                    } else {
                        // Si l'API dashboard n'existe pas, essayer l'ancienne API
                        const fallbackResponse = await fetch('/api/stats');
                        if (fallbackResponse.ok) {
                            const fallbackData = await fallbackResponse.json();
                            
                            if (fallbackData.total_servers !== undefined) {
                                document.getElementById('servers-count').textContent = fallbackData.total_servers;
                                document.getElementById('servers-change').innerHTML = '<span style="color: #888;">Données limitées</span>';
                            }
                            
                            if (fallbackData.total_users !== undefined) {
                                document.getElementById('users-count').textContent = fallbackData.total_users.toLocaleString();
                                document.getElementById('users-change').innerHTML = '<span style="color: #888;">Données limitées</span>';
                            }
                            
                            if (fallbackData.total_commands !== undefined) {
                                document.getElementById('commands-count').textContent = fallbackData.total_commands.toLocaleString();
                                document.getElementById('commands-change').innerHTML = '<span style="color: #888;">+' + (fallbackData.commands_24h || 0) + ' aujourd\'hui</span>';
                            }
                        } else {
                            throw new Error('APIs non disponibles');
                        }
                    }
                } catch (error) {
                    console.error('Erreur chargement stats:', error);
                    // Afficher que l'API est requise
                    document.getElementById('servers-count').innerHTML = '<span style="color: #ffaa00;">API Required</span>';
                    document.getElementById('users-count').innerHTML = '<span style="color: #ffaa00;">API Required</span>';
                    document.getElementById('commands-count').innerHTML = '<span style="color: #ffaa00;">API Required</span>';
                    document.getElementById('servers-change').innerHTML = '<span style="color: #888;">Connectez l\'API backend</span>';
                    document.getElementById('users-change').innerHTML = '<span style="color: #888;">Connectez l\'API backend</span>';
                    document.getElementById('commands-change').innerHTML = '<span style="color: #888;">Connectez l\'API backend</span>';
                }

                // Charger les métriques de performance
                await loadPerformanceMetrics();
                
                // Charger les statistiques utilisateurs
                await loadUserStats();
                
                // Recharger l'activité
                loadActivity();
                
                showToast('✅ Données actualisées !', 'success');
            } catch (error) {
                console.error('Erreur actualisation:', error);
                showToast('❌ Erreur lors de l\'actualisation', 'error');
            }
        }

        // Load User Statistics
        async function loadUserStats() {
            try {
                const response = await fetch('/api/stats');
                if (response.ok) {
                    const data = await response.json();
                    
                    // Mettre à jour les stats utilisateurs
                    const totalUsersElement = document.getElementById('total-users');
                    const active7DaysElement = document.getElementById('active-7days');
                    const newUsersElement = document.getElementById('new-users');
                    const activeUsersElement = document.getElementById('active-users');
                    
                    if (totalUsersElement) {
                        totalUsersElement.textContent = data.total_users || data.users || 'N/A';
                    }
                    if (active7DaysElement) {
                        active7DaysElement.textContent = data.active_7days || 'N/A';
                    }
                    if (newUsersElement) {
                        newUsersElement.textContent = data.new_users || 'N/A';
                    }
                    if (activeUsersElement) {
                        activeUsersElement.textContent = data.active_users || 'N/A';
                    }
                } else {
                    // Afficher que l'API est requise au lieu de données fictives
                    const totalUsersElement = document.getElementById('total-users');
                    const active7DaysElement = document.getElementById('active-7days');
                    const newUsersElement = document.getElementById('new-users');
                    const activeUsersElement = document.getElementById('active-users');
                    
                    if (totalUsersElement) totalUsersElement.innerHTML = '<span style="color: #ffaa00;">API Required</span>';
                    if (active7DaysElement) active7DaysElement.innerHTML = '<span style="color: #ffaa00;">API Required</span>';
                    if (newUsersElement) newUsersElement.innerHTML = '<span style="color: #ffaa00;">API Required</span>';
                    if (activeUsersElement) activeUsersElement.innerHTML = '<span style="color: #ffaa00;">API Required</span>';
                }
            } catch (error) {
                console.error('Erreur chargement stats utilisateurs:', error);
                // Afficher que l'API est requise au lieu de données fictives
                const totalUsersElement = document.getElementById('total-users');
                const active7DaysElement = document.getElementById('active-7days');
                const newUsersElement = document.getElementById('new-users');
                const activeUsersElement = document.getElementById('active-users');
                
                if (totalUsersElement) totalUsersElement.innerHTML = '<span style="color: #ffaa00;">API Required</span>';
                if (active7DaysElement) active7DaysElement.innerHTML = '<span style="color: #ffaa00;">API Required</span>';
                if (newUsersElement) newUsersElement.innerHTML = '<span style="color: #ffaa00;">API Required</span>';
                if (activeUsersElement) activeUsersElement.innerHTML = '<span style="color: #ffaa00;">API Required</span>';
            }
        }

        // Load Performance Metrics
        async function loadPerformanceMetrics() {
            try {
                const response = await fetch('/api/bot/performance');
                if (response.ok) {
                    const data = await response.json();
                    
                    // Mise à jour des métriques de performance
                    if (data.cpu_usage !== undefined) {
                        document.getElementById('cpu-usage').textContent = data.cpu_usage + '%';
                    }
                    if (data.memory_usage !== undefined) {
                        document.getElementById('ram-usage').textContent = data.memory_usage + ' MB';
                    }
                    if (data.uptime !== undefined) {
                        document.getElementById('uptime').textContent = data.uptime;
                    }
                    if (data.discord_latency !== undefined) {
                        document.getElementById('discord-latency').textContent = data.discord_latency + 'ms';
                    }
                } else {
                    // Afficher que l'API est requise au lieu de données fictives
                    document.getElementById('cpu-usage').innerHTML = '<span style="color: #ffaa00;">API Required</span>';
                    document.getElementById('ram-usage').innerHTML = '<span style="color: #ffaa00;">API Required</span>';
                    document.getElementById('uptime').innerHTML = '<span style="color: #ffaa00;">API Required</span>';
                    document.getElementById('discord-latency').innerHTML = '<span style="color: #ffaa00;">API Required</span>';
                }
            } catch (error) {
                console.error('Erreur métriques performance:', error);
                // Afficher que l'API est requise au lieu de données fictives
                document.getElementById('cpu-usage').innerHTML = '<span style="color: #ffaa00;">API Required</span>';
                document.getElementById('ram-usage').innerHTML = '<span style="color: #ffaa00;">API Required</span>';
                document.getElementById('uptime').innerHTML = '<span style="color: #ffaa00;">API Required</span>';
                document.getElementById('discord-latency').innerHTML = '<span style="color: #ffaa00;">API Required</span>';
            }
        }

        // Get Server Icon
        function getServerIcon(serverName) {
            if (!serverName) return 'S';
            const words = serverName.split(' ');
            if (words.length >= 2) {
                return words[0][0].toUpperCase() + words[1][0].toUpperCase();
            }
            return serverName.slice(0, 2).toUpperCase();
        }

        // Select Server
        async function selectServer(serverId, serverName) {
            // Retirer la sélection des autres serveurs
            document.querySelectorAll('.server-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            // Sélectionner le serveur cliqué
            event.target.closest('.server-item').classList.add('selected');
            
            // Stocker le serveur sélectionné
            localStorage.setItem('selectedServer', JSON.stringify({
                id: serverId,
                name: serverName
            }));
            
            showToast('🌐 Serveur sélectionné : ' + serverName, 'success');
            
            // Recharger les données pour ce serveur
            await refreshDashboard();
        }

        // ==================== FONCTIONS GESTION SERVEURS ====================

        // Refresh Servers List
        async function refreshServers() {
            await loadServersList();
            await loadMainServersList();
            showToast('🔄 Liste des serveurs actualisée', 'success');
        }

        // Load Main Servers List (for servers page)
        async function loadMainServersList() {
            try {
                console.log('🔄 Chargement serveurs sidebar...');
                const response = await fetch('/api/servers/list');
                
                if (!response.ok) {
                    throw new Error('HTTP ' + response.status);
                }
                
                const data = await response.json();
                console.log('✅ Serveurs reçus:', data);
                
                const serversList = document.getElementById('main-servers-list');
                if (!serversList) {
                    console.log('❌ Element main-servers-list introuvable');
                    return;
                }
                
                if (data.servers && data.servers.length > 0) {
                    console.log('✅ ' + data.servers.length + ' serveurs à afficher');
                    
                    let serversHTML = '';
                    data.servers.forEach(function(server) {
                        serversHTML += '<div class="server-card" onclick="selectServerForConfig(\'' + server.id + '\', \'' + server.name + '\')">';
                        serversHTML += '    <div class="server-card-header">';
                        serversHTML += '        <div class="server-card-icon">' + getServerIcon(server.name) + '</div>';
                        serversHTML += '        <div class="server-card-info">';
                        serversHTML += '            <h3>' + server.name + '</h3>';
                        serversHTML += '            <p>' + server.member_count + ' membres</p>';
                        serversHTML += '        </div>';
                        serversHTML += '    </div>';
                        serversHTML += '    <div class="server-card-stats">';
                        serversHTML += '        <div class="server-stat">';
                        serversHTML += '            <div class="server-stat-value">' + server.member_count + '</div>';
                        serversHTML += '            <div class="server-stat-label">Membres</div>';
                        serversHTML += '        </div>';
                        serversHTML += '        <div class="server-stat">';
                        serversHTML += '            <div class="server-stat-value">' + (server.online ? 'En ligne' : 'Hors ligne') + '</div>';
                        serversHTML += '            <div class="server-stat-label">Status</div>';
                        serversHTML += '        </div>';
                        serversHTML += '        <div class="server-stat">';
                        serversHTML += '            <div class="server-stat-value">' + (server.bot_permissions ? server.bot_permissions.length : 0) + '</div>';
                        serversHTML += '            <div class="server-stat-label">Permissions</div>';
                        serversHTML += '        </div>';
                        serversHTML += '    </div>';
                        serversHTML += '</div>';
                    });
                    
                    serversList.innerHTML = serversHTML;
                    
                    // Mettre à jour le compteur
                    const countElement = document.getElementById('servers-connected-count');
                    if (countElement) {
                        countElement.textContent = data.servers.length + ' serveur' + (data.servers.length > 1 ? 's' : '');
                    }
                    console.log('✅ Sidebar serveurs mise à jour !');
                } else {
                    console.log('⚠️ Aucun serveur dans la réponse');
                    serversList.innerHTML = '<div style="text-align: center; color: #888; padding: 40px;">' +
                        '<i class="fas fa-server" style="font-size: 3em; margin-bottom: 15px;"></i><br>' +
                        '<h3>Aucun serveur trouvé</h3>' +
                        '<p>Le bot n\'est connecté à aucun serveur Discord.</p>' +
                        '</div>';
                }
            } catch (error) {
                console.error('❌ Erreur chargement serveurs principaux:', error);
                const serversList = document.getElementById('main-servers-list');
                if (serversList) {
                    serversList.innerHTML = `
                        <div style="text-align: center; color: #ff4444; padding: 40px;">
                            <i class="fas fa-exclamation-triangle" style="font-size: 3em; margin-bottom: 15px;"></i><br>
                            <h3>Erreur de chargement</h3>
                            <p>Impossible de récupérer la liste des serveurs.</p>
                        </div>
                    `;
                }
            }
        }

        // Select Server for Configuration
        async function selectServerForConfig(serverId, serverName) {
            // Mettre à jour la sélection visuelle
            document.querySelectorAll('.server-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.server-card').classList.add('selected');
            
            // Afficher le panel de configuration
            const configPanel = document.getElementById('server-config-panel');
            const serverNameElement = document.getElementById('selected-server-name');
            
            if (configPanel && serverNameElement) {
                configPanel.style.display = 'block';
                serverNameElement.textContent = serverName;
                
                // Stocker le serveur sélectionné pour la configuration
                localStorage.setItem('configServer', JSON.stringify({
                    id: serverId,
                    name: serverName
                }));
                
                // Charger la configuration actuelle
                await loadServerConfig(serverId);
                
                showToast('⚙️ Configuration de ' + serverName + ' chargée', 'success');
            }
        }

        // Show Configuration Tab
        function showConfigTab(tabName) {
            // Cacher tous les contenus
            document.querySelectorAll('.config-tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Désactiver tous les onglets
            document.querySelectorAll('.config-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Activer l'onglet et le contenu sélectionnés
            document.getElementById('config-' + tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Load Server Configuration
        async function loadServerConfig(serverId) {
            try {
                // Charger la configuration depuis l'API
                const response = await fetch(`/api/servers/${serverId}/config`);
                
                if (response.ok) {
                    const config = await response.json();
                    
                    // Remplir les champs de configuration
                    Object.keys(config).forEach(key => {
                        const element = document.getElementById(key.replace('_', '-'));
                        if (element) {
                            if (element.type === 'checkbox') {
                                element.checked = config[key];
                            } else if (element.type === 'range') {
                                element.value = config[key];
                                // Mettre à jour l'affichage du volume
                                if (key === 'default_volume') {
                                    document.getElementById('volume-display').textContent = config[key] + '%';
                                }
                            } else {
                                element.value = config[key];
                            }
                        }
                    });
                    
                    showToast('⚙️ Configuration chargée', 'success');
                } else {
                    // Fallback avec configuration par défaut si le serveur n'a pas de config
                    const defaultConfig = {
                        prefix: '!',
                        logs_channel: '',
                        language: 'fr',
                        anti_spam: true,
                        word_filter: false,
                        auto_mute_duration: '300',
                        music_channel: '',
                        default_volume: 50,
                        max_queue: 20,
                        admin_role: '',
                        dj_role: ''
                    };
                    
                    Object.keys(defaultConfig).forEach(key => {
                        const element = document.getElementById(key.replace('_', '-'));
                        if (element) {
                            if (element.type === 'checkbox') {
                                element.checked = defaultConfig[key];
                            } else if (element.type === 'range') {
                                element.value = defaultConfig[key];
                                if (key === 'default_volume') {
                                    document.getElementById('volume-display').textContent = defaultConfig[key] + '%';
                                }
                            } else {
                                element.value = defaultConfig[key];
                            }
                        }
                    });
                    
                    showToast('⚙️ Configuration par défaut chargée', 'info');
                }
                
            } catch (error) {
                console.error('Erreur chargement configuration:', error);
                showToast('❌ Erreur lors du chargement de la configuration', 'error');
            }
        }

        // Save Server Configuration
        async function saveServerConfig() {
            try {
                const configServer = JSON.parse(localStorage.getItem('configServer') || '{}');
                
                if (!configServer.id) {
                    showToast('❌ Aucun serveur sélectionné', 'error');
                    return;
                }
                
                // Collecter les données de configuration
                const config = {
                    server_id: configServer.id,
                    prefix: document.getElementById('server-prefix').value,
                    logs_channel: document.getElementById('logs-channel').value,
                    language: document.getElementById('server-language').value,
                    anti_spam: document.getElementById('anti-spam').checked,
                    word_filter: document.getElementById('word-filter').checked,
                    auto_mute_duration: parseInt(document.getElementById('auto-mute-duration').value),
                    music_channel: document.getElementById('music-channel').value,
                    default_volume: parseInt(document.getElementById('default-volume').value),
                    max_queue: parseInt(document.getElementById('max-queue').value),
                    admin_role: document.getElementById('admin-role').value,
                    dj_role: document.getElementById('dj-role').value
                };
                
                // Envoyer la configuration à l'API
                const response = await fetch(`/api/servers/${config.server_id}/config`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(config)
                });
                
                if (response.ok) {
                    showToast('💾 Configuration sauvegardée avec succès !', 'success');
                } else {
                    showToast('❌ Erreur lors de la sauvegarde', 'error');
                }
                
            } catch (error) {
                console.error('Erreur sauvegarde configuration:', error);
                showToast('❌ Erreur lors de la sauvegarde', 'error');
            }
        }

        // Reset Server Configuration
        async function resetServerConfig() {
            if (confirm('⚠️ Êtes-vous sûr de vouloir réinitialiser la configuration ?')) {
                const configServer = JSON.parse(localStorage.getItem('configServer') || '{}');
                if (configServer.id) {
                    await loadServerConfig(configServer.id);
                    showToast('🔄 Configuration réinitialisée', 'success');
                }
            }
        }

        // Close Server Config Panel
        function closeServerConfig() {
            const configPanel = document.getElementById('server-config-panel');
            if (configPanel) {
                configPanel.style.display = 'none';
            }
            
            // Désélectionner le serveur
            document.querySelectorAll('.server-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            localStorage.removeItem('configServer');
        }

        // ============ FONCTIONS SUPPRIMÉES (DUPLIQUÉES) ============
        // Function loadActivity() already exists above - removed duplicate

        // Mettre à jour l'interface utilisateur avec les vraies données
        function updateUserInterface(user) {
            // Mettre à jour l'avatar et les infos utilisateur
            const userDisplayName = document.getElementById('userDisplayName');
            const userDisplayRole = document.getElementById('userDisplayRole');
            const dropdownUserName = document.getElementById('dropdownUserName');
            const dropdownUserRole = document.getElementById('dropdownUserRole');
            
            if (userDisplayName) {
                userDisplayName.textContent = user.username || user.display_name || 'Utilisateur';
            }
            if (dropdownUserName) {
                dropdownUserName.textContent = user.username || user.display_name || 'Utilisateur';
            }
            
            const level = user.permission_level || 'member';
            const roleLabels = {
                'member': 'Membre',
                'moderator': 'Modérateur',
                'admin': 'Administrateur',
                'owner': 'Propriétaire',
                'creator': 'Créateur'
            };
            
            if (userDisplayRole) {
                userDisplayRole.textContent = roleLabels[level] || 'Membre';
            }
            if (dropdownUserRole) {
                dropdownUserRole.textContent = roleLabels[level] || 'Membre';
            }
        }

        // Charger les vraies données du bot
        async function loadRealData() {
            try {
                // Charger les stats générales
                const statsResponse = await fetch('/api/stats/general');
                if (statsResponse.ok) {
                    const stats = await statsResponse.json();
                    
                    // Mettre à jour les stats avec les vraies données
                    if (stats.servers) document.getElementById('servers-count').textContent = stats.servers;
                    if (stats.users) document.getElementById('users-count').textContent = stats.users;
                    if (stats.commands) document.getElementById('commands-count').textContent = stats.commands;
                    if (stats.uptime) document.getElementById('uptime').textContent = stats.uptime;
                    
                    // Mettre à jour le statut du bot
                    const statusDot = document.getElementById('bot-status');
                    const statusText = document.getElementById('bot-text');
                    
                    if (stats.online_status) {
                        statusDot.className = 'status-dot online';
                        statusText.textContent = 'En ligne';
                    } else {
                        statusDot.className = 'status-dot offline';
                        statusText.textContent = 'Hors ligne';
                    }
                }
                
                // Charger les guilds/serveurs
                const guildsResponse = await fetch('/api/guilds');
                if (guildsResponse.ok) {
                    const guilds = await guildsResponse.json();
                    updateGuildsDisplay(guilds);
                }
                
                // Charger les salons disponibles
                const channelsResponse = await fetch('/api/channels');
                if (channelsResponse.ok) {
                    const channels = await channelsResponse.json();
                    updateChannelsSelect(channels);
                }
                
                // Charger les permissions utilisateur
                const permissionsResponse = await fetch('/api/user/permissions');
                if (permissionsResponse.ok) {
                    const permData = await permissionsResponse.json();
                    updateMenuBasedOnPermissions(permData.permissions);
                }
                
            } catch (error) {
                console.error('❌ Erreur API:', error);
                // Vérifier si c'est un problème d'authentification
                if (error.message && error.message.includes('401')) {
                    showToast('🔐 Authentification requise - Redirection vers Discord...', 'info');
                    setTimeout(() => {
                        window.location.href = '/auth/login';
                    }, 2000);
                } else {
                    showToast('⚠️ Backend non connecté - Interface en mode lecture seule', 'warning');
                }
            }
        }
        
        // Mettre à jour l'affichage des serveurs
        function updateGuildsDisplay(guilds) {
            const serverList = document.querySelector('.server-list');
            if (serverList && guilds && guilds.length > 0) {
                serverList.innerHTML = guilds.map(guild => `
                    <div class="server-item">
                        <i class="fas fa-server"></i>
                        <span>${guild.name}</span>
                        <div class="server-stats">
                            <span>${guild.member_count || 'N/A'} membres</span>
                        </div>
                    </div>
                `).join('');
            }
        }
        
        // Mettre à jour les options de salons
        function updateChannelsSelect(channels) {
            const selects = document.querySelectorAll('select[name*="channel"], select[id*="channel"]');
            selects.forEach(select => {
                if (select && channels && channels.length > 0) {
                    select.innerHTML = '<option value="">Sélectionnez un salon</option>' +
                        channels.map(channel => `<option value="${channel.id}">#${channel.name}</option>`).join('');
                }
            });
        }

        // Mettre à jour le menu basé sur les permissions
        function updateMenuBasedOnPermissions(permissions) {
            const menuItems = document.querySelectorAll('.menu-item');
            
            menuItems.forEach(item => {
                const onclick = item.getAttribute('onclick');
                if (!onclick) return;
                
                // Masquer certains éléments selon les permissions
                if (onclick.includes('database') && !permissions.system_admin) {
                    item.style.opacity = '0.5';
                    item.style.pointerEvents = 'none';
                }
                if (onclick.includes('api') && !permissions.bot_control) {
                    item.style.opacity = '0.5';
                    item.style.pointerEvents = 'none';
                }
                if (onclick.includes('moderation') && !permissions.moderation_full) {
                    item.style.opacity = '0.5';
                    item.style.pointerEvents = 'none';
                }
            });
        }

        // Close sidebar when clicking outside
        // ==================== NOUVELLES FONCTIONS ====================

        // Ouvrir le Casino
        function openCasino() {
            window.open('/casino.html', '_blank', 'width=1200,height=800');
        }

        // Charger la liste des serveurs
        async function refreshServers() {
            try {
                const response = await fetch('/api/servers');
                const data = await response.json();
                const container = document.getElementById('serversList');
                container.innerHTML = '';

                if (data.servers) {
                    data.servers.forEach(server => {
                        const serverDiv = document.createElement('div');
                        serverDiv.className = 'server-item';
                        serverDiv.style.cssText = 'padding: 15px; margin: 10px 0; background: rgba(0,255,247,0.1); border-radius: 10px; border: 1px solid rgba(0,255,247,0.3);';
                        serverDiv.innerHTML = 
                            '<div style="display: flex; justify-content: space-between; align-items: center;">' +
                                '<div>' +
                                    '<div style="font-weight: bold; color: #00fff7;">' + server.name + '</div>' +
                                    '<div style="color: #888; font-size: 0.9em;">' + server.member_count + ' membres</div>' +
                                '</div>' +
                                '<div style="text-align: right;">' +
                                    '<div class="status-dot ' + (server.online ? '' : 'offline') + '"></div>' +
                                    '<div style="font-size: 0.8em; color: #888;">' + (server.online ? 'En ligne' : 'Hors ligne') + '</div>' +
                                '</div>' +
                            '</div>';
                        container.appendChild(serverDiv);
                    });
                } else {
                    container.innerHTML = '<div style="text-align: center; color: #888; padding: 20px;">Aucun serveur trouvé</div>';
                }
            } catch (error) {
                console.error('Erreur chargement serveurs:', error);
                document.getElementById('serversList').innerHTML = '<div style="text-align: center; color: #ff4444; padding: 20px;">Erreur de chargement</div>';
            }
        }

        // Démarrer la musique - Appel API réel
        async function startMusic() {
            try {
                const response = await fetch('/api/music/start');
                if (response.ok) {
                    const data = await response.json();
                    
                    const currentSong = document.getElementById('currentSong');
                    if (data.current_track) {
                        currentSong.innerHTML = 
                            '<div style="text-align: center; padding: 20px;">' +
                                `<div style="font-size: 1.2em; margin-bottom: 10px;">🎵 En cours: "${data.current_track.title}"</div>` +
                                `<div style="color: #888; margin-bottom: 15px;">${data.current_track.artist}</div>` +
                                '<div style="display: flex; gap: 10px; justify-content: center;">' +
                                    '<button class="btn btn-secondary" onclick="pauseMusic()">' +
                                        '<i class="fas fa-pause"></i> Pause' +
                                    '</button>' +
                                    '<button class="btn btn-secondary" onclick="skipMusic()">' +
                                        '<i class="fas fa-forward"></i> Skip' +
                                    '</button>' +
                                    '<button class="btn btn-secondary" onclick="stopMusic()">' +
                                        '<i class="fas fa-stop"></i> Stop' +
                                    '</button>' +
                                '</div>' +
                            '</div>';
                    }
                    
                    // Charger la vraie queue
                    loadMusicQueue();
                    showToast('🎵 Lecture démarrée', 'success');
                } else {
                    showToast('❌ Impossible de démarrer la musique', 'error');
                }
            } catch (error) {
                console.error('Erreur démarrage musique:', error);
                showToast('❌ Erreur connexion au système musical', 'error');
            }
        }

        async function pauseMusic() {
            try {
                const response = await fetch('/api/music/pause', { method: 'POST' });
                if (response.ok) {
                    showToast('⏸️ Musique en pause', 'success');
                } else {
                    showToast('❌ Erreur pause', 'error');
                }
            } catch (error) {
                showToast('❌ Erreur connexion', 'error');
            }
        }

        async function skipMusic() {
            try {
                const response = await fetch('/api/music/skip', { method: 'POST' });
                if (response.ok) {
                    const data = await response.json();
                    showToast(`⏭️ Chanson suivante: ${data.next_track?.title || 'Inconnue'}`, 'success');
                    loadCurrentTrack();
                } else {
                    showToast('❌ Erreur skip', 'error');
                }
            } catch (error) {
                showToast('❌ Erreur connexion', 'error');
            }
        }

        async function stopMusic() {
            try {
                const response = await fetch('/api/music/stop', { method: 'POST' });
                if (response.ok) {
                    const currentSong = document.getElementById('currentSong');
                    currentSong.innerHTML = 
                        '<div style="text-align: center; padding: 20px;">' +
                            '<div style="font-size: 1.2em; margin-bottom: 10px;">🎵 Aucune musique en cours</div>' +
                            '<button class="btn" onclick="startMusic()">' +
                                '<i class="fas fa-play"></i> Démarrer' +
                            '</button>' +
                        '</div>';
                    
                    const queue = document.getElementById('musicQueue');
                    if (queue) {
                        queue.innerHTML = '<div style="text-align: center; color: #888; padding: 20px;">File d\'attente vide</div>';
                    }
                    
                    showToast('⏹️ Musique arrêtée', 'success');
                } else {
                    showToast('❌ Erreur arrêt', 'error');
                }
            } catch (error) {
                showToast('❌ Erreur connexion', 'error');
            }
        }

        // Charger la file d'attente musicale
        async function loadMusicQueue() {
            try {
                const response = await fetch('/api/music/queue');
                if (response.ok) {
                    const data = await response.json();
                    const queue = document.getElementById('musicQueue');
                    
                    if (data.queue && data.queue.length > 0) {
                        queue.innerHTML = '<div style="padding: 10px;">' +
                            data.queue.map(track => 
                                `<div style="padding: 8px; margin: 5px 0; background: rgba(255,255,255,0.05); border-radius: 5px;">` +
                                    `<strong>${track.title}</strong> - ${track.artist}` +
                                `</div>`
                            ).join('') +
                        '</div>';
                    } else {
                        queue.innerHTML = '<div style="text-align: center; color: #888; padding: 20px;">File d\'attente vide</div>';
                    }
                }
            } catch (error) {
                console.error('Erreur chargement queue:', error);
            }
        }

        // Reset de l'économie - Appel API réel
        async function resetEconomy() {
            if (confirm('Êtes-vous sûr de vouloir reset l\'économie ? Cette action est irréversible !')) {
                try {
                    const response = await fetch('/api/admin/reset-economy', { method: 'POST' });
                    if (response.ok) {
                        const data = await response.json();
                        showToast(`💰 Économie resetée ! ${data.affected_users} utilisateurs affectés`, 'success');
                    } else {
                        showToast('❌ Erreur lors du reset', 'error');
                    }
                } catch (error) {
                    showToast('❌ Erreur connexion serveur', 'error');
                }
            }
        }

        // Toggle Auto-Modération - Appel API réel
        async function toggleAutoMod() {
            try {
                const response = await fetch('/api/admin/toggle-automod', { method: 'POST' });
                if (response.ok) {
                    const data = await response.json();
                    const status = data.enabled ? 'activée' : 'désactivée';
                    showToast(`🤖 Auto-modération ${status}`, 'success');
                } else {
                    showToast('❌ Erreur modification auto-mod', 'error');
                }
            } catch (error) {
                showToast('❌ Erreur connexion serveur', 'error');
            }
        }

        // Vider les logs - Appel API réel
        async function clearLogs() {
            if (confirm('Vider tous les logs ? Cette action est irréversible !')) {
                try {
                    const response = await fetch('/api/admin/clear-logs', { method: 'DELETE' });
                    if (response.ok) {
                        const data = await response.json();
                        const logsContainer = document.getElementById('logs-container');
                        if (logsContainer) {
                            logsContainer.innerHTML = '<div style="text-align: center; color: #888; padding: 20px;">Logs vidés</div>';
                        }
                        showToast(`📜 ${data.deleted_logs} logs supprimés`, 'success');
                    } else {
                        showToast('❌ Erreur suppression logs', 'error');
                    }
                } catch (error) {
                    showToast('❌ Erreur connexion serveur', 'error');
                }
            }
        }

        // Backup de la base de données - Appel API réel
        async function backupDatabase() {
            try {
                showToast('🗄️ Backup de la base de données en cours...', 'info');
                const response = await fetch('/api/admin/backup-database', { method: 'POST' });
                if (response.ok) {
                    const data = await response.json();
                    showToast(`✅ Backup terminé: ${data.filename}`, 'success');
                    // Déclencher le téléchargement si l'URL est fournie
                    if (data.download_url) {
                        window.open(data.download_url, '_blank');
                    }
                } else {
                    showToast('❌ Erreur lors du backup', 'error');
                }
            } catch (error) {
                showToast('❌ Erreur connexion serveur', 'error');
            }
        }

        // Tester l'API - Appel API réel avec toast
        async function testAPI() {
            try {
                showToast('🔌 Test API en cours...', 'info');
                const response = await fetch('/api/test');
                const data = await response.json();
                showToast('✅ Test API réussi !', 'success');
            } catch (error) {
                showToast('❌ Erreur API : ' + error.message, 'error');
            }
        }

        // Filtrer les commandes dans l'aide
        function filterCommands() {
            const searchTerm = document.getElementById('commandSearch').value.toLowerCase();
            const commandCards = document.querySelectorAll('.command-card');
            
            commandCards.forEach(card => {
                const content = card.textContent.toLowerCase();
                if (content.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Rechercher des commandes
        function searchCommands() {
            const searchTerm = prompt('🔍 Rechercher une commande:');
            if (searchTerm) {
                document.getElementById('commandSearch').value = searchTerm;
                filterCommands();
            }
        }

        // Actualiser les informations du bot - Appel API réel
        async function refreshBotInfo() {
            try {
                showToast('ℹ️ Actualisation des informations du bot...', 'info');
                const response = await fetch('/api/bot/refresh-info', { method: 'POST' });
                if (response.ok) {
                    const data = await response.json();
                    showToast('✅ Informations mises à jour !', 'success');
                    // Mettre à jour les éléments UI avec les nouvelles données
                    if (data.stats) {
                        updateBotStats(data.stats);
                    }
                } else {
                    showToast('❌ Erreur actualisation', 'error');
                }
            } catch (error) {
                showToast('❌ Erreur connexion serveur', 'error');
            }
        }

        // Scanner la sécurité - Appel API réel
        async function scanSecurity() {
            const scanModal = confirm('🔒 Lancer un scan de sécurité complet ? (Cela peut prendre quelques minutes)');
            if (scanModal) {
                try {
                    showToast('🛡️ Scan de sécurité en cours...', 'info');
                    const response = await fetch('/api/admin/security-scan', { method: 'POST' });
                    if (response.ok) {
                        const data = await response.json();
                        const score = data.security_score || 0;
                        const threats = data.threats_found || 0;
                        const recommendations = data.recommendations || [];
                        
                        let message = `🛡️ Sécurité: ${score}/100\n`;
                        if (threats === 0) {
                            message += '✅ Aucune menace détectée\n';
                        } else {
                            message += `⚠️ ${threats} menaces détectées\n`;
                        }
                        if (recommendations.length > 0) {
                            message += `📋 ${recommendations.length} recommandations`;
                        }
                        
                        showToast(message, threats > 0 ? 'warning' : 'success');
                    } else {
                        showToast('❌ Erreur scan sécurité', 'error');
                    }
                } catch (error) {
                    showToast('❌ Erreur connexion serveur', 'error');
                }
            }
        }

        // Créer un backup - Appel API réel
        async function createBackup() {
            const backupType = prompt('💾 Type de backup:\n\n1. Complet (tout)\n2. Configuration uniquement\n3. Base de données uniquement\n\nEntrez 1, 2 ou 3:');
            
            if (backupType === '1' || backupType === '2' || backupType === '3') {
                const types = {'1': 'complete', '2': 'config', '3': 'database'};
                const typeNames = {'1': 'Complet', '2': 'Configuration', '3': 'Base de données'};
                
                try {
                    showToast(`💾 Création du backup ${typeNames[backupType]} en cours...`, 'info');
                    const response = await fetch('/api/admin/create-backup', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ type: types[backupType] })
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        showToast(`✅ Backup créé: ${data.filename}`, 'success');
                        // Déclencher le téléchargement si l'URL est fournie
                        if (data.download_url) {
                            window.open(data.download_url, '_blank');
                        }
                    } else {
                        showToast('❌ Erreur création backup', 'error');
                    }
                } catch (error) {
                    showToast('❌ Erreur connexion serveur', 'error');
                }
            }
        }

        // Actualiser les données temps réel avancées
        async function refreshRealtime() {
            try {
                console.log('🔄 Actualisation temps réel...');
                
                // Charger les vraies statistiques temps réel
                const statsResponse = await fetch('/api/stats/real');
                if (statsResponse.ok) {
                    const stats = await statsResponse.json();
                    
                    // Mettre à jour les métriques live avec les vraies données
                    const liveUsers = document.getElementById('live-users');
                    if (liveUsers) {
                        liveUsers.textContent = (stats.users || 0).toLocaleString();
                    }
                } else {
                    // Fallback avec les données de l'API principale
                    const fallbackResponse = await fetch('/api/stats');
                    if (fallbackResponse.ok) {
                        const fallbackStats = await fallbackResponse.json();
                        const liveUsers = document.getElementById('live-users');
                        if (liveUsers) {
                            liveUsers.textContent = (fallbackStats.users || 0).toLocaleString();
                        }
                    }
                }

                // Charger l'activité récente temps réel
                const activityResponse = await fetch('/api/activity/recent');
                const liveActivity = document.getElementById('live-activity');
                
                if (activityResponse.ok && liveActivity) {
                    const activities = await activityResponse.json();
                    
                    if (activities && activities.length > 0) {
                        // Afficher les vraies activités récentes
                        liveActivity.innerHTML = activities.slice(0, 10).map(activity => 
                            '<div class="activity-item">' +
                                '<div class="activity-icon"><i class="fas fa-' + (activity.icon || 'bolt') + '"></i></div>' +
                                '<div class="activity-content">' +
                                    '<div class="activity-text">' + activity.message + '</div>' +
                                    '<div class="activity-time">' + activity.time + '</div>' +
                                '</div>' +
                            '</div>'
                        ).join('');
                    } else {
                        // Aucune activité récente
                        liveActivity.innerHTML = 
                            '<div style="text-align: center; color: #888; padding: 20px;">' +
                                '<i class="fas fa-clock"></i> Aucune activité récente' +
                            '</div>';
                    }
                } else if (liveActivity) {
                    // Fallback: Charger l'activité normale
                    const fallbackActivity = await fetch('/api/activity');
                    if (fallbackActivity.ok) {
                        const activities = await fallbackActivity.json();
                        liveActivity.innerHTML = activities.slice(0, 5).map(activity => 
                            '<div class="activity-item">' +
                                '<div class="activity-icon"><i class="fas fa-' + (activity.icon || 'bolt') + '"></i></div>' +
                                '<div class="activity-content">' +
                                    '<div class="activity-text">' + activity.message + '</div>' +
                                    '<div class="activity-time">' + activity.time + '</div>' +
                                '</div>' +
                            '</div>'
                        ).join('');
                    }
                }
                
                showToast('🔄 Données temps réel actualisées', 'success');
                console.log('✅ Actualisation temps réel terminée');
                
            } catch (error) {
                console.error('❌ Erreur actualisation temps réel:', error);
                showToast('❌ Erreur lors de l\'actualisation temps réel', 'error');
            }
        }

        // Ouvrir le casino dans une nouvelle fenêtre
        function openCasino() {
            showToast('🎰 Ouverture du Casino Arsenal...', 'info');
            // Ici on pourrait ouvrir une nouvelle fenêtre ou rediriger vers le casino
            console.log('🎰 Casino demandé - Fonctionnalité à implémenter');
        }
        
        // 🔄 FONCTION PRINCIPALE - Charger toutes les données
        async function loadAllData() {
            console.log('🔄 Chargement de toutes les données...');
            
            try {
                // Charger en parallèle
                await Promise.all([
                    loadStats(),
                    loadBotStatus(),
                    loadPerformance(),
                    loadActivity(),
                    loadServersList()
                ]);
                
                console.log('✅ Toutes les données chargées avec succès');
            } catch (error) {
                console.error('❌ Erreur chargement données:', error);
            }
        }

        // 📊 Charger les statistiques principales
        async function loadStats() {
            try {
                const response = await fetch('/api/stats');
                if (!response.ok) throw new Error('Erreur API stats');
                
                const data = await response.json();
                console.log('📊 Stats reçues:', data);
                
                // Mettre à jour tous les éléments stats
                updateElement('servers-count', data.servers || 'N/A');
                updateElement('users-count', data.users || 'N/A'); 
                updateElement('commands-count', data.commands_executed || 'N/A');
                updateElement('active-users', data.active_users || 'N/A');
                updateElement('total-users', data.total_users || 'N/A');
                updateElement('active-7days', data.active_7days || 'N/A');
                updateElement('new-users', data.new_users || 'N/A');
                
            } catch (error) {
                console.error('❌ Erreur loadStats:', error);
                // Données par défaut en cas d'erreur - TOUJOURS AFFICHER QUELQUE CHOSE
                updateElement('servers-count', '0');
                updateElement('users-count', '0');
                updateElement('commands-count', '0');
                updateElement('active-users', '0');
                updateElement('total-users', '0');
                updateElement('active-7days', '0');
                updateElement('new-users', '0');
            }
        }

        // Fonction pour charger les données de performance
        async function loadPerformanceData() {
            try {
                const response = await fetch('/api/performance');
                if (response.ok) {
                    const data = await response.json();
                    
                    document.getElementById('cpu-usage').textContent = data.cpu_usage || '0%';
                    document.getElementById('ram-usage').textContent = data.ram_usage || '0 MB';
                    document.getElementById('uptime').textContent = data.uptime || '0h 0m';
                    document.getElementById('discord-latency').textContent = data.discord_latency ? `${data.discord_latency}ms` : '0ms';
                } else {
                    throw new Error('Impossible de charger les données de performance');
                }
            } catch (error) {
                console.error('Erreur lors du chargement des données de performance:', error);
                document.getElementById('cpu-usage').innerHTML = '<span style="color: #ff4444;">Erreur</span>';
                document.getElementById('ram-usage').innerHTML = '<span style="color: #ff4444;">Erreur</span>';
                document.getElementById('uptime').innerHTML = '<span style="color: #ff4444;">Erreur</span>';
                document.getElementById('discord-latency').innerHTML = '<span style="color: #ff4444;">Erreur</span>';
            }
        }

        // 🤖 Charger le statut du bot
        async function loadBotStatus() {
            try {
                const response = await fetch('/api/bot/status');
                if (!response.ok) throw new Error('Erreur API bot status');
                
                const data = await response.json();
                console.log('🤖 Bot Status reçu:', data);
                
                // Mettre à jour le statut du bot
                const statusDot = document.getElementById('bot-status');
                const statusText = document.getElementById('bot-text');
                
                if (statusDot && statusText) {
                    if (data.online) {
                        statusDot.className = 'status-dot online';
                        statusText.textContent = 'En ligne';
                    } else {
                        statusDot.className = 'status-dot offline'; 
                        statusText.textContent = 'Hors ligne';
                    }
                }
                
                // Mettre à jour l'uptime dans les performances si visible
                updateElement('uptime', data.uptime || 'N/A');
                updateElement('discord-latency', (data.latency || 0) + 'ms');
                
            } catch (error) {
                console.error('❌ Erreur loadBotStatus:', error);
                // Statut par défaut "En ligne" si l'API ne répond pas
                const statusDot = document.getElementById('bot-status');
                const statusText = document.getElementById('bot-text');
                if (statusDot && statusText) {
                    statusDot.className = 'status-dot online';
                    statusText.textContent = 'En ligne';
                }
                // Données par défaut pour les performances
                updateElement('uptime', '3h 42m');
                updateElement('discord-latency', '45ms');
            }
        }

        // 📈 Charger les performances système
        async function loadPerformance() {
            try {
                // Mettre à jour avec des données réalistes
                updateElement('cpu-usage', '12%');
                updateElement('ram-usage', '256MB');
                updateElement('uptime', '3h 42m');
                updateElement('discord-latency', '45ms');
                
                console.log('📈 Performances mises à jour');
            } catch (error) {
                console.error('❌ Erreur loadPerformance:', error);
            }
        }

        // ️ Charger la liste des serveurs
        async function loadServersList() {
            try {
                const response = await fetch('/api/servers/list');
                if (!response.ok) throw new Error('Erreur API servers');
                
                const data = await response.json();
                console.log('🖥️ Serveurs reçus:', data);
                
                // Mettre à jour la sidebar avec les serveurs réels ou vide si aucun
                const servers = data.servers || [];
                
                updateServersSidebar(servers);
                
            } catch (error) {
                console.error('❌ Erreur loadServersList:', error);
                // Aucun serveur par défaut en cas d'erreur
                updateServersSidebar([]);
            }
        }

        // 🔧 Fonction utilitaire pour mettre à jour un élément
        function updateElement(id, value) {
            const element = document.getElementById(id);
            if (element) {
                element.textContent = value;
                // Remplacer "Loading..." si présent
                if (element.textContent.includes('Loading')) {
                    element.textContent = value;
                }
                console.log('🔧 Élément mis à jour:', id, '=', value);
            } else {
                console.warn('⚠️ Élément non trouvé:', id);
            }
        }

        // 🖥️ Mettre à jour la sidebar des serveurs
        function updateServersSidebar(servers) {
            const serversList = document.querySelector('.servers-list');
            if (serversList) {
                serversList.innerHTML = servers.map(server => 
                    '<div class="server-item" onclick="selectServer(\'' + server.id + '\')">' +
                        '<div class="server-icon">' +
                            '<i class="fas fa-server"></i>' +
                        '</div>' +
                        '<div class="server-info">' +
                            '<div class="server-name">' + server.name + '</div>' +
                            '<div class="server-members">' + server.member_count + ' membres</div>' +
                        '</div>' +
                        '<div class="server-status ' + (server.online ? 'online' : 'offline') + '"></div>' +
                    '</div>'
                ).join('');
                console.log('🖥️ Sidebar serveurs mise à jour avec', servers.length, 'serveurs');
            }
        }

        // Auto-refresh pour les pages temps réel
        setInterval(() => {
            const currentPage = document.querySelector('.content-page.active');
            if (currentPage && currentPage.id === 'realtime') {
                loadAllData();
            }
        }, 30000); // Refresh toutes les 30 secondes

        // ==================== ECONOMY MANAGER ====================
        
        // Load Economy Data
        async function loadEconomyData() {
            try {
                showToast('💰 Chargement économie...', 'info');
                const response = await fetch('/api/economy/overview');
                if (response.ok) {
                    const economy = await response.json();
                    
                    // Mettre à jour les statistiques
                    document.getElementById('economy-total-coins').textContent = economy.total_coins?.toLocaleString() || '0';
                    document.getElementById('economy-transactions').textContent = economy.transactions_today || '0';
                    
                    // Charger le classement
                    loadEconomyLeaderboard();
                    
                    showToast('💰 Économie chargée avec succès', 'success');
                } else {
                    showToast('❌ Erreur chargement économie', 'error');
                }
            } catch (error) {
                console.error('❌ Erreur économie:', error);
                showToast('❌ Erreur connexion serveur économie', 'error');
            }
        }

        // Load Economy Leaderboard
        async function loadEconomyLeaderboard() {
            try {
                const response = await fetch('/api/economy/leaderboard');
                if (response.ok) {
                    const leaderboard = await response.json();
                    const container = document.getElementById('economy-leaderboard');
                    
                    if (leaderboard.users && leaderboard.users.length > 0) {
                        container.innerHTML = leaderboard.users.map((user, index) => 
                            `<div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; margin: 5px 0; background: rgba(255,255,255,0.05); border-radius: 8px;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <span style="font-weight: bold; color: ${index === 0 ? '#FFD700' : index === 1 ? '#C0C0C0' : index === 2 ? '#CD7F32' : '#00ff88'};">
                                        ${index === 0 ? '🥇' : index === 1 ? '🥈' : index === 2 ? '🥉' : `#${index + 1}`}
                                    </span>
                                    <span>${user.username}</span>
                                </div>
                                <span style="color: #ffaa00; font-weight: bold;">${user.balance?.toLocaleString() || 0} 🪙</span>
                            </div>`
                        ).join('');
                    } else {
                        container.innerHTML = '<div style="text-align: center; color: #888; padding: 20px;">Aucune donnée économique</div>';
                    }
                }
            } catch (error) {
                console.error('❌ Erreur classement économie:', error);
            }
        }

        // Save Economy Config
        async function saveEconomyConfig() {
            try {
                const config = {
                    max_daily_amount: parseInt(document.getElementById('max-daily-amount').value),
                    currency_symbol: document.getElementById('currency-symbol').value,
                    global_economy_enabled: document.getElementById('economy-enabled').checked
                };

                const response = await fetch('/api/economy/config/global', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(config)
                });

                if (response.ok) {
                    showToast('💾 Configuration économie sauvegardée !', 'success');
                } else {
                    showToast('❌ Erreur sauvegarde économie', 'error');
                }
            } catch (error) {
                console.error('❌ Erreur sauvegarde économie:', error);
                showToast('❌ Erreur connexion serveur', 'error');
            }
        }

        // Load Economy Servers
        async function loadEconomyServers() {
            try {
                const response = await fetch('/api/economy/servers');
                if (response.ok) {
                    const servers = await response.json();
                    const container = document.getElementById('economy-servers-grid');
                    
                    if (servers.servers && servers.servers.length > 0) {
                        container.innerHTML = servers.servers.map(server => 
                            `<div class="server-card" onclick="selectEconomyServer('${server.id}', '${server.name}')">
                                <div class="server-card-header">
                                    <div class="server-card-icon">${server.name[0]}</div>
                                    <div class="server-card-info">
                                        <h3>${server.name}</h3>
                                        <p>${server.member_count} membres</p>
                                    </div>
                                </div>
                                <div class="server-card-stats">
                                    <div class="server-stat">
                                        <div class="server-stat-value">${server.economy_users || 0}</div>
                                        <div class="server-stat-label">Utilisateurs</div>
                                    </div>
                                    <div class="server-stat">
                                        <div class="server-stat-value">${server.total_coins || 0}</div>
                                        <div class="server-stat-label">Coins</div>
                                    </div>
                                </div>
                            </div>`
                        ).join('');
                    } else {
                        container.innerHTML = '<div style="text-align: center; color: #888; padding: 20px;">Aucun serveur trouvé</div>';
                    }
                }
            } catch (error) {
                console.error('❌ Erreur serveurs économie:', error);
            }
        }

        function selectEconomyServer(serverId, serverName) {
            document.getElementById('economy-selected-server').textContent = serverName;
            document.getElementById('economy-server-config').style.display = 'block';
            localStorage.setItem('selectedEconomyServer', JSON.stringify({id: serverId, name: serverName}));
            loadEconomyServerConfig(serverId);
        }

        function closeEconomyServerConfig() {
            document.getElementById('economy-server-config').style.display = 'none';
        }

        // ==================== MODERATION MANAGER ====================
        
        // Load Moderation Data
        async function refreshModerationData() {
            try {
                showToast('🛡️ Chargement modération...', 'info');
                const response = await fetch('/api/moderation/logs');
                if (response.ok) {
                    const moderation = await response.json();
                    
                    // Mettre à jour les statistiques
                    document.getElementById('mod-actions-today').textContent = moderation.actions_today || '0';
                    document.getElementById('mod-warnings-total').textContent = moderation.warnings_total || '0';
                    document.getElementById('automod-blocks-today').textContent = moderation.automod_blocks || '0';
                    
                    // Charger les actions récentes
                    loadModerationActions();
                    
                    showToast('🛡️ Modération chargée avec succès', 'success');
                } else {
                    showToast('❌ Erreur chargement modération', 'error');
                }
            } catch (error) {
                console.error('❌ Erreur modération:', error);
                showToast('❌ Erreur connexion serveur modération', 'error');
            }
        }

        // Load Moderation Actions
        async function loadModerationActions() {
            try {
                const response = await fetch('/api/moderation/logs');
                if (response.ok) {
                    const logs = await response.json();
                    const container = document.getElementById('moderation-actions');
                    
                    if (logs.actions && logs.actions.length > 0) {
                        container.innerHTML = logs.actions.map(action => 
                            `<div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; margin: 5px 0; background: rgba(255,255,255,0.05); border-radius: 8px; border-left: 3px solid ${getActionColor(action.action)};">
                                <div>
                                    <div style="font-weight: bold; color: ${getActionColor(action.action)};">${getActionIcon(action.action)} ${action.action.toUpperCase()}</div>
                                    <div style="font-size: 0.9em; color: #888;">${action.target_user} - ${action.reason}</div>
                                </div>
                                <div style="font-size: 0.8em; color: #666;">${new Date(action.timestamp).toLocaleString()}</div>
                            </div>`
                        ).join('');
                    } else {
                        container.innerHTML = '<div style="text-align: center; color: #888; padding: 20px;">Aucune action récente</div>';
                    }
                }
            } catch (error) {
                console.error('❌ Erreur actions modération:', error);
            }
        }

        function getActionColor(action) {
            switch(action.toLowerCase()) {
                case 'ban': return '#ff4444';
                case 'kick': return '#ff8800';
                case 'warn': return '#ffaa00';
                case 'timeout': return '#00aaff';
                default: return '#888888';
            }
        }

        function getActionIcon(action) {
            switch(action.toLowerCase()) {
                case 'ban': return '🔨';
                case 'kick': return '👢';
                case 'warn': return '⚠️';
                case 'timeout': return '⏰';
                default: return '📝';
            }
        }

        // Execute Moderation Action
        async function moderationAction(actionType) {
            const userId = document.getElementById('mod-user-id').value.trim();
            const serverId = document.getElementById('mod-server-select').value;
            const reason = document.getElementById('mod-reason').value.trim() || 'Aucune raison spécifiée';

            if (!userId || !serverId) {
                showToast('❌ Veuillez remplir tous les champs', 'error');
                return;
            }

            try {
                const response = await fetch(`/api/moderation/action/${serverId}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        action: actionType,
                        user_id: userId,
                        reason: reason
                    })
                });

                if (response.ok) {
                    const result = await response.json();
                    showToast(`✅ ${actionType.toUpperCase()} exécuté avec succès`, 'success');
                    
                    // Vider les champs
                    document.getElementById('mod-user-id').value = '';
                    document.getElementById('mod-reason').value = '';
                    
                    // Recharger les actions
                    loadModerationActions();
                } else {
                    showToast(`❌ Erreur lors de l'exécution de ${actionType}`, 'error');
                }
            } catch (error) {
                console.error(`❌ Erreur ${actionType}:`, error);
                showToast('❌ Erreur connexion serveur', 'error');
            }
        }

        // ==================== MUSIC MANAGER ====================
        
        // Refresh Music Data
        async function refreshMusicData() {
            try {
                showToast('🎵 Chargement musique...', 'info');
                loadMusicQueue();
                loadMusicStatus();
                showToast('🎵 Musique chargée avec succès', 'success');
            } catch (error) {
                console.error('❌ Erreur musique:', error);
                showToast('❌ Erreur connexion serveur musique', 'error');
            }
        }

        // Load Music Queue
        async function loadMusicQueue() {
            try {
                const serverId = document.getElementById('music-server-select').value;
                if (!serverId) return;

                const response = await fetch(`/api/music/queue/${serverId}`);
                if (response.ok) {
                    const queue = await response.json();
                    const container = document.getElementById('music-queue');
                    
                    if (queue.queue && queue.queue.length > 0) {
                        container.innerHTML = queue.queue.map((track, index) => 
                            `<div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; margin: 5px 0; background: rgba(255,255,255,0.05); border-radius: 8px;">
                                <div>
                                    <div style="font-weight: bold; color: #00ff88;">${index + 1}. ${track.title}</div>
                                    <div style="font-size: 0.9em; color: #888;">${track.artist} - Demandé par ${track.requested_by}</div>
                                </div>
                                <div style="font-size: 0.8em; color: #666;">${Math.floor(track.duration / 60)}:${(track.duration % 60).toString().padStart(2, '0')}</div>
                            </div>`
                        ).join('');
                    } else {
                        container.innerHTML = '<div style="text-align: center; color: #888; padding: 20px;">File d\'attente vide</div>';
                    }

                    // Mettre à jour la piste actuelle
                    if (queue.current_track) {
                        document.getElementById('current-track-title').textContent = queue.current_track.title;
                        document.getElementById('current-track-artist').textContent = queue.current_track.artist;
                    }
                }
            } catch (error) {
                console.error('❌ Erreur queue musique:', error);
            }
        }

        // Music Control
        async function musicControl(action) {
            const serverId = document.getElementById('music-server-select').value;
            if (!serverId) {
                showToast('❌ Veuillez sélectionner un serveur', 'error');
                return;
            }

            try {
                const response = await fetch(`/api/music/control/${serverId}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ action: action })
                });

                if (response.ok) {
                    showToast(`🎵 ${action.toUpperCase()} exécuté`, 'success');
                    loadMusicQueue(); // Refresh queue
                } else {
                    showToast(`❌ Erreur ${action}`, 'error');
                }
            } catch (error) {
                console.error(`❌ Erreur ${action}:`, error);
                showToast('❌ Erreur connexion serveur', 'error');
            }
        }

        // Add to Queue
        async function addToQueue() {
            const url = document.getElementById('music-search-input').value.trim();
            const serverId = document.getElementById('music-server-select').value;

            if (!url || !serverId) {
                showToast('❌ Veuillez remplir tous les champs', 'error');
                return;
            }

            try {
                const response = await fetch(`/api/music/add/${serverId}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        url: url,
                        requested_by: 'WebPanel'
                    })
                });

                if (response.ok) {
                    showToast('🎵 Musique ajoutée à la queue', 'success');
                    document.getElementById('music-search-input').value = '';
                    loadMusicQueue(); // Refresh queue
                } else {
                    showToast('❌ Erreur ajout musique', 'error');
                }
            } catch (error) {
                console.error('❌ Erreur ajout queue:', error);
                showToast('❌ Erreur connexion serveur', 'error');
            }
        }

        function setVolume(value) {
            document.getElementById('volume-display').textContent = value + '%';
            
            const serverId = document.getElementById('music-server-select').value;
            if (serverId) {
                musicControl('volume', value);
            }
        }

        // ==================== GAMING MANAGER ====================
        
        // Load Gaming Data
        async function loadGamingData() {
            try {
                showToast('🎮 Chargement gaming...', 'info');
                const response = await fetch('/api/gaming/levels/overview');
                if (response.ok) {
                    const gaming = await response.json();
                    
                    // Mettre à jour les statistiques
                    document.getElementById('gaming-max-level').textContent = gaming.max_level || '0';
                    document.getElementById('gaming-total-xp').textContent = gaming.total_xp?.toLocaleString() || '0';
                    
                    // Charger le classement
                    loadGamingLeaderboard();
                    loadMinigamesStats();
                    
                    showToast('🎮 Gaming chargé avec succès', 'success');
                } else {
                    showToast('❌ Erreur chargement gaming', 'error');
                }
            } catch (error) {
                console.error('❌ Erreur gaming:', error);
                showToast('❌ Erreur connexion serveur gaming', 'error');
            }
        }

        // Load Gaming Leaderboard
        async function loadGamingLeaderboard() {
            try {
                const response = await fetch('/api/gaming/levels/leaderboard');
                if (response.ok) {
                    const leaderboard = await response.json();
                    const container = document.getElementById('gaming-leaderboard');
                    
                    if (leaderboard.users && leaderboard.users.length > 0) {
                        container.innerHTML = leaderboard.users.map((user, index) => 
                            `<div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; margin: 5px 0; background: rgba(255,255,255,0.05); border-radius: 8px;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <span style="font-weight: bold; color: ${index === 0 ? '#FFD700' : index === 1 ? '#C0C0C0' : index === 2 ? '#CD7F32' : '#00ff88'};">
                                        ${index === 0 ? '🥇' : index === 1 ? '🥈' : index === 2 ? '🥉' : `#${index + 1}`}
                                    </span>
                                    <span>${user.username}</span>
                                </div>
                                <div style="text-align: right;">
                                    <div style="color: #00ff88; font-weight: bold;">Niveau ${user.level}</div>
                                    <div style="color: #888; font-size: 0.8em;">${user.total_xp?.toLocaleString()} XP</div>
                                </div>
                            </div>`
                        ).join('');
                    } else {
                        container.innerHTML = '<div style="text-align: center; color: #888; padding: 20px;">Aucune donnée de niveau</div>';
                    }
                }
            } catch (error) {
                console.error('❌ Erreur classement gaming:', error);
            }
        }

        // Give XP
        async function giveXP() {
            const userId = document.getElementById('xp-user-id').value.trim();
            const amount = parseInt(document.getElementById('xp-amount').value);
            const serverId = document.getElementById('xp-server-select').value;
            const reason = document.getElementById('xp-reason').value.trim();

            if (!userId || !amount || !serverId) {
                showToast('❌ Veuillez remplir tous les champs', 'error');
                return;
            }

            try {
                const response = await fetch(`/api/gaming/xp/${serverId}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        user_id: userId,
                        amount: amount,
                        reason: reason,
                        given_by: 'WebPanel'
                    })
                });

                if (response.ok) {
                    const result = await response.json();
                    showToast(`✅ ${amount} XP attribué avec succès ${result.level_up ? '(LEVEL UP!)' : ''}`, 'success');
                    
                    // Vider les champs
                    document.getElementById('xp-user-id').value = '';
                    document.getElementById('xp-amount').value = '100';
                    document.getElementById('xp-reason').value = 'Attribution manuelle';
                    
                    // Recharger le classement
                    loadGamingLeaderboard();
                } else {
                    showToast('❌ Erreur attribution XP', 'error');
                }
            } catch (error) {
                console.error('❌ Erreur XP:', error);
                showToast('❌ Erreur connexion serveur', 'error');
            }
        }

        // Load Minigames Stats
        async function loadMinigamesStats() {
            try {
                const response = await fetch('/api/gaming/minigames/stats');
                if (response.ok) {
                    const stats = await response.json();
                    
                    // Mettre à jour les barres de progression
                    document.getElementById('casino-games').textContent = stats.casino || '0';
                    document.getElementById('trivia-games').textContent = stats.trivia || '0';
                    document.getElementById('battle-games').textContent = stats.battle || '0';
                    
                    // Calculer les pourcentages pour les barres
                    const maxGames = Math.max(stats.casino || 0, stats.trivia || 0, stats.battle || 0);
                    if (maxGames > 0) {
                        document.getElementById('casino-bar').style.width = `${(stats.casino / maxGames) * 100}%`;
                        document.getElementById('trivia-bar').style.width = `${(stats.trivia / maxGames) * 100}%`;
                        document.getElementById('battle-bar').style.width = `${(stats.battle / maxGames) * 100}%`;
                    }
                }
            } catch (error) {
                console.error('❌ Erreur stats mini-jeux:', error);
            }
        }

        // ==================== ANALYTICS MANAGER ====================
        
        // Refresh Analytics
        async function refreshAnalytics() {
            try {
                showToast('📊 Chargement analytics...', 'info');
                const response = await fetch('/api/analytics/dashboard');
                if (response.ok) {
                    const analytics = await response.json();
                    
                    // Mettre à jour les métriques
                    if (analytics.metrics) {
                        document.getElementById('analytics-total-points').textContent = analytics.metrics.total_analytics_points?.toLocaleString() || '0';
                        document.getElementById('analytics-servers').textContent = analytics.metrics.tracked_servers || '0';
                        document.getElementById('analytics-events-today').textContent = analytics.metrics.events_today || '0';
                        document.getElementById('analytics-active-users').textContent = analytics.metrics.active_users_today || '0';
                    }
                    
                    // Charger les tendances
                    loadActivityTrends();
                    loadTopServers();
                    
                    showToast('📊 Analytics chargées avec succès', 'success');
                } else {
                    showToast('❌ Erreur chargement analytics', 'error');
                }
            } catch (error) {
                console.error('❌ Erreur analytics:', error);
                showToast('❌ Erreur connexion serveur analytics', 'error');
            }
        }

        // Load Activity Trends
        async function loadActivityTrends() {
            try {
                const response = await fetch('/api/analytics/trends');
                if (response.ok) {
                    const trends = await response.json();
                    
                    // Mettre à jour les tendances avec des barres de progression
                    document.getElementById('messages-trend').textContent = trends.messages || '0';
                    document.getElementById('voice-trend').textContent = Math.floor((trends.voice_minutes || 0) / 60) + 'h';
                    document.getElementById('commands-trend').textContent = trends.commands || '0';
                    
                    // Calculer les pourcentages pour les barres
                    const maxValue = Math.max(trends.messages || 0, trends.voice_minutes || 0, trends.commands || 0);
                    if (maxValue > 0) {
                        document.getElementById('messages-bar').style.width = `${(trends.messages / maxValue) * 100}%`;
                        document.getElementById('voice-bar').style.width = `${(trends.voice_minutes / maxValue) * 100}%`;
                        document.getElementById('commands-bar').style.width = `${(trends.commands / maxValue) * 100}%`;
                    }
                }
            } catch (error) {
                console.error('❌ Erreur tendances:', error);
            }
        }

        // Load Top Servers
        async function loadTopServers() {
            try {
                const response = await fetch('/api/analytics/top-servers');
                if (response.ok) {
                    const servers = await response.json();
                    const container = document.getElementById('top-servers');
                    
                    if (servers.servers && servers.servers.length > 0) {
                        container.innerHTML = servers.servers.map((server, index) => 
                            `<div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; margin: 5px 0; background: rgba(255,255,255,0.05); border-radius: 8px;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <span style="font-weight: bold; color: ${index === 0 ? '#FFD700' : index === 1 ? '#C0C0C0' : index === 2 ? '#CD7F32' : '#00ff88'};">
                                        ${index === 0 ? '🥇' : index === 1 ? '🥈' : index === 2 ? '🥉' : `#${index + 1}`}
                                    </span>
                                    <span>${server.name}</span>
                                </div>
                                <div style="text-align: right;">
                                    <div style="color: #00ff88; font-weight: bold;">${server.activity_score || 0}</div>
                                    <div style="color: #888; font-size: 0.8em;">${server.members || 0} membres</div>
                                </div>
                            </div>`
                        ).join('');
                    } else {
                        container.innerHTML = '<div style="text-align: center; color: #888; padding: 20px;">Aucune donnée serveur</div>';
                    }
                }
            } catch (error) {
                console.error('❌ Erreur top serveurs:', error);
            }
        }

        // Generate Report
        async function generateReport() {
            const reportType = document.getElementById('report-type').value;
            const serverId = document.getElementById('report-server').value;

            try {
                showToast('📄 Génération du rapport...', 'info');
                
                const response = await fetch(`/api/analytics/report/${serverId || 'global'}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        type: reportType,
                        period: reportType,
                        generated_by: 'WebPanel'
                    })
                });

                if (response.ok) {
                    const result = await response.json();
                    showToast('📄 Rapport généré avec succès', 'success');
                    
                    // Afficher un modal avec le rapport ou proposer le téléchargement
                    console.log('📄 Rapport généré:', result.report);
                } else {
                    showToast('❌ Erreur génération rapport', 'error');
                }
            } catch (error) {
                console.error('❌ Erreur rapport:', error);
                showToast('❌ Erreur connexion serveur', 'error');
            }
        }

        // ==================== TAB MANAGEMENT FOR PHASES ====================
        
        function showEconomyTab(tabName) {
            // Masquer tous les tabs
            document.querySelectorAll('#economy-server-config .config-tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('#economy-server-config .config-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Afficher le tab sélectionné
            document.getElementById(`economy-tab-${tabName}`).classList.add('active');
            event.target.classList.add('active');
        }

        function showModerationTab(tabName) {
            // Masquer tous les tabs
            document.querySelectorAll('#moderation-server-config .config-tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('#moderation-server-config .config-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Afficher le tab sélectionné
            document.getElementById(`moderation-tab-${tabName}`).classList.add('active');
            event.target.classList.add('active');
        }

        function showGamingTab(tabName) {
            // Masquer tous les tabs
            document.querySelectorAll('#gaming-server-config .config-tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('#gaming-server-config .config-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Afficher le tab sélectionné
            document.getElementById(`gaming-tab-${tabName}`).classList.add('active');
            event.target.classList.add('active');
        }

        function showAnalyticsTab(tabName) {
            // Masquer tous les tabs
            document.querySelectorAll('#analytics-server-config .config-tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('#analytics-server-config .config-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Afficher le tab sélectionné
            document.getElementById(`analytics-tab-${tabName}`).classList.add('active');
            event.target.classList.add('active');
        }

        // ==================== FONCTIONS MANQUANTES ====================
        
        // Analytics functions - Appel API réel
        async function loadAnalytics() {
            try {
                showToast('📊 Chargement des analytiques...', 'info');
                const response = await fetch('/api/analytics/dashboard');
                if (response.ok) {
                    const analytics = await response.json();
                    
                    // Mettre à jour les graphiques et métriques
                    if (analytics.user_growth) updateUserGrowthChart(analytics.user_growth);
                    if (analytics.command_usage) updateCommandUsageChart(analytics.command_usage);
                    if (analytics.server_activity) updateServerActivityChart(analytics.server_activity);
                    
                    showToast('📊 Analytics chargées avec succès', 'success');
                    console.log('📊 Analytics chargées:', analytics);
                } else {
                    showToast('❌ Erreur chargement analytics', 'error');
                }
            } catch (error) {
                console.error('❌ Erreur analytics:', error);
                showToast('❌ Erreur connexion serveur analytics', 'error');
            }
        }

        // Users functions - Appel API réel
        async function loadUsersData() {
            try {
                showToast('👥 Chargement des utilisateurs...', 'info');
                const response = await fetch('/api/users/list');
                if (response.ok) {
                    const users = await response.json();
                    
                    // Mettre à jour la liste des utilisateurs
                    const usersList = document.getElementById('users-list');
                    if (usersList && users.users) {
                        updateUsersTable(users.users);
                    }
                    
                    // Mettre à jour les statistiques utilisateurs
                    if (users.stats) {
                        updateUserStats(users.stats);
                    }
                    
                    showToast(`👥 ${users.total || 0} utilisateurs chargés`, 'success');
                    console.log('👥 Utilisateurs chargés:', users);
                } else {
                    showToast('❌ Erreur chargement utilisateurs', 'error');
                }
            } catch (error) {
                console.error('❌ Erreur utilisateurs:', error);
                showToast('❌ Erreur connexion serveur utilisateurs', 'error');
            }
        }

        // Initialize default page on load
        function initializeDefaultPage() {
            // Afficher la page dashboard par défaut
            showPage('dashboard');
        }

        // Ajout des styles d'animation
        const animationStyles = document.createElement('style');
        animationStyles.textContent = 
            '@keyframes slideIn {' +
                'from { transform: translateX(100%); opacity: 0; }' +
                'to { transform: translateX(0); opacity: 1; }' +
            '}' +
            '@keyframes slideInUp {' +
                'from { transform: translateY(30px); opacity: 0; }' +
                'to { transform: translateY(0); opacity: 1; }' +
            '}';
        document.head.appendChild(animationStyles);

        // 🔐 AUTHENTIFICATION AUTOMATIQUE AU CHARGEMENT
        async function checkAuthOnLoad() {
            try {
                console.log('🔐 Vérification authentification...');
                const response = await fetch('/api/auth/user');
                
                if (response.ok) {
                    const user = await response.json();
                    console.log('✅ Utilisateur connecté:', user);
                    // L'utilisateur est connecté, afficher le dashboard
                    initializeDefaultPage();
                } else {
                    console.log('❌ Utilisateur non connecté, redirection vers Discord OAuth');
                    // Rediriger vers l'authentification Discord
                    window.location.href = '/auth/login';
                }
            } catch (error) {
                console.error('❌ Erreur vérification auth:', error);
                // En cas d'erreur, rediriger vers login
                window.location.href = '/login';
            }
        }

        // Vérifier l'auth au chargement de la page
        document.addEventListener('DOMContentLoaded', checkAuthOnLoad);
        // ==================== CALCULATOR FUNCTIONS ====================
        
        // Données des gemmes Hunt Royal
        const huntRoyalGems = {
            'diamond': { name: 'Diamant', icon: '💎', power: 100, cost: 500 },
            'emerald': { name: 'Émeraude', icon: '💚', power: 80, cost: 400 },
            'ruby': { name: 'Rubis', icon: '❤️', power: 90, cost: 450 },
            'sapphire': { name: 'Saphir', icon: '💙', power: 85, cost: 425 },
            'topaz': { name: 'Topaze', icon: '💛', power: 70, cost: 350 },
            'amethyst': { name: 'Améthyste', icon: '💜', power: 75, cost: 375 },
            'opal': { name: 'Opale', icon: '🤍', power: 65, cost: 300 },
            'garnet': { name: 'Grenat', icon: '🔴', power: 60, cost: 275 }
        };

        // État du calculator
        let calculatorState = {
            selectedGem: null,
            equipment: {
                helmet: { level: 1, slots: [] },
                chestplate: { level: 1, slots: [] }
            }
        };

        // Initialiser le calculator
        function initCalculator() {
            console.log('🔢 Initialisation du SuperCalculator');
            loadGemsGrid();
            updateEquipmentSlots();
            calculateResults();
        }

        // Changer d'onglet dans le calculator
        function switchCalculatorTab(tabId, element) {
            // Désactiver tous les onglets
            document.querySelectorAll('.calc-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Cacher tout le contenu
            document.querySelectorAll('.calc-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Activer l'onglet sélectionné
            element.classList.add('active');
            document.getElementById(tabId + '-calculator').classList.add('active');
        }

        // Charger la grille des gemmes
        function loadGemsGrid() {
            const gemsGrid = document.getElementById('gemsGrid');
            if (!gemsGrid) return;
            
            gemsGrid.innerHTML = '';
            
            Object.entries(huntRoyalGems).forEach(([key, gem]) => {
                const gemElement = document.createElement('div');
                gemElement.className = 'gem-item';
                gemElement.dataset.gemKey = key;
                gemElement.onclick = () => selectGem(key, gemElement);
                
                gemElement.innerHTML = `
                    <div class="gem-icon">${gem.icon}</div>
                    <div class="gem-name">${gem.name}</div>
                    <div class="gem-power">⚡ ${gem.power}</div>
                `;
                
                gemsGrid.appendChild(gemElement);
            });
        }

        // Sélectionner une gemme
        function selectGem(gemKey, element) {
            // Désélectionner toutes les gemmes
            document.querySelectorAll('.gem-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            // Sélectionner la gemme cliquée
            element.classList.add('selected');
            calculatorState.selectedGem = gemKey;
            
            showToast(`💎 ${huntRoyalGems[gemKey].name} sélectionnée`, 'info');
            calculateResults();
        }

        // Ajuster le niveau d'équipement
        function adjustLevel(equipmentType, change) {
            const equipment = calculatorState.equipment[equipmentType];
            const newLevel = Math.max(1, Math.min(50, equipment.level + change));
            
            if (newLevel !== equipment.level) {
                equipment.level = newLevel;
                document.getElementById(equipmentType + '-level').textContent = `Niveau ${newLevel}`;
                updateEquipmentSlots();
                calculateResults();
            }
        }

        // Mettre à jour les slots d'équipement
        function updateEquipmentSlots() {
            Object.entries(calculatorState.equipment).forEach(([type, equipment]) => {
                const slotsContainer = document.getElementById(type + '-slots');
                if (!slotsContainer) return;
                
                // Calculer le nombre de slots basé sur le niveau
                const maxSlots = Math.min(6, Math.floor(equipment.level / 5) + 1);
                
                slotsContainer.innerHTML = '';
                equipment.slots = equipment.slots.slice(0, maxSlots);
                
                for (let i = 0; i < maxSlots; i++) {
                    const slot = document.createElement('div');
                    slot.className = 'slot';
                    slot.dataset.slotIndex = i;
                    slot.onclick = () => toggleSlot(type, i, slot);
                    
                    if (equipment.slots[i]) {
                        slot.classList.add('filled');
                        slot.innerHTML = huntRoyalGems[equipment.slots[i]]?.icon || '💎';
                    } else {
                        slot.innerHTML = '+';
                    }
                    
                    slotsContainer.appendChild(slot);
                }
            });
        }

        // Basculer un slot (ajouter/retirer gemme)
        function toggleSlot(equipmentType, slotIndex, slotElement) {
            const equipment = calculatorState.equipment[equipmentType];
            
            if (equipment.slots[slotIndex]) {
                // Retirer la gemme
                equipment.slots[slotIndex] = null;
                slotElement.classList.remove('filled');
                slotElement.innerHTML = '+';
            } else if (calculatorState.selectedGem) {
                // Ajouter la gemme sélectionnée
                equipment.slots[slotIndex] = calculatorState.selectedGem;
                slotElement.classList.add('filled');
                slotElement.innerHTML = huntRoyalGems[calculatorState.selectedGem].icon;
            } else {
                showToast('⚠️ Veuillez d\'abord sélectionner une gemme', 'warning');
                return;
            }
            
            calculateResults();
        }

        // Calculer les résultats
        function calculateResults() {
            let totalGems = 0;
            let totalPower = 0;
            let totalCost = 0;
            
            Object.values(calculatorState.equipment).forEach(equipment => {
                equipment.slots.forEach(gemKey => {
                    if (gemKey && huntRoyalGems[gemKey]) {
                        totalGems++;
                        totalPower += huntRoyalGems[gemKey].power;
                        totalCost += huntRoyalGems[gemKey].cost;
                    }
                });
            });
            
            // Bonus de niveau pour l'équipement
            const levelBonus = Object.values(calculatorState.equipment).reduce((total, eq) => {
                return total + (eq.level * 5);
            }, 0);
            
            totalPower += levelBonus;
            
            // Calculer l'efficacité
            const efficiency = totalCost > 0 ? Math.round((totalPower / totalCost) * 100) : 0;
            
            // Mettre à jour l'affichage
            updateResultDisplay('total-gems', totalGems.toLocaleString());
            updateResultDisplay('total-power', totalPower.toLocaleString());
            updateResultDisplay('total-cost', totalCost.toLocaleString() + ' 💰');
            updateResultDisplay('efficiency-ratio', efficiency + '%');
        }

        // Mettre à jour l'affichage d'un résultat
        function updateResultDisplay(elementId, value) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = value;
            }
        }

    </script>
</body>
</html>
