#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
üÜò ARSENAL V4 - SYST√àME D'AIDE COMPLET
Guide utilisateur pour toutes les fonctionnalit√©s du bot
"""

import discord
from discord.ext import commands
from discord import app_commands
from typing import Optional, Dict, List
from core.logger import log

class HelpSystem:
    """Syst√®me d'aide complet pour Arsenal V4"""
    
    def __init__(self):
        self.commands_data = {
            "admin": {
                "emoji": "üëë",
                "title": "Administration",
                "description": "Commandes de gestion du serveur et configuration",
                "permission": "Administrateur",
                "commands": {
                    "/admin setup_welcome": "Configuration des messages de bienvenue",
                    "/admin test_welcome": "Tester le syst√®me de bienvenue",
                    "/admin setup_logs": "Configuration des salons de logs",
                    "/admin setup_roles": "Gestion automatique des r√¥les",
                    "/admin backup": "Sauvegarde compl√®te du serveur",
                    "/admin restore": "Restauration depuis une sauvegarde",
                    "/admin maintenance": "Mode maintenance du bot",
                    "/admin stats": "Statistiques d√©taill√©es du serveur"
                }
            },
            "moderation": {
                "emoji": "üõ°Ô∏è", 
                "title": "Mod√©ration",
                "description": "Outils de mod√©ration et maintien de l'ordre",
                "permission": "Mod√©rateur",
                "commands": {
                    "/mod kick": "Expulser un membre du serveur",
                    "/mod ban": "Bannir un membre d√©finitivement",
                    "/mod tempban": "Bannissement temporaire",
                    "/mod mute": "Rendre muet temporairement",
                    "/mod unmute": "Retirer le mute d'un membre",
                    "/mod warn": "Donner un avertissement",
                    "/mod clear": "Supprimer des messages en masse",
                    "/mod slowmode": "Activer le mode lent",
                    "/mod lock": "Verrouiller un salon",
                    "/mod unlock": "D√©verrouiller un salon"
                }
            },
            "automod": {
                "emoji": "ü§ñ",
                "title": "Auto-Mod√©ration",
                "description": "Syst√®me automatique de mod√©ration avanc√©",
                "permission": "Administrateur",
                "commands": {
                    "/automod status": "Statut du syst√®me automod",
                    "/automod toggle": "Activer/d√©sactiver l'automod",
                    "/automod config": "Configurer les param√®tres",
                    "/automod add_word": "Ajouter un mot interdit",
                    "/automod remove_word": "Retirer un mot du filtre",
                    "/automod warnings": "Voir les avertissements",
                    "/automod clear_warnings": "Effacer les avertissements",
                    "/automod set_log_channel": "D√©finir le salon de logs",
                    "/automod detect_competitors": "D√©tecter les bots concurrents",
                    "/automod check_welcome": "V√©rifier les bots de bienvenue",
                    "/automod disable_welcome_bots": "Guide d√©sactivation bots"
                }
            },
            "tickets": {
                "emoji": "üé´",
                "title": "Syst√®me de Tickets",
                "description": "Gestion des demandes d'aide et support",
                "permission": "Mod√©rateur",
                "commands": {
                    "/ticket setup": "Configurer le syst√®me de tickets",
                    "/ticket panel": "Cr√©er le panel de tickets",
                    "/ticket close": "Fermer un ticket",
                    "/ticket add": "Ajouter quelqu'un au ticket",
                    "/ticket remove": "Retirer quelqu'un du ticket",
                    "/ticket transcript": "Cr√©er un transcript",
                    "/ticket stats": "Statistiques des tickets",
                    "/ticket config": "Configuration avanc√©e"
                }
            },
            "voice": {
                "emoji": "üéß",
                "title": "Hubs Vocaux",
                "description": "Salons vocaux temporaires et hubs",
                "permission": "Mod√©rateur",
                "commands": {
                    "/hub create": "Cr√©er un hub vocal",
                    "/hub delete": "Supprimer un hub",
                    "/hub config": "Configurer un hub",
                    "/hub list": "Liste des hubs actifs",
                    "/voice lock": "Verrouiller son salon temporaire",
                    "/voice unlock": "D√©verrouiller son salon",
                    "/voice limit": "Limiter le nombre d'utilisateurs",
                    "/voice name": "Renommer son salon temporaire",
                    "/voice invite": "Inviter quelqu'un dans son salon",
                    "/voice kick": "Expulser quelqu'un de son salon"
                }
            },
            "economy": {
                "emoji": "üí∞",
                "title": "√âconomie & Nivellement",
                "description": "Syst√®me d'argent, d'exp√©rience et de boutique",
                "permission": "Tous",
                "commands": {
                    "/economy balance": "Voir votre argent et niveau",
                    "/economy daily": "R√©compense quotidienne",
                    "/economy work": "Travailler pour gagner de l'argent",
                    "/economy crime": "Commettre un crime (risqu√©)",
                    "/economy bank": "G√©rer votre compte bancaire",
                    "/economy shop": "Voir la boutique premium",
                    "/economy buy": "Acheter un item de la boutique",
                    "/economy inventory": "Votre inventaire et boosts",
                    "/economy leaderboard": "Classement du serveur",
                    "/economy give": "Donner de l'argent √† quelqu'un"
                }
            },
            "sanctions": {
                "emoji": "‚öñÔ∏è",
                "title": "Sanctions",
                "description": "Gestion des sanctions et historiques",
                "permission": "Mod√©rateur", 
                "commands": {
                    "/sanction add": "Ajouter une sanction manuelle",
                    "/sanction remove": "Retirer une sanction",
                    "/sanction list": "Historique des sanctions",
                    "/sanction search": "Rechercher des sanctions",
                    "/sanction export": "Exporter l'historique",
                    "/sanction stats": "Statistiques des sanctions"
                }
            },
            "community": {
                "emoji": "üë•",
                "title": "Communaut√©",
                "description": "Commandes pour tous les membres",
                "permission": "Tous",
                "commands": {
                    "/info": "Informations sur le bot",
                    "/avatar": "Afficher l'avatar d'un membre",
                    "/poll": "Cr√©er un sondage",
                    "/vote": "Voter sur une proposition",
                    "/magic_8ball": "Boule magique 8",
                    "/spin_wheel": "Roue de la fortune",
                    "/top_vocal": "Top des utilisateurs vocaux",
                    "/top_messages": "Top des messages",
                    "/leaderboard": "Classement g√©n√©ral",
                    "/random_quote": "Citation al√©atoire",
                    "/signaler_bug": "Signaler un bug",
                    "/version": "Version du bot"
                }
            },
            "hunt_royal": {
                "emoji": "üèπ",
                "title": "Hunt Royal",
                "description": "Syst√®me de jeu Hunt Royal int√©gr√©",
                "permission": "Tous",
                "commands": {
                    "/hunt stats": "Voir ses statistiques Hunt Royal",
                    "/hunt awaken": "R√©veiller sa classe",
                    "/hunt list": "Liste des chasseurs actifs",
                    "/hunt update": "Mettre √† jour son profil",
                    "/hunt cache": "Gestion du cache",
                    "/hunt hunter": "Informations chasseur",
                    "/hunt dungeon": "Syst√®me de donjons",
                    "/hunt suggest": "Sugg√©rer une am√©lioration",
                    "/hunt economy": "√âconomie Hunt Royal",
                    "/hunt reload": "Recharger le syst√®me"
                }
            },
            "creator": {
                "emoji": "üîß",
                "title": "Cr√©ateur",
                "description": "Outils r√©serv√©s au cr√©ateur du bot",
                "permission": "Cr√©ateur uniquement",
                "commands": {
                    "/creator shutdown": "Arr√™ter le bot",
                    "/creator restart": "Red√©marrer le bot", 
                    "/creator eval": "Ex√©cuter du code Python",
                    "/creator sql": "Ex√©cuter des requ√™tes SQL",
                    "/creator backup_db": "Sauvegarder les bases de donn√©es",
                    "/creator system_info": "Informations syst√®me",
                    "/creator logs": "Consulter les logs",
                    "/creator update": "Mise √† jour du bot"
                }
            }
        }
        
        self.quick_start_guide = [
            "1Ô∏è‚É£ **Configuration initiale** - Utilisez `/admin setup_welcome` et `/admin setup_logs`",
            "2Ô∏è‚É£ **S√©curit√©** - Activez l'automod avec `/automod toggle` et configurez avec `/automod config`",
            "3Ô∏è‚É£ **Support** - Cr√©ez le syst√®me de tickets avec `/ticket setup`",
            "4Ô∏è‚É£ **Vocal** - Configurez des hubs vocaux avec `/hub create`",
            "5Ô∏è‚É£ **Test** - Testez vos configurations avec les commandes de test"
        ]
        
        self.common_issues = {
            "Le bot ne r√©pond pas": "V√©rifiez les permissions du bot et qu'il est en ligne",
            "Messages de bienvenue en double": "Utilisez `/automod check_welcome` pour d√©tecter les conflits",
            "Automod trop strict": "Ajustez avec `/automod config` et exemptez certains r√¥les",
            "Tickets ne fonctionnent pas": "V√©rifiez les permissions avec `/ticket setup`",
            "Hubs vocaux ne se cr√©ent pas": "V√©rifiez les permissions vocal du bot"
        }

# Commandes d'aide
help_group = app_commands.Group(name="help", description="üÜò Syst√®me d'aide Arsenal V4")

@help_group.command(name="menu", description="üóÇÔ∏è Menu principal d'aide")
async def help_menu(interaction: discord.Interaction):
    """Menu principal d'aide avec toutes les cat√©gories"""
    
    help_system = HelpSystem()
    
    embed = discord.Embed(
        title="üÜò Arsenal V4 - Guide Complet",
        description="**S√©lectionnez une cat√©gorie pour voir les commandes disponibles**",
        color=discord.Color.blue()
    )
    
    embed.add_field(
        name="üìã Cat√©gories Disponibles",
        value="\n".join([
            f"‚Ä¢ `/help {category}` - {data['emoji']} {data['title']}"
            for category, data in help_system.commands_data.items()
        ]),
        inline=False
    )
    
    embed.add_field(
        name="üöÄ D√©marrage Rapide",
        value="Utilisez `/help quickstart` pour un guide de configuration rapide",
        inline=False
    )
    
    embed.add_field(
        name="üîß D√©pannage",
        value="Utilisez `/help troubleshoot` pour r√©soudre les probl√®mes courants",
        inline=False
    )
    
    embed.add_field(
        name="üìû Support",
        value="Utilisez `/signaler_bug` pour signaler un probl√®me ou `/help contact` pour nous contacter",
        inline=False
    )
    
    embed.set_footer(text="Arsenal V4 ‚Ä¢ Syst√®me d'aide avanc√©")
    embed.set_thumbnail(url=interaction.client.user.avatar.url if interaction.client.user.avatar else None)
    
    await interaction.response.send_message(embed=embed, ephemeral=True)

@help_group.command(name="admin", description="üëë Aide pour les commandes d'administration")
async def help_admin(interaction: discord.Interaction):
    await _send_category_help(interaction, "admin")

@help_group.command(name="moderation", description="üõ°Ô∏è Aide pour les commandes de mod√©ration")
async def help_moderation(interaction: discord.Interaction):
    await _send_category_help(interaction, "moderation")

@help_group.command(name="automod", description="ü§ñ Aide pour l'auto-mod√©ration")
async def help_automod(interaction: discord.Interaction):
    await _send_category_help(interaction, "automod")

@help_group.command(name="tickets", description="üé´ Aide pour le syst√®me de tickets")
async def help_tickets(interaction: discord.Interaction):
    await _send_category_help(interaction, "tickets")

@help_group.command(name="voice", description="üéß Aide pour les hubs vocaux")
async def help_voice(interaction: discord.Interaction):
    await _send_category_help(interaction, "voice")

@help_group.command(name="sanctions", description="‚öñÔ∏è Aide pour le syst√®me de sanctions")
async def help_sanctions(interaction: discord.Interaction):
    await _send_category_help(interaction, "sanctions")

@help_group.command(name="community", description="üë• Aide pour les commandes communautaires")
async def help_community(interaction: discord.Interaction):
    await _send_category_help(interaction, "community")

@help_group.command(name="hunt", description="üèπ Aide pour Hunt Royal")
async def help_hunt(interaction: discord.Interaction):
    await _send_category_help(interaction, "hunt_royal")

@help_group.command(name="creator", description="üîß Aide pour les outils cr√©ateur")
async def help_creator(interaction: discord.Interaction):
    await _send_category_help(interaction, "creator")

async def _send_category_help(interaction: discord.Interaction, category: str):
    """Envoie l'aide pour une cat√©gorie sp√©cifique"""
    
    help_system = HelpSystem()
    
    if category not in help_system.commands_data:
        await interaction.response.send_message("‚ùå Cat√©gorie introuvable", ephemeral=True)
        return
    
    data = help_system.commands_data[category]
    
    embed = discord.Embed(
        title=f"{data['emoji']} {data['title']} - Arsenal V4",
        description=f"**{data['description']}**\n**Permissions requises:** {data['permission']}",
        color=discord.Color.green()
    )
    
    # Diviser les commandes en chunks pour √©viter la limite des embeds
    commands_list = list(data['commands'].items())
    chunks = [commands_list[i:i+10] for i in range(0, len(commands_list), 10)]
    
    for i, chunk in enumerate(chunks):
        field_name = "üìù Commandes Disponibles" if i == 0 else f"üìù Commandes (suite {i+1})"
        field_value = "\n".join([f"‚Ä¢ `{cmd}` - {desc}" for cmd, desc in chunk])
        embed.add_field(name=field_name, value=field_value, inline=False)
    
    # Ajout d'exemples pratiques selon la cat√©gorie
    if category == "admin":
        embed.add_field(
            name="üí° Configuration Recommand√©e",
            value="1. `/admin setup_welcome` ‚Üí Configuration bienvenue\n2. `/admin setup_logs` ‚Üí Logs syst√®me\n3. `/admin setup_roles` ‚Üí R√¥les automatiques",
            inline=False
        )
    elif category == "automod":
        embed.add_field(
            name="‚öôÔ∏è Configuration Sugg√©r√©e",
            value="1. `/automod toggle` ‚Üí Activer le syst√®me\n2. `/automod config spam_detection enabled true` ‚Üí Anti-spam\n3. `/automod set_log_channel` ‚Üí Logs automod",
            inline=False
        )
    elif category == "tickets":
        embed.add_field(
            name="üéØ Mise en Place",
            value="1. `/ticket setup` ‚Üí Configuration initiale\n2. `/ticket panel` ‚Üí Cr√©er le panel\n3. `/ticket config` ‚Üí Personnalisation",
            inline=False
        )
    
    embed.set_footer(text=f"Arsenal V4 ‚Ä¢ Aide {data['title']}")
    
    await interaction.response.send_message(embed=embed, ephemeral=True)

@help_group.command(name="quickstart", description="üöÄ Guide de d√©marrage rapide")
async def help_quickstart(interaction: discord.Interaction):
    """Guide de d√©marrage rapide pour configurer Arsenal"""
    
    help_system = HelpSystem()
    
    embed = discord.Embed(
        title="üöÄ Guide de D√©marrage Rapide - Arsenal V4",
        description="**Configuration essentielle en 5 √©tapes**",
        color=discord.Color.gold()
    )
    
    steps_text = "\n".join(help_system.quick_start_guide)
    embed.add_field(name="üìã √âtapes de Configuration", value=steps_text, inline=False)
    
    embed.add_field(
        name="‚ö° Configuration Express",
        value="```\n/admin setup_welcome\n/admin setup_logs\n/automod toggle\n/ticket setup\n/hub create```",
        inline=False
    )
    
    embed.add_field(
        name="üîç V√©rifications",
        value="‚Ä¢ `/admin test_welcome` - Tester la bienvenue\n‚Ä¢ `/automod status` - V√©rifier l'automod\n‚Ä¢ `/ticket stats` - √âtat des tickets",
        inline=False
    )
    
    embed.add_field(
        name="‚ùì Besoin d'aide ?",
        value="Utilisez `/help [cat√©gorie]` pour plus de d√©tails sur chaque syst√®me",
        inline=False
    )
    
    embed.set_footer(text="Arsenal V4 ‚Ä¢ Configuration Rapide")
    
    await interaction.response.send_message(embed=embed, ephemeral=True)

@help_group.command(name="troubleshoot", description="üîß R√©solution des probl√®mes courants")
async def help_troubleshoot(interaction: discord.Interaction):
    """Guide de d√©pannage pour les probl√®mes courants"""
    
    help_system = HelpSystem()
    
    embed = discord.Embed(
        title="üîß D√©pannage Arsenal V4",
        description="**Solutions aux probl√®mes les plus fr√©quents**",
        color=discord.Color.orange()
    )
    
    for issue, solution in help_system.common_issues.items():
        embed.add_field(
            name=f"‚ùì {issue}",
            value=f"üí° {solution}",
            inline=False
        )
    
    embed.add_field(
        name="üõ†Ô∏è Diagnostics Utiles",
        value="‚Ä¢ `/info` - √âtat g√©n√©ral du bot\n‚Ä¢ `/admin stats` - Statistiques serveur\n‚Ä¢ `/automod status` - √âtat automod\n‚Ä¢ `/ticket stats` - √âtat tickets",
        inline=False
    )
    
    embed.add_field(
        name="üìû Support Avanc√©",
        value="Si le probl√®me persiste:\n‚Ä¢ `/signaler_bug` - Signaler le probl√®me\n‚Ä¢ Contactez l'√©quipe Arsenal\n‚Ä¢ V√©rifiez les permissions du bot",
        inline=False
    )
    
    embed.set_footer(text="Arsenal V4 ‚Ä¢ Assistance Technique")
    
    await interaction.response.send_message(embed=embed, ephemeral=True)

@help_group.command(name="permissions", description="üîê Guide des permissions n√©cessaires")
async def help_permissions(interaction: discord.Interaction):
    """Guide d√©taill√© des permissions requises"""
    
    embed = discord.Embed(
        title="üîê Permissions Arsenal V4",
        description="**Permissions n√©cessaires pour chaque fonctionnalit√©**",
        color=discord.Color.purple()
    )
    
    permissions_data = {
        "ü§ñ Permissions Bot Essentielles": [
            "‚úÖ Lire les messages",
            "‚úÖ Envoyer des messages", 
            "‚úÖ Int√©grer des liens",
            "‚úÖ Joindre des fichiers",
            "‚úÖ Lire l'historique des messages",
            "‚úÖ Utiliser les emojis externes",
            "‚úÖ Ajouter des r√©actions"
        ],
        "üõ°Ô∏è Mod√©ration": [
            "‚úÖ G√©rer les messages",
            "‚úÖ Expulser des membres",
            "‚úÖ Bannir des membres",
            "‚úÖ Exclure temporairement des membres",
            "‚úÖ G√©rer les r√¥les",
            "‚úÖ G√©rer les pseudos"
        ],
        "üéß Vocal": [
            "‚úÖ Se connecter aux salons vocaux",
            "‚úÖ Parler dans les salons vocaux",
            "‚úÖ G√©rer les salons vocaux",
            "‚úÖ D√©placer des membres",
            "‚úÖ Rendre muet des membres",
            "‚úÖ Rendre sourd des membres"
        ],
        "üé´ Tickets & Salons": [
            "‚úÖ G√©rer les salons",
            "‚úÖ G√©rer les permissions",
            "‚úÖ Cr√©er des invitations",
            "‚úÖ Voir les salons vocaux"
        ]
    }
    
    for category, perms in permissions_data.items():
        embed.add_field(
            name=category,
            value="\n".join(perms),
            inline=True
        )
    
    embed.add_field(
        name="‚ö†Ô∏è Important",
        value="‚Ä¢ Le bot doit avoir un r√¥le au-dessus des r√¥les qu'il g√®re\n‚Ä¢ Certaines commandes n√©cessitent des permissions administrateur\n‚Ä¢ V√©rifiez les permissions par salon si n√©cessaire",
        inline=False
    )
    
    embed.set_footer(text="Arsenal V4 ‚Ä¢ Configuration Permissions")
    
    await interaction.response.send_message(embed=embed, ephemeral=True)

@help_group.command(name="contact", description="üìû Informations de contact et support")
async def help_contact(interaction: discord.Interaction):
    """Informations de contact et support"""
    
    embed = discord.Embed(
        title="üìû Support Arsenal V4",
        description="**Besoin d'aide ? Contactez-nous !**",
        color=discord.Color.blurple()
    )
    
    embed.add_field(
        name="üêõ Signaler un Bug",
        value="Utilisez `/signaler_bug` directement dans Discord",
        inline=False
    )
    
    embed.add_field(
        name="üí° Suggestions",
        value="Utilisez les commandes de suggestion int√©gr√©es au bot",
        inline=False
    )
    
    embed.add_field(
        name="üìö Documentation",
        value="‚Ä¢ `/help menu` - Guide complet\n‚Ä¢ `/help quickstart` - D√©marrage rapide\n‚Ä¢ `/help troubleshoot` - D√©pannage",
        inline=False
    )
    
    embed.add_field(
        name="‚ÑπÔ∏è Informations Bot",
        value="‚Ä¢ `/info` - Informations g√©n√©rales\n‚Ä¢ `/version` - Version actuelle\n‚Ä¢ `/admin stats` - Statistiques",
        inline=False
    )
    
    embed.add_field(
        name="üîÑ Mises √† Jour",
        value="Arsenal V4 est mis √† jour r√©guli√®rement avec de nouvelles fonctionnalit√©s et corrections",
        inline=False
    )
    
    embed.set_footer(text="Arsenal V4 ‚Ä¢ √âquipe de Support")
    
    await interaction.response.send_message(embed=embed, ephemeral=True)

@help_group.command(name="search", description="üîç Rechercher une commande sp√©cifique")
@app_commands.describe(query="Rechercher une commande ou fonctionnalit√©")
async def help_search(interaction: discord.Interaction, query: str):
    """Recherche dans les commandes disponibles"""
    
    help_system = HelpSystem()
    query_lower = query.lower()
    results = []
    
    # Recherche dans toutes les cat√©gories
    for category, data in help_system.commands_data.items():
        # Recherche dans le titre et description
        if query_lower in data['title'].lower() or query_lower in data['description'].lower():
            results.append(f"**{data['emoji']} {data['title']}** - `/help {category}`")
        
        # Recherche dans les commandes
        for command, description in data['commands'].items():
            if query_lower in command.lower() or query_lower in description.lower():
                results.append(f"`{command}` - {description}")
    
    if not results:
        embed = discord.Embed(
            title="üîç Recherche Arsenal V4",
            description=f"‚ùå Aucun r√©sultat trouv√© pour: **{query}**",
            color=discord.Color.red()
        )
        embed.add_field(
            name="üí° Suggestions",
            value="‚Ä¢ Utilisez `/help menu` pour voir toutes les cat√©gories\n‚Ä¢ Essayez des mots-cl√©s comme 'mod', 'admin', 'ticket'\n‚Ä¢ V√©rifiez l'orthographe",
            inline=False
        )
    else:
        embed = discord.Embed(
            title="üîç R√©sultats de Recherche",
            description=f"**Recherche pour:** {query}\n**{len(results)} r√©sultat(s) trouv√©(s)**",
            color=discord.Color.green()
        )
        
        # Limiter les r√©sultats pour √©viter la limite des embeds
        displayed_results = results[:15]
        if len(results) > 15:
            displayed_results.append(f"... et {len(results) - 15} autres r√©sultats")
        
        embed.add_field(
            name="üìù R√©sultats",
            value="\n".join(displayed_results),
            inline=False
        )
    
    embed.set_footer(text="Arsenal V4 ‚Ä¢ Recherche Commandes")
    
    await interaction.response.send_message(embed=embed, ephemeral=True)

# Commande help simple aussi
@app_commands.command(name="aide", description="üÜò Aide rapide Arsenal V4")
@app_commands.describe(category="Cat√©gorie d'aide sp√©cifique (optionnel)")
@app_commands.choices(category=[
    app_commands.Choice(name="üëë Administration", value="admin"),
    app_commands.Choice(name="üõ°Ô∏è Mod√©ration", value="moderation"),
    app_commands.Choice(name="ü§ñ Auto-Mod√©ration", value="automod"),
    app_commands.Choice(name="üé´ Tickets", value="tickets"),
    app_commands.Choice(name="üéß Vocal", value="voice"),
    app_commands.Choice(name="üë• Communaut√©", value="community"),
    app_commands.Choice(name="üèπ Hunt Royal", value="hunt"),
    app_commands.Choice(name="üöÄ D√©marrage Rapide", value="quickstart"),
    app_commands.Choice(name="üîß D√©pannage", value="troubleshoot")
])
async def simple_help(interaction: discord.Interaction, category: Optional[str] = None):
    """Commande d'aide simple avec redirection vers le syst√®me complet"""
    
    if not category:
        # Rediriger vers le menu principal
        await help_menu(interaction)
    elif category == "quickstart":
        await help_quickstart(interaction)
    elif category == "troubleshoot": 
        await help_troubleshoot(interaction)
    else:
        await _send_category_help(interaction, category)

class HelpCog(commands.Cog):
    """Cog pour le syst√®me d'aide"""
    
    def __init__(self, bot):
        self.bot = bot
        log.info("üÜò Syst√®me d'aide initialis√©")

async def setup(bot):
    """Setup du cog d'aide"""
    await bot.add_cog(HelpCog(bot))
    
    # Ajouter les commandes slash
    bot.tree.add_command(help_group)
    bot.tree.add_command(simple_help)
    
    log.info("üÜò Syst√®me d'aide charg√© avec succ√®s")
